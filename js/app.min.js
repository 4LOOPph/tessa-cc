!function(){"use strict";angular.module("tessaApp",["ksSwiper","ui.router","restangular","ngSanitize","ui.bootstrap","ui.select","ngTouch","ngAnimate","angularjs-dropdown-multiselect","toastr","LocalStorageModule","angucomplete-alt","ngFrontier","angularMoment","ngDialog","angularSpinner","angular-loading-bar","angular.filter","textAngular","com.2fdevs.videogular","com.2fdevs.videogular.plugins.controls","com.2fdevs.videogular.plugins.overlayplay","com.2fdevs.videogular.plugins.poster","com.2fdevs.videogular.plugins.buffering","angular-jwt","infinite-scroll","io.dennis.contextmenu","bootstrapLightbox","angularTreeview","angularFileUpload","btford.socket-io","tessa-presentation","angular-carousel","angular-gestures","satellizer","ngFileUpload","swipe","ngclipboard","ngIOS9UIWebViewPatch","angularGrid","infinite-scroll","LocalForageModule","dragularModule"]).constant("ACCESSKEY","jeJMH2vWAQocOrat0bu1yqLJg1X0xdYZ").constant("API_URL","http://54.206.38.223:5002").constant("API_VERSION","/api/1.0/").constant("EXT_ID","abggimbnoanedfgibfmkilplcmehkfln")}();
!function(){"use strict";angular.module("tessaApp").run(["$location","APIFactory","$rootScope","$window","$state","localStorageService","$frontierAnalytics","usSpinnerService","AuthFactory","jwtHelper","API_URL","EXT_ID","toastr","$filter","$timeout","$localForage",function(e,t,r,n,i,a,s,u,c,o,l,p,d,f,g,h){if(r.count=1,r._=window._,window.API_URL=l,window.EXT_ID=p,r.compareproducts=[],r.allproducts=[],h.getItem("ProductsCompare").then(function(e){_.isNull(e)?r.compareproducts=[]:r.compareproducts=e}),s.debugMode(!1),s.allowPageTracking(!0),s.allowEventTracking(!0),s.allowViewTracking(!0),s.allowAppTracking(!0),s.allowDeviceTracking(!0),s.Initialize({accessCode:"958441082755103",trackerName:"project-tessa",encoding:"utf-8"}),r.InitializeData=function(e){r.displayscreen=!0,async.waterfall([function(e){console.log("1"),t.getArticles({},function(t,r){var n=_.filter(r.response.result,function(e){return 1==e.is_active});_.each(n,function(e){e.type="Experience",e.name=e.title,e.id=e.article_id}),e(null,n)})},function(e,r){console.log("2"),t.getProductBundle(function(t,n){if(200==n.statusCode&&n.response.success){var i=[],a=[],s=[],u=[];s=_.filter(n.response.result,function(e){if(1==e.is_published&&0==e.is_archived)return e}),_.each(s,function(e){e.type="Solutions",e.name=e.bundle_name,e.id=e.pb_id}),a=_.flattenDeep(_.map(s,function(e){return void 0!=e.product_bundle_category[0]&&i.push(e.product_bundle_category[0]),e.products.length>0||(e.weekly=0),e.products})),_.each(a,function(e){e.product_detail&&(e.productType_id=e.product_detail.productType_id,e.sell_price=e.product_detail.sell_price,e.product_detail.product_category.length>0&&(e.category_id=e.product_detail.product_category[0].category_id,e.category_label=e.product_detail.product_category[0].category_label))});var c=_.groupBy(a,"pb_id");_.map(c,function(e,t){var r=f("filter")(e,{productType_id:18}),n=f("filter")(e,{productType_id:17}),i=f("filter")(e,{productType_id:20});if(parseInt(t)==parseInt(t)){var a=[],u=[],c=[],o=[],l=[],p=[];if((n.length>0||r.length>0)&&(a=_.sum(_.map(n,function(e){return e.sell_price*e.quantity})),u=_.sum(_.map(r,function(e){return e.sell_price*e.quantity}))),i.length>0){var d=f("filter")(i,{category_id:87}),g=f("filter")(i,{category_id:90});(d.length>0||g.length>0)&&(c=_.sum(_.map(d,function(e){return e.sell_price*e.quantity})),o=_.sum(_.map(g,function(e){return e.sell_price*e.quantity}))),l=_.sum(_.map(i,function(e){return e.sell_price*e.quantity}))}void 0==c&&void 0==o&&(c=0,o=0);var h=c+u+a;p=12*(31.111*h/1e3+o)/52}_.each(s,function(e){e.pb_id==parseInt(t)&&(e.weekly=p,e.software=r,e.hardware=n,e.support=g,e.upfront=h,e.spPrice=_.sum(_.map(g,function(e){return e.sell_price*e.quantity})))})}),_.each(s,function(e){e.product_bundle_category.length>0&&(e.category_label=e.product_bundle_category[0].category_label,e.category_id=e.product_bundle_category[0].category_id),_.some(e.hardware,function(e){u.push(e)})}),r(null,e,s,u)}})},function(e,r,n,i){console.log("3");var a=[];t.getProduct(function(t,s){200==s.statusCode&&s.response.success&&(a=_.filter(s.response.result,function(e){return"Hardware"==e.product_type}),a=_.filter(s.response.result,function(e){if(1==e.is_published&&0==e.is_archived)return e}),_.each(a,function(e){e.type="Hardware",e.name=e.item_name,e.id=e.p_id}),i(null,e,r,n,a))})},function(e,r,n,i,a){console.log("4");var s=[];async.each(n,function(e,r){t.getProductAttribute(e.product_id,function(e,t){t?200==t.statusCode&&t.response.success&&(s.push(t.response.result),r()):r()})},function(t,u){a(null,e,r,n,i,s)})},function(e,r,n,i,a,s){console.log("5"),async.each(i,function(e,r){t.getProductAttribute(e.p_id,function(t,n){if(200==n.statusCode&&n.response.success&&e.p_id==n.response.result.p_id){var i=n.response.result.attribute_values;i&&i.length>0?e.attributes=n.response.result.attribute_values:e.attributes=[],r()}})},function(t,u){_.each(i,function(e){var t=_.filter(e.attributes,{is_comparable:1});_.filter(e.attributes,{is_visible:1});t.length>0?e.comparable=1:e.comparable=0}),s(null,e,r,n,i,a)})},function(e,t,r,n,i,a){i=_.flattenDeep(i);var s=_.groupBy(i,"p_id");_.each(r,function(e){_.map(s,function(t,r){r&&_.each(t,function(t){if(t.attribute_values.length>0){var n=_.find(t.attribute_values,{is_comparable:1});_.isUndefined(n)&&r?parseInt(r)==e.product_id&&(e.comparable=0,e.attributes=t.attribute_values):parseInt(r)==e.product_id&&(e.comparable=1,e.attributes=t.attribute_values)}else parseInt(r)==e.product_id&&(e.comparable=0,e.attributes=[])})})});var u=_.groupBy(r,"pb_id");_.each(t,function(e){_.map(u,function(t,r){if(e.pb_id==r&&e.hardware){var n=_.filter(t,{comparable:1});n.length>0?e.comparable=1:e.comparable=0}})}),a(null,e,t,r,n,i)},function(e,t,n,i,a,s){var u=[];_.each(i,function(e){_.isNull(e.attributes)||u.push(e.attributes)}),u=_.flattenDeep(u),r.Brightness=f("filter")(u,{attribute:"Brightness"}),r.Bezel=f("filter")(u,{attribute:"Bezel Size"}),r.Usage=f("filter")(u,{attribute:"Usage"}),r.Brightness=_.uniqBy(r.Brightness,"value"),r.Bezel=_.uniqBy(r.Bezel,"value"),r.Usage=_.uniqBy(r.Usage,"value");var c=[];c.push(e),c.push(t),c.push(i),c=_.flattenDeep(c),r.allproducts=angular.copy(c),h.setItem("Articles",e),h.setItem("Bundles",t),h.setItem("Products",i),h.setItem("allData",c),s(null,e,t,i,a,c)},function(t,a,s,u,c,o,l){_.isUndefined(e)?i.go("main.experience",null,{reload:!0}):n.location.href=e,r.displayscreen=!1}])},c.getCurrentUser()){var m=JSON.parse(a.get("appuser"));s.setUserId(_.toString(m.uc_id))}r.$on("loading:progress",function(){u.spin("spinner-1")}),r.$on("loading:finish",function(){u.stop("spinner-1")}),r.$on("app:reload",function(){g(function(){n.location.reload()},1e3)}),r.goBack=function(){n.history.back()},r.$on("$stateChangeStart",function(t,n,s,u,l){if(console.log("WALA PA:",n.name),r.compareIs=!0,_.isNull(c.getCurrentUser()))"login"!==n.name&&"forget-password"!==n.name&&"publicshare"!==n.name&&(r.requested=e.$$absUrl,t.preventDefault(),i.go("login"));else{var p=c.getUserToken();JSON.parse(a.get("appuser"));o.isTokenExpired(p)?c.logout().then(function(){e.path("/login")}):"login"==n.name&&(t.preventDefault(),i.go("main.experience"))}r.isHide=!1,r.toggleShow=function(){r.isHide=!r.isHide},r.width=Math.max(document.documentElement.clientWidth,window.innerWidth||0),r.height=Math.max(document.documentElement.clientHeight,window.innerHeight||0),r.hideNav=function(){r.isHide=!1},console.log("$rootScope.width:",r.width),console.log("$rootScope.height;",r.height),r.compare=function(e){console.log("items:",e);var t={},n=0;if(n=r.width<=500&&r.height<=975?2:r.width<=975&&r.height<=500?2:4,_.isEmpty(r.compareproducts))d.success("Successfully Added","Success"),r.compareIs=!1,r.compareproducts.push(e),h.setItem("ProductsCompare",r.compareproducts);else if(r.compareproducts.length>=1&&r.compareproducts.length<n){var i=_.filter(r.compareproducts,{_id:e._id});i.length>0?d.error("Oops. The selected item has already been added.","Warning"):(_.each(r.compareproducts,function(e,r){0==r&&(t=e)}),t.category_id==e.category_id?(d.success("Successfully Added","Success"),r.compareIs=!1,r.compareproducts.push(e),h.setItem("ProductsCompare",r.compareproducts)):d.error("Oops. The selected item is incomparable to the existing item(s).","Error"))}else d.error("Oops. You can not compare more than "+n+" items.","Error")}}),r.addToCart=function(e,t){if("Solution"==t){if(s.trackEvent("Productcatalogue","click","addtocart",_.toString(e.pb_id)),0==e.upfront)d.error("Cannot add product when the values are 0","Error");else if(e.quantity=1,r.cartItems&&r.cartItems.length>=0){var n=_.filter(r.cartItems,{pb_id:e.pb_id});n.length>0?(n[0].quantity++,_.each(r.cartItems,function(e){e.pb_id==n[0].pb_id&&(e.quantity=n[0].quantity)}),d.success("Quantity Added","Success"),h.setItem("Cart",r.cartItems)):(d.success("Successfully Added","Success"),r.cartItems.push(e),h.setItem("Cart",r.cartItems))}}else if("Hardware"==t&&(s.trackEvent("Productcatalogue","click","addtocart",_.toString(e.p_id)),e.upfront=e.sell_price,e.quantity=1,r.cartItems.length>=0)){var n=_.filter(r.cartItems,{p_id:e.p_id});n.length>0?(n[0].quantity++,_.each(r.cartItems,function(e){e.p_id==n[0].p_id&&(e.quantity=n[0].quantity)}),d.success("Quantity Added","Success"),h.setItem("Cart",r.cartItems)):(d.success("Successfully Added","Success"),r.cartItems.push(e),h.setItem("Cart",r.cartItems))}};var y=function(){async.waterfall([function(e){t.getArticles({},function(t,r){_.each(r.response.result,function(e){e.type="Experience"}),_.each(r.response.result,function(e){e.name=e.title,e.id=e.article_id}),e(null,r.response.result)})},function(e,r){t.getProductBundle(function(t,n){var i=_.filter(n.response.result,function(e){if(1==e.is_published&&0==e.is_archived)return e});_.each(i,function(e){e.type="Solutions",e.name=e.bundle_name,e.id=e.pb_id}),r(null,e,i)})},function(e,r,n){var i=[];t.getProduct(function(t,a){i=_.filter(a.response.result,function(e){return"Hardware"==e.product_type}),i=_.filter(i,function(e){if(1==e.is_published&&0==e.is_archived)return e}),_.each(i,function(e){e.type="Hardware",e.name=e.item_name,e.id=e.p_id}),n(null,e,r,i)})},function(e,r,n,i){var a=[];async.each(n,function(e,r){t.getProductAttribute(e.p_id,function(t,n){if(200==n.statusCode&&n.response.success&&e.p_id==n.response.result.p_id){var i=n.response.result.attribute_values;i&&i.length>0?e.attributes=n.response.result.attribute_values:e.attributes=null,r()}})},function(t,s){_.each(n,function(e){1==e.is_published&&0==e.is_archived&&a.push(e)}),i(null,e,r,n,a)})},function(e,t,n,i,a){var s=[];_.each(i,function(e){_.isNull(e.attributes)||s.push(e.attributes)}),s=_.flattenDeep(s),r.Brightness=f("filter")(s,{attribute:"Brightness"}),r.Bezel=f("filter")(s,{attribute:"Bezel Size"}),r.Usage=f("filter")(s,{attribute:"Usage"}),r.Brightness=_.uniqBy(r.Brightness,"value"),r.Bezel=_.uniqBy(r.Bezel,"value"),r.Usage=_.uniqBy(r.Usage,"value");var u=[];_.each(i,function(e){1==e.is_published&&0==e.is_archived&&u.push(e)}),_.each(t,function(e){1==e.is_published&&0==e.is_archived&&u.push(e)}),_.each(e,function(e){1==e.is_active&&u.push(e)}),a(null,i,t,e),r.allproducts=angular.copy(u)}])};r.$on("$stateChangeSuccess",function(e,t,n,i,a){r.appuser=JSON.parse(c.getCurrentUser("appuser")),"login"==i.name&&"main.experience"==t.name||"main.search"==t.name&&y(),r.currentUser=c.getCurrentUser(),r.label="Solutions",s.trackPage(t.name,t.url,t.templateUrl)})}])}();
!function(){"use strict";angular.module("tessaApp").config(["$stateProvider","$httpProvider","RestangularProvider","$urlRouterProvider","API_URL","API_VERSION","$provide","usSpinnerConfigProvider","localStorageServiceProvider","hammerDefaultOptsProvider","$authProvider","$localForageProvider",function(e,t,r,l,o,a,i,s,n,p,c,u){t.interceptors.push("authInterceptor"),t.interceptors.push("httpInterceptor"),i.value("baseURL",o),r.setBaseUrl(o+a),s.setDefaults({color:"#004D7F",radius:20,width:8,length:16}),n.setPrefix("tessa"),n.setStorageType("localStorage"),p.set({recognizers:[[Hammer.Swipe,{velocity:.3,time:100}]],touchAction:"pan-y"}),u.config({driver:localforage.WEBSQL,name:"tessaLocal",storeName:"allData"}),e.state("login",{url:"/login",templateUrl:"views/login.html",controller:"loginCtrl"}).state("forget-password",{url:"/forgetpassword",templateUrl:"views/forgot.html",controller:"ForgotPasswordCtrl"}).state("publicshare",{url:"/file/:_id/view",templateUrl:"views/publicshare/share.html",controller:"publicShareCtrl"}).state("main",{url:"/main",templateUrl:"views/main.html",controller:"MainCtrl"}).state("main.experience",{url:"/experience",templateUrl:"views/experience.html",controller:"expCtrl"}).state("priceBook",{url:"/priceBook",templateUrl:"views/priceBook.html"}).state("main.productCatalogue",{url:"/productCatalogue",templateUrl:"views/catalogue-page.html",controller:"productCtrl"}).state("main.articlePage",{url:"/articlePage/:selected_id",templateUrl:"views/article.page.html",controller:"ModalInstanceCtrl"}).state("main.customerQuotes",{url:"/customerQuotes",templateUrl:"views/customerQuotes.html"}).state("main.quoteProfile",{url:"/quoteProfile/:quote_id",templateUrl:"views/quoteProfile.html",controller:"QuoteCtrl"}).state("main.search",{url:"/search?value",templateUrl:"views/search.html",controller:"searchCtrl"}).state("main.quote",{url:"/quote",templateUrl:"views/quote.html",controller:"QuoteCtrl"}).state("main.productDetailsSolution",{url:"/productCatalogue/productDetailsSolution/:selected_id",templateUrl:"views/productDetailsSolution.html",controller:"detailSolutionCtrl"}).state("main.productDetailsHardware",{url:"/productCatalogue/productDetailsHardware/:selected_id",templateUrl:"views/productDetailsHardware.html",controller:"hardwareDetailsCtrl"}).state("main.presentation",{url:"/presentation",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.assetGallery",{url:"/assetGallery",templateUrl:"views/presentation/asset-gallery.html",controller:"presCtrl"}).state("main.presentation_starred",{url:"/presentation/starred",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.presentation_trash",{url:"/presentation/trash",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.openfolder",{url:"/presentation/folder/:_id",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.opensubfolder",{url:"/presentation/folder/:_id/s/:sub_id",templateUrl:"views/presentation/presentation.html",controller:"presentationCtrl"}).state("main.compareProducts",{url:"/compareProducts",templateUrl:"views/comparison/compare-home.html",controller:"compareCtrl"}).state("main.compareModule",{url:"/compareModule",templateUrl:"views/comparison/compare.module.html",controller:"compareCtrl"}).state("main.Experiment",{url:"/experiment",templateUrl:"views/test-page.html",controller:"expCtrl"}).state("main.userProfile",{url:"/userProfile",templateUrl:"views/users/user-profile.html",controller:"ProfileCtrl"}),l.otherwise("/login"),c.facebook({clientId:"1111128468924793",url:o+a+"auth/facebook",authorizationEndpoint:"https://www.facebook.com/v2.5/dialog/oauth",redirectUri:window.location.origin+"/",requiredUrlParams:["display","scope"],scope:["email"],scopeDelimiter:",",display:"popup",oauthType:"2.0"}),c.google({clientId:"900266970659-cu75qg9qmo7e7keppek0j8nvev4ff342.apps.googleusercontent.com",url:o+a+"auth/google",redirectUri:window.location.origin,requiredUrlParams:["scope"],scope:["profile","email"],scopePrefix:"openid",scopeDelimiter:" ",oauthType:"2.0"}),c.linkedin({clientId:"812xr08ehfekor",url:o+a+"auth/linkedin",redirectUri:window.location.origin,requiredUrlParams:["state"],scope:["r_emailaddress"],scopeDelimiter:" ",oauthType:"2.0",state:"STATE"}),c.twitter({clientId:"j8Bh5PkCfEbBzO4ZW6kqoYF1i",url:o+a+"auth/twitter",redirectUri:window.location.origin+"/",oauthType:"1.0"})}])}();
!function(){"use strict";function e(e,s,r,t,i,p,o,n,a,u,c){$("input").bind("keypress",function(e){13===e.which&&document.activeElement.blur()}),e.items=[];i.isAssets=!1,i.isPreso=!1,i.appuser=JSON.parse(s.getCurrentUser("appuser")),r.isEmpty(i.appuser)||u.personDetail(i.appuser.person_id,function(e,s){if(200==s.statusCode&&s.response.success){i.appprofile=s.response.result;var t=r.find(i.appuser.userRoles,{name:"Sales Rep."});t&&1==i.appuser.isOwner?(i.isAssets=!0,i.isPreso=!0):t&&0==i.appuser.isOwner&&(i.isAssets=!1,i.isPreso=!0)}})}angular.module("tessaApp").controller("MainCtrl",e),e.$inject=["$scope","AuthFactory","_","$state","$rootScope","$filter","$uibModal","localStorageService","$timeout","APIFactory","$window"]}();
!function(){"use strict";function e(e,t,n,s,i,o,r,c,u,a,l,g,p,d,f,k,m){e.articles=[],e.bundles=[],e.products=[],$("input").bind("keypress",function(e){13===e.which&&document.activeElement.blur()}),e.user={},e.login=function(){u.spin("spinner-login"),t.authenticateAccount(e.user).then(function(n){400!=n.statusCode||n.response.success?n.success?(g.trackEvent("Login","click","login",o.toString(n.result.user.uc_id)),t.setCurrentUser(n.result.user),t.setUserToken(n.result.token),g.setUserId(o.toString(n.result.user.uc_id)),u.stop("spinner-login"),a.success(n.msg),f.displayscreen=!0,k.getItem("Articles").then(function(t){e.articles=angular.copy(t),k.getItem("Bundles").then(function(t){e.bundles=angular.copy(t),k.getItem("Products").then(function(t){e.products=angular.copy(t),o.isUndefined(f.requested)?p(function(){e.$apply(function(){f.InitializeData()})},500):p(function(){e.$apply(function(){f.InitializeData(f.requested)})},500)})})})):(a.warning(n.msg,"Warning"),u.stop("spinner-login")):(o.each(n.response.result,function(e){a.warning(e.msg,"Warning")}),u.stop("spinner-login"))})},e.authenticate=function(e){l.authenticate(e).then(function(n){if(n){var s=n.data;s.success?("facebook"==e?g.trackEvent("Social Login","click","facebook_login",o.toString(s.result.user.uc_id)):"google"==e?g.trackEvent("Social Login","click","google_login",o.toString(s.result.user.uc_id)):"twitter"==e?g.trackEvent("Social Login","click","twitter_login",o.toString(s.result.user.uc_id)):"linkedin"==e&&g.trackEvent("Social Login","click","linkedIn_login",o.toString(s.result.user.uc_id)),t.setUserToken(s.result.token),t.setCurrentUser(s.result.user),g.setUserId(o.toString(s.result.user.uc_id)),a.success("Login successfully with "+e.toUpperCase()+"!"),p(function(){r.go("main.experience")},100)):400===s.statusCode&&!s.response.success&&o.isArray(s.response.result)?o.each(s.response.result,function(e){a.warning(e.msg,"Warning")}):a.error(s.msg,"Error")}})["catch"](function(e){e.message?console.log(e.message):e.data?console.log(e.data.message,e.status):console.log(e)})}}angular.module("tessaApp").controller("loginCtrl",e),e.$inject=["$scope","AuthFactory","$location","$stateParams","$filter","_","$state","localStorageService","usSpinnerService","toastr","$auth","$frontierAnalytics","$timeout","$window","$rootScope","$localForage","APIFactory"]}();
!function(){"use strict";function e(e,t,l,r,i,a,n,o,c,s,u,d,p){function f(e){return a.map(e,function(e){if("location"==e.type){var t=e.label.replace(/[\s]/g,"");return{label:t.toLowerCase(),type:e.type,index:e.sortindex}}if("configuration"==e.type){var l=e.label.replace(/[\[\](){}?*+\^$\\.|\-|\s]/g,"");return{label:l,type:e.type,index:e.sortindex}}return"Family"==e.type?{label:e.label,type:e.type,index:e.sortindex}:"Products"==e.type?{label:e.label,type:e.type,index:e.sortindex}:e})}function h(e,t){var l=[],r=[],i=a.filter(t,function(e){return e.pb_id}),n=a.filter(t,function(e){return e.p_id});a.isEmpty(i)||a.each(e,function(e){l=a.filter(i,function(t){if(t.hardware)return t.hardware.some(function(t){if(!a.isNull(t.attributes))return a.some(t.attributes,function(t){return e.value==t.value})})}),r.push(l)}),a.isEmpty(n)||a.each(e,function(e){l=a.filter(n,function(e){if(!a.isNull(e.attributes))return a.some(e.attributes,function(t){return t.value==e.value})}),r.push(l)}),r=a.flattenDeep(r);var o=a.uniqBy(r,function(e){return e._id});return o}e.shows=!0,e.DisplayTab="All",e.allproducts=o.allproducts,e.Brightness=o.Brightness,e.bundles=[],e.products=[],e.experience=[],e.location=[],e.configuration=[],e.filterProduct=[],e.filtersearch=[],e.copy=[],e.typeselected=[],e.typeselected2=[],e.typeselected3=[],e.typeselected4=[],e.attribute_values=[],e.bundleproducts=[],e.experiencedata=[{_id:1,label:"Eze Impress",type:"Family"},{_id:2,label:"Eze Wifi",type:"Family"}],e.producttypedata=[{_id:4,label:"Hardware",type:"Products"},{_id:6,label:"Experience",type:"Products"},{_id:7,label:"Solution",type:"Products"}],e.location=[{_id:8,label:"Indoor",type:"location"},{_id:9,label:"Outdoor",type:"location"},{_id:10,label:"Semi Outdoor",type:"location"}],e.config=[{_id:11,label:"Wall Mounted",type:"configuration"},{_id:12,label:"Floor Mounted",type:"configuration"}],e.orientation=[{_id:13,label:"Landscape",type:"orientation"},{_id:14,label:"Portrait",type:"orientation"},{_id:15,label:"Custom",type:"orientation"}],e.limitWithPage=12,e.loadmore=!1,e.showLoadMore=!1,e.dynamicPopover={templateUrl:"productType.html",templateUrl2:"ezefamily.html",templateUrl3:"location.html",templateUrl4:"configuration.html",templateUrl5:"usages.html",templateUrl6:"orientation.html",templateUrl7:"brightness.html",templateUrl8:"bezelsize.html"},o.$watch("allproducts",function(t){e.allproducts=t}),o.$watch("Brightness",function(t){e.Brightness=t}),r.value&&(t.getAll(r.value).then(function(t){if(200==t.statusCode&&t.response.success){var l=[],r=[];l=a.filter(t.response.result.values,function(e){return"Services"!==e.type}),p.getItem("allData").then(function(t){a.each(l,function(l){r=a.find(t,{id:l.id}),a.isUndefined(r)||e.filtersearch.push(r)}),e.searchcopy=angular.copy(e.filtersearch)})}}),d.trackEvent("Global Search","enter keyword","global search",r.value)),e.repeatEnd=function(){e.showLoadMore=!0,s(function(){e.$apply(function(){e.loadmore=!1})},2e3)},e.addMoreItems=function(){e.loadmore=!0,e.limitWithPage+=12},e.activeTab=function(t){e.DisplayTab=t},e.detail=function(t,l){e.selected=t},e.openModal=function(t){var l=c.open({animation:!0,templateUrl:"./views/search.detail.modal.html",size:"md",controller:"searchDetailControl",backdrop:!0,windowClass:"xd-modal",backdropClass:"modal-backdrop fade in",resolve:{search:function(){return t}}});l.result.then(function(t){e.selected=t},function(){console.info("Modal dismissed at: "+new Date)})},e.filterCheck=function(){e.typeselected&&e.typeselected.length<1?(e.filterProduct=angular.copy(e.copy),e.filtersearch=angular.copy(e.filterProduct)):e.typeselected2&&e.typeselected2.length<1?e.filtersearch=angular.copy(e.filterProduct):e.typeselected3&&e.typeselected3.length<1?e.filtersearch=angular.copy(e.filterFamily):e.typeselected4&&e.typeselected4.length<1&&(e.filtersearch=angular.copy(e.filterLocation)),e.articles=i("filter")(e.filtersearch,{self:"articles"}),e.products=i("filter")(e.filtersearch,{self:"products"}),e.bundles=i("filter")(e.filtersearch,{self:"bundles"}),o.$broadcast("loading:finish")},e.toggleSelectedType=function(t,l){e.bundleTags=[];var r=[];e.filtersearch=[],s(function(){n()},600);var n=function(){if(e.typeselected.indexOf(t)==-1?(t.sortindex=l,e.typeselected.push(t)):e.typeselected=a.filter(e.typeselected,function(e){return e._id!=t._id}),e.typeselected=a.sortBy(e.typeselected,["sortindex"]),r=f(e.typeselected),r&&r.length>0){var n=a.filter(r,function(e){return e.att_id}),o=a.filter(r,function(e){return e.label}),c=[];a.map(e.searchcopy,function(t){a.each(t.tags,function(t){a.isEmpty(t.tags)||e.bundleTags.push(t)})});if(o&&o.length>0)if(e.bundleTags=a.each(e.bundleTags,function(e){return e.tags=e.tags.replace(/[\[\](){}?*+\^$\\.|\-|\s]/g,"")}),a.each(o,function(t){var l=[],r=[],i=[];l=a.filter(e.searchcopy,{type:t.label}),r=a.filter(e.searchcopy,{category_label:t.label}),l&&l.length>0&&a.each(l,function(t){var l=a.find(e.searchcopy,{_id:t._id});a.isUndefined(l)||c.push(l)}),r&&r.length>0&&a.each(r,function(t){var l=a.find(e.searchcopy,{_id:t._id});a.isUndefined(l)||c.push(l)}),i&&i.length>0&&a.each(i,function(t){if(t.pb_id){var l=a.find(e.searchcopy,{pb_id:t.pb_id});a.isUndefined(l)||c.push(l)}else{var l=a.find(e.searchcopy,{p_id:t.p_id});a.isUndefined(l)||c.push(l)}})}),e.filterProduct=a.uniqBy(c,function(e){return e._id}),a.isEmpty(e.filterattrib)){var u=[],d=[];d=h(n,e.bundleproducts),u.push(d),u.push(e.filterProduct),e.filterProduct=a.flattenDeep(u)}else{var p=[];p.push(e.filterProduct),p.push(e.filterattrib),p=a.flattenDeep(p),e.filterProduct=a.uniqBy(p,function(e){return e._id})}else if(n&&n.length>0){var d=[];d=h(n,e.bundleproducts),e.filterProduct=d,e.filterattrib=angular.copy(e.filterProduct)}else e.filterProduct=angular.copy(e.searchcopy)}else e.filterattrib=[],e.filterProduct=angular.copy(e.searchcopy);e.filtersearch=angular.copy(e.filterProduct),console.log("$scope.filtersearch:",e.filtersearch),e.articles=i("filter")(e.filtersearch,{self:"articles"}),e.products=i("filter")(e.filtersearch,{self:"products"}),e.bundles=i("filter")(e.filtersearch,{self:"bundles"}),a.isEmpty(e.filtersearch)&&s(function(){e.noresult="NO RESULT FOUND"},700)}},e.$on("$destroy",function(t){o.$broadcast("angucomplete-alt:clearInput"),t&&(e.searchinput="")})}angular.module("tessaApp").controller("searchCtrl",e),e.$inject=["$scope","APIFactory","$location","$stateParams","$filter","_","$state","$rootScope","$uibModal","$timeout","usSpinnerService","$frontierAnalytics","$localForage"]}();
!function(){"use strict";function e(e,s,t,i,n,o,l,c,r,a,u,d,g){e.selected=t,e.images=e.selected.mediafiles,_.each(e.images,function(e){"video/mp4"==e.media_mimetype&&(e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css")}),e.cancel=function(){s.dismiss("cancel")},e.viewDetails=function(t){if(e.user={},e.login=function(){u.spin("spinner-login"),r.authenticateAccount(e.user).then(function(e){400!=e.statusCode||e.response.success?e.success?(d.trackEvent("Login","click","login",e.result.user.uc_id),r.setCurrentUser(e.result.user),r.setUserToken(e.result.token),d.setUserId(_.toString(e.result.user.uc_id)),g.success(e.msg),"products"==t.self?n.go("main.productDetailsHardware",{selected_id:t.p_id},{reload:!0}):"bundles"==t.self?n.go("main.productDetailsSolution",{selected_id:t.pb_id},{reload:!0}):"articles"==t.self&&n.go("main.articlePage",{selected_id:t.id},{reload:!0}),o.dismiss("cancel"),s.dismiss("cancel"),u.stop("spinner-login")):(g.warning(e.msg,"Warning"),u.stop("spinner-login")):(_.each(e.response.result,function(e){g.warning(e.msg,"Warning")}),u.stop("spinner-login"))})},e.authenticate=function(e){a.authenticate(e).then(function(s){if(s){var t=s.data;t.success?("facebook"==e?d.trackEvent("Social Login","click","facebook_login",t.result.user.uc_id):"google"==e?d.trackEvent("Social Login","click","google_login",t.result.user.uc_id):"twitter"==e?d.trackEvent("Social Login","click","twitter_login",t.result.user.uc_id):"linkedin"==e&&d.trackEvent("Social Login","click","linkedIn_login",t.result.user.uc_id),r.setUserToken(t.result.token),r.setCurrentUser(t.result.user),d.setUserId(_.toString(t.result.user.uc_id)),g.success("Login successfully with "+e.toUpperCase()+"!"),$timeout(function(){n.go("main.experience")},100)):400===t.statusCode&&!t.response.success&&_.isArray(t.response.result)?_.each(t.response.result,function(e){g.warning(e.msg,"Warning")}):g.error(t.msg,"Error")}})["catch"](function(e){e.message?console.log(e.message):e.data?console.log(e.data.message,e.status):console.log(e)})},_.isNull(c.appuser)){var o=i.open({animation:!0,templateUrl:"./views/login.modal.html",size:"md",backdrop:!0,windowClass:"sharemodal",scope:e});o.result.then(function(){},function(){})}else"products"==t.self?(n.go("main.productDetailsHardware",{selected_id:t.p_id},{reload:!0}),s.dismiss("cancel")):"bundles"==t.self?(n.go("main.productDetailsSolution",{selected_id:t.pb_id},{reload:!0}),s.dismiss("cancel")):"articles"==t.self&&(n.go("main.articlePage",{selected_id:t.id},{reload:!0}),s.dismiss("cancel"))},e.directsolution=function(e){},e.openShareModal=function(){var s=i.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return e.selected},param:function(){return"articles"==e.selected.self?"article":"bundles"==e.selected.self?"bundle":"products"==e.selected.self?"product":void 0}}});s.result.then(function(s){e.selected=s},function(){})}}angular.module("tessaApp").controller("searchDetailControl",e),e.$inject=["$scope","$uibModalInstance","search","$uibModal","$state","$sce","ngDialog","$rootScope","AuthFactory","$auth","usSpinnerService","$frontierAnalytics","toastr"]}();
!function(){"use strict";function e(e,t,a,r,o,i,n,l,c,s,u,p,d,h){function y(e){return o.map(e,function(e){if("location"==e.type){var t=e.label.replace(/[\s]/g,"");return{label:t.toLowerCase(),type:e.type,index:e.sortindex}}if("configuration"==e.type){var a=e.label.replace(/[\s]/g,"");return{label:a.toLowerCase(),type:e.type,index:e.sortindex}}return e})}function m(t,a,r,i){e.index=[];var n=[];return"Hardware"==e.prodTypeLabel?o.isEmpty(r)?t:o.isEmpty(t)?t:a>0?(o.each(r,function(e,a){return n=o.filter(t,function(t){return o.some(t.attributes,function(t){return t.value==e.value})}),r.splice(a,1),!1}),a-=1,m(n,a,r,i)):i:o.isEmpty(r)?t:o.isEmpty(t)&&!o.isEmpty(r)?t:a>0?(o.each(r,function(e,a){var i=o.filter(t,function(t){return t.hardware.some(function(t){return o.some(t.attributes,function(t){return t.value==e.value})})}),l=o.filter(t,function(t){return o.some(t.tags,{tags:e.label})});return o.isEmpty(i)?o.isEmpty(l)||(n=l):n=i,r.splice(a,1),!1}),a-=1,m(n,a,r,i)):i}function f(t,a){console.log("groupkey:",t),console.log("keyValue:",a),o.map(t,function(t,r){r==a?(console.log("DIRI"),e.lam=o.uniqBy(t,function(e){return e.value}),console.log("$scope.lam:",e.lam)):"Orientation"==a&&(e.lam=e.orient)})}e.prodTypeLabel=o.isEmpty(c.get("label"))?"Solution":JSON.parse(c.get("label")),e.solutionTypes=o.isEmpty(c.get("solutiontype"))?"Eze Impress":JSON.parse(c.get("solutiontype")),e.hardwareType=o.isEmpty(c.get("hardtype"))?"Screen":JSON.parse(c.get("hardtype")),e.filterhide=!1,e.datas=[],e.count=0,e.txtSearch="",e.bundles=[],e.productDetails=[],e.seemore=!0,e.solutions=[],e.SolutionCategory=[],e.productscopy=[],e.ezewificopy=[],e.screens=[],e.Screens=[],e.ScreenSize=[],e.media=[],e.MediaPlayer=[],e.Mediacopy=[],e.bundleTags=[],e.searchcopy=[],e.filtercopy=[],e.pageNumber=1,e.limitWithPage=12,e.totalPages=0,e.typeselected=[],e.tagselected=[],e.productsAttributesValue=[],e.showdisplay=!0,e.location=[{_id:8,label:"Indoor",type:"location"},{_id:9,label:"Outdoor",type:"location"},{_id:10,label:"Semi Outdoor",type:"location"}],e.config=[{_id:11,label:"Wall Mounted",type:"configuration"},{_id:12,label:"Floor Mounted",type:"configuration"}],e.usages=[{_id:13,label:"24/7",type:"usages"},{_id:14,label:"16/7",type:"usages"}],e.orient=[{_id:15,value:"Landscape",type:"orientation"},{_id:16,value:"Portrait",type:"orientation"},{_id:17,value:"Custom",type:"orientation"}],e.loadmore=!1,e.showLoadMore=!1,e.dynamicPopover={vesa:"vesa.html",bezel:"bezel.html",usage:"usage.html",weight:"weight.html",mounting:"configuration.html",location:"location.html",dimensions:"dimensions.html",screensize:"screens.html",brightness:"brightness.html",screentype:"screentype.html",resolution:"resolution.html",orientation:"orientation.html",templateUrl7:"wifi.html",templateUrl8:"ram.html",orientation1:"ori.html",templateUrl9:"displaytechno.html",displaytechno:"displaytechno.html",displayinterface:"displayinterface.html",templateUrlStorage:"storage.html",templateUrlGraphics:"graphics.html",templateUrlResolution:"resolutions.html",cablelength:"cablelength.html",framerate:"framerate.html",opticalreso:"opticalreso.html",usbprotocol:"usbprotocol.html",usbspeed:"usbspeed.html"},e.sample={sam:"screens.html"},e.infiniteScrollData={},e.infiniteScrollData.numToAdd=10,e.infiniteScrollData.currentItems=10,e.resetInfScroll=function(){e.infiniteScrollData.currentItems=e.infiniteScrollData.numToAdd},e.addMoreItems=function(){e.loadmore=!0,e.limitWithPage+=12},e.repeatEnd=function(){e.showLoadMore=!0,s(function(){e.$apply(function(){e.loadmore=!1})},2e3)};var g=function(){var a=[];t.getProductBundle(function(t,r){a=o.filter(r.response.result,function(e){if(1==e.is_published&&0==e.is_archived)return e}),h.getItem("Bundles").then(function(t){var r=[];o.isEqual(t.sort(),a.sort());t&&(e.EzeImpress=t,o.each(t,function(e){o.some(e.product_bundle_category,function(e){r.push(e)})}),e.bundlecategory=o.uniqBy(r,function(e){return e.category_label}),e.bundlecategory=o.sortBy(e.bundlecategory,"category_label"),e.productscopy=angular.copy(e.EzeImpress),o.isEmpty(e.solutionTypes)||e.activateTab(e.solutionTypes))})})},b=function(){h.getItem("Products").then(function(t){if(t){var a=[],r=[],i=[];e.displayattrib=[],e.hardwares=t,e.hardwarecopy=angular.copy(e.hardwares),e.hardwarecategory=[],o.each(e.hardwares,function(t){t.product_category.length>0&&e.hardwarecategory.push(t.product_category)}),e.hardwarecategory=o.flattenDeep(e.hardwarecategory),o.each(e.hardwares,function(e){e.attributes.length>0&&i.push(e.attributes)}),e.allattributes=o.flattenDeep(i),e.attributegroup=o.groupBy(e.allattributes,"attribute"),o.each(e.allattributes,function(e){r.push(e.attribute)}),r.unshift("Screen Size","Location","Mounting Option","Usages","Orientation","Brightness","Bezel Size"),r=o.uniqBy(r),console.log("$scope.attributegroup:",e.attributegroup),o.map(e.attributegroup,function(e,t){a.push(t)});o.each(r,function(t,r){o.each(a,function(a){a==t&&(console.log("row:",t),e.displayattrib.push(t))})}),console.log("$scope.displayattrib:",e.displayattrib),e.displayattrib.length>5&&(e.limitnumbers=Math.ceil(e.displayattrib.length/5)),o.isEmpty(e.hardwareType)||e.activeHard(e.hardwareType)}})};e.toggleSelectedType=function(t){var a=t,r=[];if("Hardware"==e.prodTypeLabel)e.tagselected.indexOf(a)==-1?e.tagselected.push(a):e.tagselected=o.filter(e.tagselected,function(e){return e._id!=a._id}),r=y(e.tagselected),!o.isEmpty(e.txtSearch)&&e.searchmedia?e.hardwares=m(e.searchmedia,r.length,r,e.searchmedia):e.hardwares=m(e.copy_hardware,r.length,r,e.copy_hardware),e.filterhardware=angular.copy(e.hardwares);else{var i=[],n=[];if(o.each(e.productscopy,function(e){e.hardware?e.hardware.length>0&&o.each(e.hardware,function(e){i.push(e)}):e.hardware=[]}),o.each(e.copyscreen,function(e){o.isNull(e.attributes)||n.push(e.attributes)}),n=o.flattenDeep(n),e.ezehards=angular.copy(i),e.attrib=angular.copy(n),"Eze Impress"==e.solutionTypes){e.typeselected.indexOf(a)==-1?e.typeselected.push(a):e.typeselected=o.filter(e.typeselected,function(e){return e._id!=a._id}),o.map(e.productscopy,function(t){o.each(t.tags,function(t){o.isEmpty(t.tags)||e.bundleTags.push(t)})});e.typeselected.length;r=y(e.typeselected),o.each(e.EzeImpress,function(e){o.each(e.tags,function(e){e.tags=e.tags.replace(/[\[\](){}?*+\^$\\.|\-|\s]/g,"")})}),!o.isEmpty(e.txtSearch)&&e.searchcopy?e.EzeImpress=m(e.searchcopy,r.length,r,e.searchcopy):e.EzeImpress=m(e.solutionscopy,r.length,r,e.solutionscopy),e.filtercopy=angular.copy(e.EzeImpress)}}},e.refresh=function(){s(function(){b(),g()},200)},e.uncheck=function(t,a){t.checked&&("Hardware"==e.prodTypeLabel?(o.each(e.tagselected,function(e){e._id==t._id&&(e.checked=!1)}),"MediaPlayer"==e.hardwareType?e.toggleSelectedType(t):e.toggleSelectedType(t)):(o.each(e.typeselected,function(e){e._id==t._id&&(e.checked=!1)}),e.toggleSelectedType(t)))},e.searchData=function(){if(l.$broadcast("loading:progress"),"Solution"==e.prodTypeLabel){s(function(){t(),l.$broadcast("loading:finish")},600);var t=function(){o.isEmpty(e.txtSearch)?o.isEmpty(e.filtercopy)?e.EzeImpress=e.solutionscopy:e.EzeImpress=e.filtercopy:(o.isEmpty(e.typeselected)?s(function(){e.EzeImpress=r("filter")(e.solutionscopy,e.txtSearch),u.trackEvent("Category Search","search",e.txtSearch,e.EzeImpress.length)},300):o.isEmpty(e.typeselected)||s(function(){e.EzeImpress=r("filter")(e.filtercopy,e.txtSearch),u.trackEvent("Category Search","search",e.txtSearch,e.EzeImpress.length)},300),e.searchcopy=angular.copy(e.EzeImpress))}}else{s(function(){t(),l.$broadcast("loading:finish")},600);var t=function(){o.isEmpty(e.txtSearch)?o.isEmpty(e.filterhardware)?e.hardwares=e.copy_hardware:e.hardwares=e.filterhardware:o.isEmpty(e.tagselected)?s(function(){e.hardwares=r("filter")(e.copy_hardware,e.txtSearch),e.searchcopyhardware=angular.copy(e.hardwares),u.trackEvent("Category Search","search",e.txtSearch,e.hardwares.length)},300):o.isEmpty(e.tagselected)||s(function(){e.hardwares=r("filter")(e.filterhardware,e.txtSearch),e.searchcopyhardware=angular.copy(e.hardwares),u.trackEvent("Category Search","search",e.txtSearch,e.hardwares.length)},300)}}},e.showmore=function(){"Solution"==e.prodTypeLabel?e.limitnumbers=e.limitnumbers+5:e.limitnumber=e.limitnumber+5,(e.limitnumbers>=e.displayattrib.length||e.limitnumber>=e.hardwaredisplayatt.length)&&(e.showdisplay=!1)},e.showless=function(){var t=angular.copy(e.limitnumbers),a=angular.copy(e.limitnumber);console.log("copy2:",a),"Solution"==e.prodTypeLabel?(e.limitnumbers=Math.ceil(t-5),e.limitnumbers<=5&&(e.showdisplay=!0)):(e.limitnumber=Math.ceil(a-5),e.limitnumber<=5&&(e.showdisplay=!0)),console.log("$scope.limitnumber:",e.limitnumber)},e.clearfilter=function(){"Solution"==e.prodTypeLabel?(o.isEmpty(e.txtSearch)&&o.isEmpty(e.typeselected)||(e.txtSearch="",o.forEach(e.typeselected,function(e){e.checked=!1}),e.typeselected.splice(e.typeselected)),e.EzeImpress=angular.copy(e.solutionscopy),e.filtercopy=[]):o.isEmpty(e.txtSearch)&&o.isEmpty(e.tagselected)||(e.txtSearch="",o.forEach(e.tagselected,function(e){e.checked=!1}),e.tagselected.splice(e.tagselected),e.hardwares=angular.copy(e.copy_hardware),e.filterhardware=[])},e.$on("$stateChangeSuccess",function(t,a,r,o,i){"main.productCatalogue"==a.name&&e.refresh()}),e.activeProd=function(t){console.log("value"),e.limitWithPage=12,e.showdisplay=!0,e.filtercopy=[],e.filterhide=!1,e.count++,e.prodTypeLabel=t,"Hardware"==t?(1==e.count&&(e.hardwares=angular.copy(e.hardwarecopy)),o.isEmpty(e.txtSearch)&&o.isEmpty(e.typeselected)||(e.txtSearch="",o.forEach(e.typeselected,function(e){e.checked=!1}),e.typeselected.splice(e.typeselected),e.EzeImpress=e.solutionscopy),e.txtSearch="",e.seemore=!0,u.trackView("Product Catalogue/",t,"/",e.hardwareType),o.isEmpty(e.hardwareType)||e.activeHard(e.hardwareType)):(e.limitnumbers=Math.ceil(e.displayattrib.length/5),1==e.count?e.refresh():e.count>1&&(e.EzeImpress=angular.copy(e.solutionscopy)),o.isEmpty(e.txtSearch)&&o.isEmpty(e.tagselected)||(e.txtSearch="",o.forEach(e.tagselected,function(e){e.checked=!1}),e.tagselected.splice(e.tagselected),e.hardwares=angular.copy(e.copy_hardware)),o.isEmpty(e.solutionTypes)||e.activateTab(e.solutionTypes),e.txtSearch="",e.seemore=!0,u.trackView("Product Catalogue/",t,"/",e.solutionTypes)),c.set("label",JSON.stringify(e.prodTypeLabel))},e.activateTab=function(t){e.clearfilter(),e.solutionTypes=t,"Eze Wifi"==t?e.filterhide=!1:e.filterhide=!0,e.EzeImpress=o.filter(e.productscopy,function(e){return e.category_label==t}),e.solutionscopy=angular.copy(e.EzeImpress),e.attributegroup=o.groupBy(e.allattributes,"attribute"),o.forEach(e.attributegroup,function(e,t){});o.each(e.attributegroup,function(e,t){var a=o.filter(e,{is_visible:1});o.isEmpty(a)}),e.seemore=!0},e.activeHard=function(t){e.clearfilter(),e.hardwaredisplayatt=[];var a=[];e.filterhide=!0,e.hardwareType=t,e.hardwares=o.filter(e.hardwarecopy,function(e){return o.some(e.product_category,function(e){return e.category_label==t})}),e.copy_hardware=angular.copy(e.hardwares),o.each(e.hardwares,function(e){e.attributes.length>0&&a.push(e.attributes)}),a=o.flattenDeep(a),o.each(a,function(t){e.hardwaredisplayatt.push(t.attribute),"Screen Size"==t.attribute&&e.hardwaredisplayatt.unshift("Screen Size")}),e.hardwaredisplayatt=o.uniqBy(e.hardwaredisplayatt),e.hardwaredisplayatt.length>5&&(e.limitnumber=Math.ceil(e.hardwaredisplayatt.length/5)),console.log("$scope.hardwaredisplayatt.length:",e.hardwaredisplayatt.length),console.log("$scope.limitnumber:",e.limitnumber),e.groupall=o.groupBy(e.allattributes,"attribute")},e.solutionCount=function(e,t){return o.isUndefined(t)?function(t){return o.some(t.hardware,function(t){return t.attributes.some(function(t){return t.value==e})})}:function(t){return o.some(t.hardware,function(t){return t.attributes.some(function(t){return r("filter")(t.value,e)})})}},e.hardwareCount=function(e,t){return o.isUndefined(t)?function(t){return o.some(t.attributes,function(t){return t.value==e})}:function(t){return o.some(t.hardware,function(t){return t.attributes.some(function(t){return r("filter")(t.value,e)})})}},e.filterValues=function(t){"Solution"==e.prodTypeLabel?f(e.attributegroup,t):f(e.groupall,t)},e.solutionsEzeImpress=function(e){u.trackEvent("Productcatalogue","click","Solution",o.toString(e.pb_id))},e.solutionsEzeWifi=function(e){u.trackEvent("Productcatalogue","click","Solution",o.toString(e.pb_id))},e.hardwareScreens=function(e){u.trackEvent("Productcatalogue","click","Hardware",o.toString(e.p_id))},e.hardwareMediaplayer=function(e){u.trackEvent("Productcatalogue","click","Hardware",o.toString(e.p_id))},e.togglemodal=function(e){var t=i.open({animation:!0,templateUrl:"./views/share.modal.html",controller:"articleCtrl",size:"sm",resolve:{article:function(){return e}}});t.result.then(function(){n.reload()},function(){console.info("Modal dismissed")})}}angular.module("tessaApp").controller("productCtrl",e),e.$inject=["$scope","APIFactory","$location","$filter","_","$uibModal","$state","$rootScope","localStorageService","$timeout","$frontierAnalytics","$templateCache","serviceTest","$localForage"]}();
!function(){"use strict";function e(e,t,r,o,a,s,c,i,d,l,u,n,p){e.slides=[],e.allproduct=[],e.hardware_category=[],e.service_category=[],e.hardwarecategories=[],e.servicecategories=[],e.service=[],e.hardwares=[],e.softwares=[],e.relatedProductHardware=[],e.relatedProductSoftware=[],e.alltags=[],e.cproducts=[],e.cproducts.titles=[],e.cproducts.images=[],e.cproducts.softwares=[],e.cproducts.hardwares=[],e.cproducts.ids=[],e.cproducts.supports=[],e.cproducts.prices=[],o.selected_id&&async.waterfall([function(r){t.getProduct(function(t,o){200==o.statusCode&&o.response.success&&(e.allproduct=o.response.result,r(null,o.response.result))})},function(r,o){t.getCategory(function(t,a){200==a.statusCode&&a.response.success&&(e.allcategory=a.response.result,o(null,r,a.response.result))})},function(e,r,a){t.getBundleTag(o.selected_id,function(t){200==t.statusCode&&t.response.success&&a(null,e,r,t.response.result)})},function(r,i,d,u){var d=d;t.getDetailSolution(o.selected_id,function(t,o){if(200==o.statusCode&&o.response.success){var n=0;e.details=o.response.result,(e.details.product_images.length>0||e.details.product_bundle_category.length>0)&&(s.each(e.details.product_images,function(t){e.slides.push({image:t.image_path,index:n}),n++}),e.details.category_id=e.details.product_bundle_category[0].category_id,e.details.category_label=e.details.product_bundle_category[0].category_label),c.compareproducts.length>0&&s.each(c.compareproducts,function(t){t.pb_id==e.details.pb_id&&(c.compareIs=!1)}),e.products=e.details.products,s.isNull(e.products)&&(e.details.upfront=0),s.map(e.products,function(e){e.product_detail&&(e.productType_id=e.product_detail.productType_id,e.product_category=e.product_detail.product_category,e.sell_price=e.product_detail.sell_price,e.category_id=e.product_detail.product_category[0].category_id,e.item_name=e.product_detail.item_name,e.category_label=e.product_detail.product_category[0].category_label)}),e.services=a("filter")(e.products,{productType_id:20}),e.hardware=a("filter")(e.products,{productType_id:17});var f=a("filter")(e.products,{productType_id:18});if(e.softwarePrice=s.map(f,function(e){return e.sell_price*e.quantity}),s.isNull(f)||(s.map(f,function(t){void 0!=t.product_category[0]&&e.softwares.push(t.product_category[0])}),s.each(f,function(t){s.each(e.softwares,function(e){t.product_id==e.product_id&&(t.category_label=e.category_label)})})),s.isNull(e.hardware)||(s.map(e.hardware,function(t){void 0!=t.product_category[0]&&e.hardwares.push(t.product_category[0])}),s.each(e.hardware,function(t){s.find(e.hardwares,function(e){t.p_id==e.product_id&&(t.category_label=e.category_label)})})),!s.isNull(e.services)){s.map(e.services,function(t){void 0!==t.product_category[0]&&e.service.push(t.product_category[0])}),s.each(e.services,function(t){s.find(e.service,function(e){t.p_id==e.product_id&&(t.category_id=e.category_id)})});var _=a("filter")(e.services,{category_id:87}),g=a("filter")(e.services,{category_id:90});e.hardwarePrice=s.map(e.hardware,function(e){return e.sell_price*e.quantity}),e.deploymentPrice=s.map(_,function(e){return e.sell_price*e.quantity}),e.upfront=s.sum(e.deploymentPrice)+s.sum(e.hardwarePrice)+s.sum(e.softwarePrice),e.weekly=31.111*e.upfront/1e3*12/52,e.supportPrice=s.map(g,function(e){return e.sell_price*e.quantity});var y=s.filter(e.hardware,function(e){return e.product_category.length>=1});p(function(){e.$apply(function(){e.hardwareCategory=y,e.deployment=_,e.support=g})},100),e.spPrice=s.sum(e.supportPrice),e.details.software=f,e.details.hardware=y,e.details.support=g,e.details.upfront=e.upfront,e.details.weekly=e.weekly,e.details.tags=d,e.details.spPrice=e.spPrice,u(null,r,i,e.details)}p(function(){e.$apply(function(){e.software=f})},100)}else l.error(o.response.msg,"Error")})},function(r,a,c,i){t.getRelatedSolutions(o.selected_id,function(t,o){if(200==o.statusCode&&o.response.success){var d=o.response.result;i(null,r,a,c,o.response.result),s.each(d,function(t){"Hardware"==t.ref_product.product_type&&e.relatedProductHardware.push(t),"Software"==t.ref_product.product_type&&e.relatedProductSoftware.push(t)})}else l.error(o.response.msg,"Error")})},function(r,o,a,s,c){a.software&&async.each(a.software,function(e,r){t.getProductAttribute(e.product_id,function(t,o){o?200==o.statusCode&&o.response.success&&(e.attribute=o.response.result,o.response.result.attribute_values.length>0?e.comparable=1:e.comparable=0,r()):r()})},function(t){e.details=a,c(null,r,o,a,s,e.details,c)})},function(r,o,a,c,i,d){i.hardware&&async.each(a.hardware,function(e,r){t.getProductAttribute(e.product_id,function(t,o){if(o){if(200==o.statusCode&&o.response.success){e.attribute=o.response.result;var a=s.filter(o.response.result.attribute_values,{is_comparable:1});a.length>0?e.comparable=1:e.comparable=0,r()}}else r()})},function(t){var r=[],o=[];e.details=i,r.push(e.details.software),r.push(e.details.hardware),r=s.flattenDeep(r),o=s.find(r,{comparable:1}),s.isEmpty(o)&&s.isUndefined(o)?e.details.iscomparable=0:e.details.is_comparable=1,console.log("$scope.details;",e.details)})}]),e.openProductModal=function(t){var r=i.open({animation:!0,templateUrl:"./views/productCatalogue.modal.html",size:"md",controller:"detailControl",windowClass:"xd-modal",backdropClass:"modal-backdrop fade in",resolve:{product:function(){return t}}});r.result.then(function(t){e.selected=t})},e.next=function(){},e.openShareModal=function(){if(o.selected_id){var t=i.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return{bundle_name:e.details.bundle_name,product_images:e.details.product_images,bundle_description:e.details.bundle_description,products:e.details.products,upfront:e.upfront.toFixed(2),spPrice:e.spPrice.toFixed(2),opex:(36*e.upfront/1e3).toFixed(2),weekly:e.weekly.toFixed(2)}},param:function(){return"bundle"}}});t.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})}}}function t(e,t,r){e.selected=r,e.cancel=function(){t.dismiss("cancel")}}angular.module("tessaApp").controller("detailSolutionCtrl",e).controller("detailControl",t),e.$inject=["$scope","APIFactory","$location","$stateParams","$filter","_","$rootScope","$uibModal","localStorageService","toastr","$state","$frontierAnalytics","$timeout"],t.$inject=["$scope","$uibModalInstance","product"]}();
!function(){"use strict";function e(e,t,s,r,o,a,i,u,c,l,n,d){e.attributevalues=[],e.SolutionPack=[],e.products=[],e.slides=[],e.relatedProductHardware=[],e.relatedProductSoftware=[],u.compareIs=!0,e.details={},r.selected_id&&(async.waterfall([function(s){t.getProductDetail(r.selected_id,function(t,r){if(200==r.statusCode&&r.response.success){e.productDetails=r.response.result,e.productDetails.category_id=e.productDetails.product_category[0].category_id,u.compareproducts.length>0&&a.each(u.compareproducts,function(t){t.p_id==e.productDetails.p_id&&(u.compareIs=!1)});var o=0;e.productDetails.product_images.length>0?a.each(e.productDetails.product_images,function(t){e.slides.push({image:t.image_path,index:o}),o++}):(e.slides.push({image:e.productDetails.img_default,index:o}),o++),80==e.productDetails.category_id?e.productDetails.type="Screens":83==e.productDetails.category_id&&(e.productDetails.type="Media Player"),s(null,e.productDetails)}})},function(s,o){t.getProductAttribute(r.selected_id,function(t,r){if(200==r.statusCode&&r.response.success){o(null,s,r.response.result),e.is_comparable=a.filter(r.response.result.attribute_values,{is_comparable:1}),e.attributes=r.response.result,e.attributevalues=e.attributes.attribute_values,s.attributes=e.attributes.attribute_values,console.log("$scope.attributevalues:",e.attributevalues);e.attributes.attribute_values}})},function(s,o,i){e.details=s,t.getProductBundle(function(t,c){200==c.statusCode&&c.response.success&&(i(null,s,o,c.response.result),a.each(c.response.result,function(t){a.each(t.products,function(s){s.product_id==r.selected_id&&(e.productDetails.solution=t,e.SolutionPack.push(t),u.solutions=angular.copy(e.SolutionPack))})}))})},function(s,o,a,i){t.getProdCateg(r.selected_id,function(t,r){200==r.statusCode&&r.response.success&&(e.category=r.response.result,i(null,s,o,a,r.response.result))})}]),async.waterfall([function(s){t.getProduct(function(t,r){200==r.statusCode&&r.response.success&&(e.products=r.response.result,s(null,r.response.result))})},function(s,o){t.getRelatedProduct(r.selected_id,function(t,r){if(200==r.statusCode&&r.response.success){var o=r.response.result;a.each(o,function(t){a.each(s,function(e){e.p_id==t.main_id&&(t.img_default=e.img_default)}),"Hardware"==t.ref_product.product_type&&e.relatedProductHardware.push(t),"Software"==t.ref_product.product_type&&e.relatedProductSoftware.push(t)})}else l.error(r.response.msg,"Error")})}])),e.openDetail=function(e){n.go("main.productDetailsHardware",{selected_id:e},{reload:!0})},e.openShareModal=function(){if(r.selected_id){var t=i.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return{item_name:e.productDetails.item_name,img_default:e.productDetails.img_default,item_description:e.productDetails.item_description,item_id:e.productDetails.p_id,product_type:e.productDetails.product_type,sell_price:e.productDetails.sell_price.toFixed(2)}},param:function(){return"product"}}});t.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})}}}function t(e,t,s){e.selected=s,e.cancel=function(){t.dismiss("cancel")}}angular.module("tessaApp").controller("hardwareDetailsCtrl",e).controller("hardwareCtrl",t),e.$inject=["$scope","APIFactory","$location","$stateParams","$filter","_","$uibModal","$rootScope","localStorageService","toastr","$state","$frontierAnalytics"],t.$inject=["$scope","$uibModalInstance","product"]}();
!function(){"use strict";function e(e,t,i,s,a,n,l,o,r,u,c,d,m,p,g,f){e.detail=[],e.bundles=[],e.slides=[],e.relatedExperience=[],e.$on("$stateChangeStart",function(e,t,i,s,a){console.log("toState.name:",t.name),console.log("toState.name:",t)}),r.selected_id&&async.waterfall([function(e){o.getArticles({},function(t,i){200==i.statusCode&&i.response.result&&e(null,i.response.result)})},function(t,i){o.getArticleDetail(r.selected_id,function(s,a){if(200==a.statusCode&&a.response.success){e.detail=a.response.result;var n=0;i(null,t,a.response.result),_.isEmpty(e.detail.mediafiles)||(_.each(e.detail.mediafiles,function(e){if(e){if("video/mp4"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-flv"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-msvideo"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-ms-wmv"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/quicktime"==e.media_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"}return e.index=n++}),_.each(e.detail.mediafiles,function(t){"image/png"==t.media_mimetype||"image/jpeg"==t.media_mimetype?(e.slides.push({media_name:t.media_name,media_mimetype:t.media_mimetype,image:t.media_path,index:n}),n++):"video/mp4"==t.media_mimetype&&(e.slides.push({media_name:t.media_name,media_mimetype:t.media_mimetype,image:t.media_path,url:t.url,index:n}),n++)}))}})},function(t,i,s){o.getArticleTags(i.article_id,function(e,a){if(200==a.statusCode&&a.response.success){var n=[];_.map(a.response.result,function(e){"Article"!=e.tags&&"Portfolio"!=e.tags&&n.push(e)}),s(null,t,i,n)}}),o.getProductBundle(function(t,s){if(200==s.statusCode&&s.response.success){var a=s.response.result;i.article_features.length>0?_.each(i.article_features,function(t){var i=_.find(a,{pb_id:t.bundle_id});e.bundles.push(i)}):e.norelated="No related solutions"}})},function(t,i,s,a){var n=[],l=_.flattenDeep(_.map(t,function(e){return e.tags}));if(_.map(s,function(e){_.each(l,function(t){e.tags==t.tags&&n.push(t)})}),n&&n.length>0&&_.each(t,function(t){_.each(n,function(i){t.article_id==i.article_id&&e.relatedExperience.push(t)})}),!_.isEmpty(e.relatedExperience)){var o=_.uniq(e.relatedExperience);e.relatedExperiences=_.filter(o,function(e){return i.article_id!=e.article_id}),_.each(e.relatedExperiences,function(e){if(e.mediafiles.length>0&&(e.image=e.mediafiles[0].media_path),!_.isNull(e.thumbnail_media)){var t=e.article_thumbnail;if(t){if("video/mp4"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-flv"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-msvideo"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-ms-wmv"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/quicktime"==t.media_mimetype)return e.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})}}]),e.directsolution=function(i){d.openConfirm({templateUrl:"views/requiredlog.dialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){_.isNull(c.appuser)?e.openModal():t.go("main.productDetailsSolution",{selected_id:i.pb_id},{reload:!0})},function(e){console.log("Modal promise close: ")})},e.openModals=function(i){if(e.user={},e.login=function(){g.spin("spinner-login"),m.authenticateAccount(e.user).then(function(e){400!=e.statusCode||e.response.success?e.success?(f.trackEvent("Login","click","login",e.result.user.uc_id),m.setCurrentUser(e.result.user),m.setUserToken(e.result.token),f.setUserId(_.toString(e.result.user.uc_id)),s.success(e.msg),t.go("main.productDetailsSolution",{selected_id:i.pb_id},{reload:!0}),g.stop("spinner-login")):(s.warning(e.msg,"Warning"),g.stop("spinner-login")):(_.each(e.response.result,function(e){s.warning(e.msg,"Warning")}),g.stop("spinner-login"))})},_.isNull(c.appuser)){var a=u.open({animation:!0,templateUrl:"./views/login.modal.html",size:"md",backdrop:!0,windowClass:"sharemodal",scope:e});a.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})}else t.go("main.productDetailsSolution",{selected_id:i.pb_id},{reload:!0})},e.openShareModal=function(){var t=u.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",backdrop:!0,windowClass:"sharemodal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return e.detail},param:function(){return"article"}}});t.result.then(function(){},function(){})},e.select=function(e){l.hash("article_page"),t.go("main.articlePage",{selected_id:e},{reload:!0})},e.authenticate=function(e){p.authenticate(e).then(function(i){if(i){var a=i.data;a.success?("facebook"==e?f.trackEvent("Social Login","click","facebook_login",a.result.user.uc_id):"google"==e?f.trackEvent("Social Login","click","google_login",a.result.user.uc_id):"twitter"==e?f.trackEvent("Social Login","click","twitter_login",a.result.user.uc_id):"linkedin"==e&&f.trackEvent("Social Login","click","linkedIn_login",a.result.user.uc_id),m.setUserToken(a.result.token),m.setCurrentUser(a.result.user),f.setUserId(_.toString(a.result.user.uc_id)),s.success("Login successfully with "+e.toUpperCase()+"!"),$timeout(function(){t.go("main.experience")},100)):400===a.statusCode&&!a.response.success&&_.isArray(a.response.result)?_.each(a.response.result,function(e){s.warning(e.msg,"Warning")}):s.error(a.msg,"Error")}})["catch"](function(e){e.message?console.log(e.message):e.data?console.log(e.data.message,e.status):console.log(e)})}}angular.module("tessaApp").controller("ModalInstanceCtrl",e),e.$inject=["$scope","$state","sharerFactory","toastr","$window","$anchorScroll","$location","APIFactory","$stateParams","$uibModal","$rootScope","ngDialog","AuthFactory","$auth","usSpinnerService","$frontierAnalytics"]}();
!function(){"use strict";function e(e,t,s,c,a,d,i,o,r,l){console.info("article:",s),e.data={},e.data.from="support@tessa.cc",e.date=new Date,e.param=c,e.selected={},e.newtab=function(e){r.open(e)},"article"==c?(e.selected.title=s.title,e.selected.article_id=s.article_id,s.mediafiles&&s.mediafiles.length>0?(e.selected.media_mimetype=s.mediafiles[0].media_mimetype,e.selected.mediafiles=encodeURI(s.mediafiles[0].media_path)):e.selected.mediafiles="",e.selected.description=s.description):"bundle"==c?(e.selected.bundle_name=s.bundle_name,s.product_images&&s.product_images.length>0?e.selected.product_images=encodeURI(s.product_images[0].image_path):e.selected.product_images="",e.selected.bundle_description=s.bundle_description,e.selected.products=s.products,e.selected.others={upfront:s.upfront,spPrice:s.spPrice,opex:s.opex,weekly:s.weekly}):"product"==c?(e.selected.item_name=s.item_name,e.selected.img_default=encodeURI(s.img_default),e.selected.item_description=s.item_description,e.selected.sell_price=s.sell_price,e.selected.product_id=s.item_id,e.selected.product_type=s.product_type):"quote"==c?e.selected=s:"compare"==c&&(e.selected=s,"product"==s.compare_type?_.each(s.comparelist,function(e){e.image=encodeURI(e.image)}):"bundle"==s.compare_type&&_.each(s.comparelist,function(e){_.each(e.titles.image,function(e){e=encodeURI(e)})})),e.spprice=_.sum(_.map(e.selected.quote_item_list,function(e){return e.spprices*e.quantity})),e.subtotal=_.sum(_.map(e.selected.quote_item_list,function(e){var t=e.price*e.quantity;return t})),e.subtotalOpex=_.sum(_.map(e.selected.quote_item_list,function(e){_.isUndefined(e.spprices)&&(e.spprices=0);var t=(31.111*e.price/1e3+e.spprices)*e.quantity;return t})),e.send=function(){console.log("$scope.selected",e.selected),"article"==c?(console.log("article"),l.trackEvent("experience","share",e.selected.title,_.toString(e.selected.article_id)),e.data.subject="ENGAGIS-TESSA Articles",e.data.message=$("#printarticle").html()):"bundle"==c?(console.log("bundle"),l.trackEvent("solution","share",e.selected.product_type,_.toString(e.selected.product_id)),e.data.subject="ENGAGIS-TESSA Bundle",e.data.message=$("#printbundle").html()):"product"==c?(console.log("product"),l.trackEvent("product","share",e.selected.product_type,_.toString(e.selected.product_id)),e.data.subject="ENGAGIS-TESSA Product",e.data.message=$("#printproduct").html()):"compare"==c?(console.log("compare"),l.trackEvent("compare","share",e.selected.product_type,_.toString(e.selected.product_id)),e.data.subject="ENGAGIS-TESSA Compare",e.data.message=$("#printcompare").html()):"quote"==c&&(console.log("quote"),l.trackEvent("quote","share",e.selected.product_type,_.toString(e.selected.product_id)),e.data.subject="ENGAGIS-TESSA Quotes",e.data.message=$("#printquote").html(),e.data.pdf=$("#printpdfquote").html(),e.data._id=e.selected._id),console.log("$scope.data:",e.data),a.shareExperience(e.data,function(s,c){return 200==c.statusCode&&c.response.success?(d.success(c.response.msg,"Success"),e.data.email="",t.dismiss("cancel"),i.go(i.current,null,{reload:!0}),void 0):400===c.statusCode&&!c.response.success&&_.isArray(c.response.result)?void _.each(c.response.result,function(e){d.warning(e.msg,"Warning")}):void d.error(c.response.msg,"Error")}),t.dismiss("send")},e.cancel=function(){t.dismiss("cancel")}}angular.module("tessaApp").controller("ShareModalInstanceCtrl",e),e.$inject=["$scope","$uibModalInstance","article","param","sharerFactory","toastr","$state","localStorageService","$window","$frontierAnalytics"]}();
!function(){"use strict";function t(t,e,n,o,i,a,c,s,p,r){function l(t){_.each(i.cartItems,function(e){e.pb_id==t.pb_id&&e.p_id==t.p_id&&(e.quantity=t.quantity)}),a.set("Cart",JSON.stringify(i.cartItems))}t.details=[],t.quantity=1,t.customers=[],t.companies=[],t.company={},t.countries=[],t.cart="items",t.radioModel,t.detail={},t.detail.quote_date=new Date,r.getItem("Cart").then(function(e){if(i.cartItems=e,!_.isEmpty(i.cartItems)){t.details=i.cartItems;var n=_.map(t.details,function(t){return t.spPrice});t.spprice=_.sum(n),_.map(t.details,function(t){t.p_id&&(t.spPrice=0)}),a.set("Products",JSON.stringify(t.details)),async.waterfall([function(e){c.getCountries(function(n,o){200==o.statusCode&&o.response.success&&(t.countries=o.response.result,e(null,o.response.result))})},function(e,n){c.getAllPerson(function(o,i){t.customers=_.filter(i.response.result,function(t){return"Customer"==t.person_type}),n(null,e,i.response.result)})},function(e,n,o){c.getCompany(function(e,n){t.companies=n.response.result})}])}}),t.getCompanyDetail=function(e){e&&e.originalObject.company_id?c.companyDetail(e.description.company_id,function(e,n){200==n.statusCode&&n.response.success&&(t.company=n.response.result,t.companycopy=angular.copy(n.response.result))}):t.company.name=e.originalObject,console.log("$scope.company;",t.company)},t.changed=function(e){t.val=e},t.enterValue=function(e){t.company.name=e},t.getCustomer=function(e){e.originalObject.person_id?(t.company.customer_id=e.originalObject.person_id,t.company.customer=e.originalObject):t.company.customer=e.originalObject},t.useBillingAddress=function(e){e?t.company&&(t.company.ship_name=t.company.bill_name,t.company.ship_address=t.company.bill_address,t.company.ship_city=t.company.bill_city,t.company.ship_state=t.company.bill_state,t.company.ship_zipcode=t.company.bill_zipcode,t.company.ship_country=t.company.bill_country):_.isUndefined(t.companycopy)?(t.company.ship_name="",t.company.ship_address="",t.company.ship_city="",t.company.ship_state="",t.company.ship_zipcode="",t.company.ship_country=""):(t.company.ship_name=t.companycopy.ship_name,t.company.ship_address=t.companycopy.ship_address,t.company.ship_city=t.companycopy.ship_city,t.company.ship_state=t.companycopy.ship_state,t.company.ship_zipcode=t.companycopy.ship_zipcode,t.company.ship_country=t.companycopy.ship_country)},t.proceed=function(){t.cart="payment"},t.back=function(){t.cart="items"},t.next=function(){t.cart="customer"},t.monthly=function(){return t.spprice=_.sum(_.map(t.details,function(t){return t.spPrice*t.quantity})),t.spprice},t.total=function(){return t.totals=0,_.forEach(t.details,function(e){t.totals+=e.upfront*e.quantity}),t.totals},t.detail.sub_total=t.total(),t.minusbutton=function(t){t.quantity<=1?(t.quantity=1,l(t)):(t.quantity--,l(t))},t.addbutton=function(t){t.quantity++,l(t)},t.reset=function(){_.each(i.cartItems,function(t){return i.cartItems.splice(i.cartItems,1)}),r.setItem("Cart",i.cartItems)},t.remove=function(t){var e=_.findIndex(i.cartItems,function(e){return e._id==t._id});i.cartItems.splice(e,1),r.setItem("Cart",i.cartItems)},t.cancel=function(){e.dismiss("cancel")},t.confirmation=function(){t.modal={title:"Archive Product?",message:"Are you sure to archive this selected products?"},s.openConfirm({templateUrl:"views/dialog.html",scope:t,className:"ngdialog-theme-default"}).then(function(){var s=JSON.parse(a.get("appuser")),p=new Date;t.detail.quoteproduct_list=[],_.each(i.cartItems,function(e){e.p_id?t.detail.quoteproduct_list.push({item_name:e.item_name,quantity:e.quantity,price:e.upfront,product_id:e.p_id,bundle_id:null,discount:0,total:0}):e.pb_id&&t.detail.quoteproduct_list.push({item_name:e.bundle_name,quantity:e.quantity,price:e.upfront,product_id:null,bundle_id:e.pb_id,discount:0,total:0})}),async.waterfall([function(e){c.getAllQuotes(function(n,o){if(200==o.statusCode&&o.response.success){var i=1e4;_.each(o.response.result,function(t){t.quote_number==i&&i++}),t.detail.quote_number=_.toString(i),t.detail.quote_status="P",t.detail.staff_id=s.uc_id,t.detail.customer=t.company.customer,t.detail.other_fee=0,t.detail.tax=0,t.detail.tax=0,t.detail.total_fee=110,t.detail.valid_until=new Date,t.detail.valid_until=new Date(p.setDate(p.getDate()+30)),t.detail.bill_to_address=t.company.bill_address,t.detail.bill_to_city=t.company.bill_city,t.detail.bill_to_country=t.company.bill_country,t.detail.bill_to_state=t.company.bill_state,t.detail.bill_to_zipcode=t.company.bill_zipcode,t.detail.comments=t.company.comments,t.detail.customer_id=t.company.customer_id,t.detail.ship_to_address=t.company.ship_address,t.detail.ship_to_city=t.company.ship_city,t.detail.ship_to_country=t.company.ship_country,t.detail.ship_to_state=t.company.ship_state,t.detail.ship_to_zipcode=t.company.ship_zipcode,t.detail.ship_to=t.company.customer_id,t.detail.bill_to_name=t.company.bill_name,t.detail.ship_to_name=t.company.ship_name,e(null,t.detail)}})},function(s,p){c.saveQuote(s,function(c,s){200==s.statusCode&&s.response.success&&(_.isEmpty(i.cartItems)||r.removeItem("Cart"),e.close(),o(function(){n.go("main.quoteProfile",{quote_id:s.response.result},{reload:!0}),a.set("Company",JSON.stringify(t.company)),a.remove("Customer"),a.remove("Payment"),r.removeItem("Cart")},300))})}])},function(t){console.log("Modal promise close: ")})}}angular.module("tessaApp").controller("CartCtrl",t),t.$inject=["$scope","$uibModalInstance","$state","$timeout","$rootScope","localStorageService","APIFactory","ngDialog","$frontierAnalytics","$localForage"]}();
!function(){"use strict";function e(e,t,o,s,i,n,a,r,u,c,d){i.user=_.isEmpty(n.get("User"))?[]:JSON.parse(n.get("User")),e.products=_.isEmpty(n.get("Products"))?[]:JSON.parse(n.get("Products")),e.company=_.isEmpty(n.get("Company"))?[]:JSON.parse(n.get("Company")),e.companyname=i.user.company_name,console.log("$scope.companyname:",e.company),e.details={},e.radioModel="Capex",d.trackEvent("Generate quote","generate","generate quotes",_.toString(u.quote_id)),u.quote_id&&r.getQuoteDetail(u.quote_id,function(t,o){200==o.statusCode&&o.response.success&&(e.details=o.response.result,e.details.type=e.radioModel,_.isUndefined(e.details.customer)&&(e.details.company_name=e.company.name),e.details.customer=e.details.bill_qoute_info,e.details.date_created=moment(e.details.date_created).format("YYYY-MM-DD"),e.details.valid_until=moment(e.details.valid_until).format("YYYY-MM-DD"),console.log("$scope.details;",e.details),r.getProductBundle(function(t,o){e.result=[],200==o.statusCode&o.response.success&&(_.each(e.details.quote_item_list,function(e){_.find(o.response.result,function(t){e.bundle_id==t.pb_id&&(_.each(t.products,function(e){e.category_id=e.product_detail.product_category[0].category_id,e.sell_price=e.product_detail.sell_price}),e.products=t.products)})}),e.items=_.map(e.details.quote_item_list,function(t){return t.products&&_.each(t.products,function(t){e.result.push(t)}),_.each(e.products,function(e){t.bundle_id==e.pb_id&&(t.spprices=e.spPrice)}),t.product_id?t:t}),e.totalupfront=_.sum(_.map(e.items,function(e){return e.price*e.quantity})),e.totalupfrontopex=_.sum(_.map(e.items,function(e){return e.price})),e.opexquantity=_.sum(_.map(e.items,function(e){return e.quantity})),e.subtotalOpex=_.sum(_.map(e.items,function(e){_.isUndefined(e.spprices)&&(e.spprices=0);var t=(31.111*e.price/1e3+e.spprices)*e.quantity;return t})),e.spprice=_.sum(_.map(e.items,function(e){return e.spprices*e.quantity})))}))}),e.$watch("radioModel",function(e){}),e.newvalue=function(){e.details.type=e.radioModel},e.printQoute=function(e){s.print()},e.openShareModal=function(){console.log("$scope.details:",e.details),a.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return e.details},param:function(){return"quote"}}})}}angular.module("tessaApp").controller("QuoteCtrl",e),e.$inject=["$scope","sharerFactory","toastr","$window","$rootScope","localStorageService","$uibModal","APIFactory","$stateParams","$filter","$frontierAnalytics"]}();
!function(){"use strict";function e(e,a,t,n,o,l,r,s,c,u,i,d,m){e.seemore=!0,console.log("$state:",u),e.date=new Date,e.msg="hello",e.shows=!1,e.value="",l.user=n.isEmpty(c.get("User"))?[]:JSON.parse(c.get("User")),m.getItem("Cart").then(function(e){n.isNull(e)?l.cartItems=[]:l.cartItems=e}),e.seemore=!e.custom,m.getItem("allData").then(function(a){e.allproducts=a}),n.isEmpty(u.value)||(e.searchinput=u.value),e.signout=function(){i.logout().then(function(e){200==e.statusCode&&e.response.success&&(d.success(e.response.msg,"Success"),o.go("main.experience",null,{reload:!0}))})},e.clear=function(e){e?$("#searchBar").val($("#searchBar").val().slice(0,-1)):$("#searchBar").val("")},e.resetCart=function(){for(var a=e.customers.length;a--;){var t=e.customers[a];"expired"==t.status&&e.customers.splice(a,1)}},e.refreshDelay=function(t){e.search=t,e.allSearch=[],angular.isUndefined(t)||null==t||""==t?e.allSearch=[]:a.getAll(t).then(function(a){if(200==a.statusCode&&a.response.success){n.each(a.response.result.values,function(a){return"Services"==a.type?null:void e.allSearch.push(a)}),n.each(e.allSearch,function(e){"articles"==e.self&&(e.group="Experience"),"bundles"==e.self&&(e.group="Solutions"),"products"==e.self&&(e.group="Hardware")});var o=e.allSearch.slice();return t&&o.indexOf(t)===-1&&o.unshift(t),o}})},e.cartModal=function(){var a=s.open({animation:!0,templateUrl:"./views/cart.modal.html",size:"md",controller:"CartCtrl",windowClass:"xd-modal"});a.result.then(function(a){e.selected=a},function(){c.remove("Payment")})},e.openLoginModal=function(){s.open({animation:!0,templateUrl:"./views/login.modal.html",size:"xs",windowClass:"xd-modal",backdropClass:"modal-backdrop fade in"})},e.inputProductChanged=function(a){e.searchinput=a},e.sample=function(e){o.go("main.search",{value:e},{reload:!0}),document.activeElement.blur()},e.keysearch=function(){o.go("main.search",{value:e.searchinput},{reload:!0})},e.dataSelected=function(e){e&&(o.go("main.search",{value:e.originalObject},{reload:!0}),e.originalObject&&o.go("main.search",{value:e.originalObject},{reload:!0}),e.title&&o.go("main.search",{value:e.title},{reload:!0}))},e.clearInput=function(a){a?e.$broadcast("angucomplete-alt:clearInput",a):e.$broadcast("angucomplete-alt:clearInput")},e.$on("$destroy",function(a){a&&(e.searchinput="")})}angular.module("tessaApp").controller("headerCtrl",e),e.$inject=["$scope","APIFactory","$location","_","$state","$rootScope","$filter","$uibModal","localStorageService","$stateParams","AuthFactory","toastr","$localForage"]}();
!function(){"use strict";function e(e,t,o,r,a,i){e.product=function(e){"Experience"==e?(a.trackView("Experience"),r.remove("articlefilter"),o.go("main.experience")):"Product"==e?(1==i.isHide&&i.toggleShow(),a.trackView("Product Catalogue"),r.remove("label"),r.remove("hardtype"),r.remove("solutiontype"),o.go("main.productCatalogue")):"Presentation"==e?(a.trackView("Presentation assets"),o.go("main.presentation")):"Gallery"==e?(a.trackView("Presentation galleries"),o.go("main.assetGallery")):"Compare"==e&&(a.trackView("Compare products"),o.go("main.compareProducts"))}}angular.module("tessaApp").controller("sidebarCtrl",e),e.$inject=["$scope","$location","$state","localStorageService","$frontierAnalytics","$rootScope"]}();
!function(){"use strict";function t(t,e,i,a,l,r,s,c,n,o,u,g,d,f,m){e.refresh=function(){f.gallery.refresh()},e.angularGridoptions={cssGrid:!0,refreshOnImgLoad:!1,gridWidth:350,gutterSize:20},e.seemore=!0,e.date=new Date,s.user=l.isEmpty(o.get("User"))?[]:JSON.parse(o.get("User")),e.expFilter=l.isEmpty(o.get("articlefilter"))?"all":JSON.parse(o.get("articlefilter")),e.selectedItem=[],e.articlesList=[],e.lists=[],e.tags=[],e.tagscopy=[],e.Portfolio=[],e.Article=[],e.selectedTag=[],e.tagselected=[],e.pageNumber=1,e.limitWithPage=12,e.totalPages=0,e.dynamicPopover={templateUrl:"myPopoverTemplate.html",backdrop:"static",keyboard:!1},e.pdf={file:null,thumbnail:""},e.loadmore=!1,e.showLoadMore=!1,e.addMoreItems=function(){e.loadmore=!0,e.limitWithPage+=12},e.repeatEnd=function(){e.showLoadMore=!0,u(function(){e.$apply(function(){e.loadmore=!1})},2e3)},e.generateArticles=function(){e.tags=[],e.tagscopy=[];var t=[];e.lists=[],e.selectedTag=[],i.getArticles({},function(i,a){t=l.filter(a.response.result,function(t){return 1==t.is_active}),m.getItem("Articles").then(function(i){if(t.length>i.length){var a=l.pullAll(t,i);a.length>0&&(l.each(a,function(t){t.type="Experience",t.name=t.title,t.id=t.article_id}),i=l.union(a,i),m.setItem("Articles",i))}if(i){l.each(i,function(t){t.tags.length>=1&&1==t.is_active&&e.articlesList.push(t)}),l.each(e.articlesList,function(t){e.tags.push(t.tags)}),e.tagss=l.flattenDeep(e.tags),e.tags=l.uniqBy(e.tagss,function(t){return t.tags}),l.each(e.articlesList,function(t){if(t.mediafiles.length>0&&(t.image=t.mediafiles[0].media_path),!l.isNull(t.thumbnail_media)){var e=t.article_thumbnail;if(e){if("video/mp4"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-flv"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-msvideo"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/x-ms-wmv"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css";if("video/quicktime"==e.media_mimetype)return t.article_thumbnail.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"}}}),e.tagscopy=angular.copy(e.tags),e.tagscopy=l.uniqBy(e.tagscopy,function(t){return t.tags}),e.tagscopy=l.filter(e.tagscopy,function(t){if("Article"!==t.tags&&"Portfolio"!==t.tags)return t}),e.lists=angular.copy(e.articlesList);var r=c("filter")(e.tags,{tags:"Portfolio"}),s=c("filter")(e.tags,{tags:"Article"});r&&l.each(r,function(t){var i=l.find(e.lists,{article_id:t.article_id});e.Portfolio.push(i),l.each(e.articlesList,function(e){e.article_id==t.article_id&&(e.article_type=t.tags)})}),s&&l.each(s,function(t){var i=l.find(e.lists,{article_id:t.article_id});e.Article.push(i),l.each(e.articlesList,function(e){e.article_id==t.article_id&&(e.article_type=t.tags)})}),e.pageNumber>=e.totalPages?(e.loadmore=!1,e.showLoadMore=!1):e.loadmore=!1}})}),e.$watch("limitWithPage",function(t){console.log("newValue:",t),console.log("$s:",e.articlesList.length)})},e.clearAll=function(){l.each(e.tagselected,function(t){t.checked=!1}),e.tagselected.splice(e.tagselected)},e.product=function(){o.remove("label"),o.remove("hardtype"),r.go("main.productCatalogue")},e.toggleSelectedTag=function(t){e.event=["Filter by Industry","click",t.tags,l.toString(t.tags_id)],e.tagselected.indexOf(t)==-1?e.tagselected.push(t):e.tagselected=l.filter(e.tagselected,function(e){return e.tags_id!=t.tags_id})},e.trackExperienceArticles=function(t){g.trackEvent("Experience","View",t.title,l.toString(t.article_id))},e.trackExperiencePortfolio=function(t){g.trackEvent("Experience","View",t.title,l.toString(t.article_id))},e.trackExperienceAll=function(t){g.trackEvent(t.type,"View",t.title,l.toString(t.article_id))},e.isTagSelected=function(t){return e.tagselected.indexOf(t)!==-1},e.isOnSelectedTag=function(){return function(t){if(!(e.tagselected.length>0))return!0;var i=!1,a=l.map(e.tagselected,"tags_id");l.forEach(t.tags,function(t){a.indexOf(t.tags_id)!==-1&&(i=!0)});return i}},e.filterArticle=function(t){e.expFilter=t,o.set("articlefilter",JSON.stringify(e.expFilter)),"all"==e.expFilter?e.articlesList=angular.copy(e.lists):(e.articlesList=[],e.articlesList=l.filter(e.lists,function(t){if(t.tags.length>0)return l.some(t.tags,function(t){return t.tags==e.expFilter})}))},e.$watch("expFilter",function(t){u(function(){"all"==t?e.articlesList=angular.copy(e.lists):(e.articlesList=[],e.articlesList=l.filter(e.lists,function(t){if(t.tags.length>0)return l.some(t.tags,function(t){return t.tags==e.expFilter})}))},600)}),e.$on("$stateChangeSuccess",function(t,i,a,l,r){"main.experience"==i.name&&(e.tagselected=[],e.generateArticles())})}angular.module("tessaApp").service("imageService",["$q","$http",function(t,e){this.loadImages=function(){return e.jsonp("https://api.flickr.com/services/feeds/photos_public.gne?format=json&jsoncallback=JSON_CALLBACK")}}]).controller("expCtrl",t),t.$inject=["$http","$scope","APIFactory","$location","_","$state","$rootScope","$filter","$uibModal","localStorageService","$timeout","$frontierAnalytics","imageService","angularGridInstance","$localForage"]}();
!function(){"use strict";function e(e,s,t,i,o,a,n,r,l,c,d,m,p,f,u,h,v,g,y){function w(s){_.each(e.assets.assets,function(e){"application/pdf"==e.asset_mimetype&&(e.thumbnail=_.find(s,{_id:e._id}))}),e.assets.assetscopy=angular.copy(e.assets.assets),e.assetcopy=angular.copy(e.assets.assets),e.assetcopy=_.each(e.assetcopy,function(e){e.date_created=moment(e.date_created).format("YYYY-MM-DD")}),e.assetcopy=_.filter(e.assetcopy,{isDeleted:!1}),e.assetcopy=_.filter(e.assetcopy,{folder_id:null}),console.log("$scope.assetcopy;",e.assetcopy),e.assetshared=_.filter(e.assetshared,{type:"shared"}),e.assetshared=_.each(e.assetshared,function(e){e.date_created=moment(e.date_created).format("YYYY-MM-DD")})}function D(s){_.each(e.foldercopies,function(e){_.each(e.files,function(e,t){"application/pdf"==e.asset_mimetype&&(e.thumbnail=_.find(s,{_id:e._id}))})})}function F(s){if(200==s.statusCode&&s.response.success){if(e.assetcopy=[],e.assetshared=[],e.items=s.response.result,e.assets=angular.copy(s.response.result),e.isLoading=!1,e.assets.folders=_.filter(e.assets.folders,function(e){return 0==e.isDeleted}),e.assets.assets=_.filter(e.assets.assets,function(e){return 0==e.isDeleted||null==e.folder_id}),e.assets.folders.length>0){var t=0;_.each(e.assets.folders,function(e){_.each(e.files,function(e,s){"application/pdf"==e.asset_mimetype&&t++})}),_.each(e.assets.folders,function(s){s.isActive=!1,s.isFolder=!0,s.files&&s.files.length>0&&g.each(s.files,function(s,t){return"video/mp4"==s.asset_mimetype||"video/x-flv"==s.asset_mimetype||"video/x-msvideo"==s.asset_mimetype||"video/x-ms-wmv"==s.asset_mimetype||"video/quicktime"==s.asset_mimetype?s.url="http://www.videogular.com/styles/themes/default/latest/videogular.css":void("application/pdf"==s.asset_mimetype&&v.getDocument(s.asset_url).then(function(i){i.getPage(1).then(function(i){var o=i.getViewport(.5),a=document.createElement("canvas"),n=a.getContext("2d");a.height=o.height,a.width=o.width;var l={canvasContext:n,viewport:o};i.render(l).then(function(){n.globalCompositeOperation="destination-over",n.fillStyle="#fff",n.fillRect(0,0,a.width,a.height);var i=a.toDataURL();r(function(){e.$apply(function(){e.folderFilesThumbs.push({_id:s._id,asset_mimetype:s.asset_mimetype,thumbnail:i}),D(e.folderFilesThumbs)})},10),a.remove(),t()})})}))})}),e.assets.folderscopy=angular.copy(e.assets.folders),e.foldercopy=angular.copy(e.assets.folders),e.toppresentation=_.find(e.foldercopy,{folder_name:"Top 10 Presentations"}),e.retail=_.find(e.foldercopy,{folder_name:"Retail"}),e.engagis=_.find(e.foldercopy,{folder_name:"About Engagis"}),e.foldercopies=_.filter(e.foldercopy,function(e){return"Top 10 Presentations"!==e.folder_name}),e.foldercopies.splice(0,0,e.toppresentation),e.foldercopies=_.each(e.foldercopies,function(e){e.files.length>0&&_.remove(e.files,function(e){return 1==e.isDeleted})}),e.foldercopiescopy=angular.copy(e.foldercopies),_.isUndefined(e.engagis)||(_.each(e.engagis.files,function(e){133==e.asset_id||136==e.asset_id?e.asset_description="Engagis Deliver Digital In-Store/Venue For Improved Service & Profit Best Practice Delivery With ROI Focused Test n Learn Approach Since 2001 Weve Been The Agile Technology Arm For Leading Retailers":e.asset_description="A recognised leader for Digital Transformation in the Physical Space"}),e.engagis&&(e.aboutengagis=_.filter(e.engagis.files,{isDeleted:!1})),console.log("$scope.aboutengagis:",e.aboutengagis)),e.Carousel.add(e.aboutengagis)}if(e.assets.assets.length>0){var t=_.filter(e.assets.assets,function(e){return"application/pdf"==e.asset_mimetype}).length;g.each(e.assets.assets,function(s,i){s.isActive=!1,s.isFolder=!1,"application/pdf"==s.asset_mimetype&&v.getDocument(s.asset_url).then(function(o){o.getPage(1).then(function(o){var a=o.getViewport(.5),n=document.createElement("canvas"),l=n.getContext("2d");n.height=a.height,n.width=a.width;var c={canvasContext:l,viewport:a};o.render(c).then(function(){l.globalCompositeOperation="destination-over",l.fillStyle="#fff",l.fillRect(0,0,n.width,n.height);var o=n.toDataURL();r(function(){e.$apply(function(){e.filesThumbs.push({_id:s._id,asset_mimetype:s.asset_mimetype,thumbnail:o}),t==e.filesThumbs.length&&w(e.filesThumbs)})},10),n.remove(),i()})})})})}}}function b(s){_.each(e.foldershared,function(e){_.each(e.files,function(e,t){"application/pdf"==e.asset_mimetype&&(e.thumbnail=_.find(s,{_id:e._id}))})})}function x(s){if(200==s.statusCode&&s.response.success){if(e.shareditems=s.response.result,e.sharedassets=angular.copy(s.response.result),e.sharedassets.folders=_.filter(e.sharedassets.folders,{isDeleted:!1}),e.sharedassets.assets=_.filter(e.sharedassets.assets,function(e){return 0==e.isDeleted||null==e.folder_id}),e.sharedassets.folders.length>0){var t=0;_.each(e.sharedassets.folders,function(e){_.each(e.files,function(e,s){"application/pdf"==e.asset_mimetype&&t++})}),_.each(e.sharedassets.folders,function(s){s.isActive=!1,s.isFolder=!0,s.files&&s.files.length>0&&g.each(s.files,function(s,i){return"video/mp4"==s.asset_mimetype||"video/x-flv"==s.asset_mimetype||"video/x-msvideo"==s.asset_mimetype||"video/x-ms-wmv"==s.asset_mimetype||"video/quicktime"==s.asset_mimetype?s.url="http://www.videogular.com/styles/themes/default/latest/videogular.css":void("application/pdf"==s.asset_mimetype&&v.getDocument(s.asset_url).then(function(o){o.getPage(1).then(function(o){var a=o.getViewport(.5),n=document.createElement("canvas"),l=n.getContext("2d");n.height=a.height,n.width=a.width;var c={canvasContext:l,viewport:a};o.render(c).then(function(){l.globalCompositeOperation="destination-over",l.fillStyle="#fff",l.fillRect(0,0,n.width,n.height);var o=n.toDataURL();r(function(){e.$apply(function(){e.sharedFolderFilesThumbs.push({_id:s._id,asset_mimetype:s.asset_mimetype,thumbnail:o}),t==e.sharedFolderFilesThumbs.length&&b(e.sharedFolderFilesThumbs)})},10),n.remove(),i()})})}))})});var i=[];e.foldershared=angular.copy(e.sharedassets.folders),console.log("$scope.foldershared"),i=_.find(e.foldershared,{folder_name:"About Engagis"}),console.log("engagis:",i),_.isUndefined(i)||(_.each(i.files,function(e){133==e.asset_id||136==e.asset_id?e.asset_description="Engagis Deliver Digital In-Store/Venue For Improved Service & Profit Best Practice Delivery With ROI Focused Test n Learn Approach Since 2001 Weve Been The Agile Technology Arm For Leading Retailers":e.asset_description="A recognised leader for Digital Transformation in the Physical Space"}),i&&(e.engagis=_.filter(i.files,{isDeleted:!1})),console.log("$scope.aboutengagis:",e.engagis)),e.sharedcopy=angular.copy(e.sharedassets.folders)}if(e.sharedassets.assets.length>0){var t=_.filter(e.sharedassets.assets,function(e){return"application/pdf"==e.asset_mimetype}).length;g.each(e.sharedassets.assets,function(s,i){s.isActive=!1,s.isFolder=!1,"application/pdf"==s.asset_mimetype&&v.getDocument(s.asset_url).then(function(o){o.getPage(1).then(function(o){var a=o.getViewport(.5),n=document.createElement("canvas"),l=n.getContext("2d");n.height=a.height,n.width=a.width;var c={canvasContext:l,viewport:a};o.render(c).then(function(){l.globalCompositeOperation="destination-over",l.fillStyle="#fff",l.fillRect(0,0,n.width,n.height);var o=n.toDataURL();r(function(){e.$apply(function(){e.sharedFilesThumbs.push({_id:s._id,asset_mimetype:s.asset_mimetype,thumbnail:o}),t==e.sharedFilesThumbs.length&&w(e.sharedFilesThumbs)})},10),n.remove(),i()})})})}),e.assetshared=angular.copy(e.sharedassets.assets)}}}e.Carousel=u,e.swiper={},e.onReadySwiper=function(e){e.on("slideChangeStart",function(e){})},e.items={},e.assets={},e.shareditems={},e.sharedassets={},e.DeSelectAll=!1,e.selectedText="Select All",e.selectedFile={},e.isList="null"!=s.get("isList")&&0!=s.get("isList"),e.isLoading=!0,e.showFiles=!1,e.activeAllFiles=!1,e.activeSharedFiles=!1,e.activeStarredFiles=!1,e.activeTrashFiles=!1,e.mirrorFile=!1,e.mirrorDevice={},e.showresult=!1,e.searchresult=[],e.activeDevices=[],e.filesThumbs=[],e.folderFilesThumbs=[],e.sharedFilesThumbs=[],e.sharedFolderFilesThumbs=[],e.foldercopies=[],e.assetcopy=[],e.foldershared=[],e.assetshared=[],p.on("pair:init",function(){}),p.on("pair:sendCode",function(s){_.find(e.activeDevices,{deviceUUID:s.deviceUUID})||e.activeDevices.push(s)}),e.changeDisplay=function(){e.isList=!e.isList,s.set("isList",e.isList),e.isPreso=!e.isPreso,s.set("isPreso",e.isPreso)},e.refreshAssets=function(){if(e.assets={},e.items={},e.isLoading=!0,y.appuser){var s=_.find(y.appuser.userRoles,{name:"Sales Rep."});1==y.appuser.isOwner&&s?i.getAllAssets({}).then(F):1!=y.appuser.isOwner&&s&&i.getAllAssets({action:"shared"}).then(x)}},e.fi=[1,2,3],e.swipe=function(e){},e.refreshAssets(),e.castModal=function(){var s=t.open({animation:!0,templateUrl:"./views/folder/cast.html",size:"lg",keyboard:!1,windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return e.activeDevices},asset_file:function(){return e.selectedFile}}});s.result.then(function(s){e.selectedFile&&("mirror"==s.msg&&(e.mirrorFile=!0,e.mirrorDevice=s.device),e.selectedFile.isFolder?e.openFolder(e.selectedFile):e.openFile(e.selectedFile))})},e.shareToOthers=function(){var s=t.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/share.html",controller:"assetsShareFileModalCtrl",resolve:{asset_file:function(){return e.selectedFile}}});s.result.then(function(e){})},e.shareEmailToOthers=function(){var s=t.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/email-share.html",controller:"assetsShareModalCtrl",resolve:{asset_file:function(){return e.selectedFile}}});s.result.then(function(e){})},e.previewSelected=function(){e.selectedFile&&(e.selectedFile.isFolder?(e.openFolder(e.selectedFile),m.trackEvent("Presentation Assets","View",e.selectedFile.folder_name,e.selectedFile.folder_id)):(e.openFile(e.selectedFile),m.trackEvent("Presentation Assets","View",e.selectedFile.asset_name,e.selectedFile.asset_id)))},e.imagepreview=function(s,t){var i=d("filter")(e.aboutengagis,t.asset_description);"preview"==s?_.each(i,function(s){"application/pdf"==s.asset_mimetype?e.openDocsModal(s):"text/plain"==s.asset_mimetype?e.openDocsModal(s):"application/msword"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==s.asset_mimetype?e.openDocsModal(s):"text/csv"==s.asset_mimetype||"application/vnd.ms-excel"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==s.asset_mimetype?e.openDocsModal(s):"application/vnd.openxmlformats-officedocument.presentationml.presentation"!=s.asset_mimetype&&"application/vnd.ms-powerpoint"!=s.asset_mimetype||e.openDocsModal(s)}):_.each(i,function(s){"application/pdf"==s.asset_mimetype?e.imageCast(s):"text/plain"==s.asset_mimetype?e.imageCast(s):"application/msword"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==s.asset_mimetype?e.imageCast(s):"text/csv"==s.asset_mimetype||"application/vnd.ms-excel"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==s.asset_mimetype?e.imageCast(s):"application/vnd.openxmlformats-officedocument.presentationml.presentation"!=s.asset_mimetype&&"application/vnd.ms-powerpoint"!=s.asset_mimetype||e.imageCast(s)})},e.imageCast=function(s){var i=t.open({animation:!0,templateUrl:"./views/folder/cast.html",size:"lg",keyboard:!1,windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return e.activeDevices},asset_file:function(){return s}}});i.result.then(function(t){s&&("mirror"==t.msg&&(e.mirrorFile=!0,e.mirrorDevice=t.device),s.isFolder?e.openFolder(s):e.openFile(s))})},e.openLightboxModal=function(s){console.log("diri"),e.image_file={url:s.asset_url,caption:s.asset_name,thumbUrl:s.asset_url};var i=t.open({animation:!0,keyboard:!1,backdrop:"static",templateUrl:"./views/folder/lightbox-modal.html",windowClass:"modal-img-fullscreen xd-modal",scope:e,size:"lg",resolve:{files:function(){return s},type:function(){return"video"}}});i.result.then(function(s){e.mirrorFile=!1}),e.cancel=function(){_.isEmpty(e.mirrorDevice)||p.emit("pair:closePresent",{deviceUUID:e.mirrorDevice.deviceUUID}),_.isEmpty(e.mirrorDevice)||!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(EXT_ID,{action:"close",deviceUUID:e.mirrorDevice.deviceUUID},function(e){}),i.dismiss("cancel")},_.isEmpty(e.mirrorDevice)||r(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(EXT_ID,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(e){})},400),e.selectDevice=function(t){e.device=t,e.device&&(e.device.connected=!0,"audio/mp3"==s.asset_mimetype||"audio/mp4"==s.asset_mimetype?s.asset_type="audio":"video/mp4"==s.asset_mimetype||"video/x-flv"==s.asset_mimetype||"video/x-msvideo"==s.asset_mimetype||"video/x-ms-wmv"==s.asset_mimetype||"video/quicktime"==s.asset_mimetype||"video/3gpp"==s.asset_mimetype?s.asset_type="video":s.asset_type="none",s.deviceUUID=e.device.deviceUUID,s.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=s,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(EXT_ID,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(s){p.emit("pair:getCode",e.device)}))}},e.openVideoModal=function(s){t.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"./views/folder/media.html",controller:"assetsMediaModalCtrl",windowClass:"xd-modal",size:"lg",resolve:{files:function(){return s},type:function(){return"video"},mirrorFile:function(){return e.mirrorFile},mirrorDevice:function(){return e.mirrorDevice}}}).result.then(function(){e.mirrorFile=!1})},e.openAudioModal=function(s){t.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"./views/folder/media.html",controller:"assetsMediaModalCtrl",windowClass:"xd-modal",size:"md",resolve:{files:function(){return s},type:function(){return"audio"},mirrorFile:function(){return e.mirrorFile},mirrorDevice:function(){return e.mirrorDevice}}}).result.then(function(){e.mirrorFile=!1,e.mirrorDevice={}})},e.openDocsModal=function(s){t.open({animation:!0,backdrop:"static",templateUrl:"./views/folder/preview.html",controller:"assetsDocsModalCtrl",size:"lg",windowClass:"modal-fullscreen xd-modal",resolve:{files:function(){return s},mirrorFile:function(){return e.mirrorFile},mirrorDevice:function(){return e.mirrorDevice}}}).result.then(function(){e.mirrorFile=!1,e.mirrorDevice={}})},e.openFolder=function(s){s.isFolder&&("main.presentation_trash"!==a.current.name?o._id?a.go("main.opensubfolder",{_id:o._id,sub_id:s._id}):a.go("main.openfolder",{_id:s._id}):(e.modal={title:"This folder is in your trash",message:"To view this folder, youll need to restore it from your trash. Restore folder?"},c.openConfirm({templateUrl:"./views/folder/customDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){i.restoreFolder(s._id).then(function(e){200==e.statusCode&&e.response.success&&(n.success(e.response.msg,"Success"),r(function(){a.reload()},200))})})))},e.openFile=function(s){if("image/jpeg"==s.asset_mimetype||"image/jpg"==s.asset_mimetype||"image/gif"==s.asset_mimetype||"image/x-ms-bmp"==s.asset_mimetype||"image/png"==s.asset_mimetype)e.openLightboxModal(s);else if("audio/mp3"==s.asset_mimetype||"audio/mp4"==s.asset_mimetype)e.openAudioModal(s);else if("video/mp4"==s.asset_mimetype||"video/x-flv"==s.asset_mimetype||"video/x-msvideo"==s.asset_mimetype||"video/x-ms-wmv"==s.asset_mimetype||"video/quicktime"==s.asset_mimetype||"video/3gpp"==s.asset_mimetype)e.openVideoModal(s);else if("application/pdf"==s.asset_mimetype)e.openDocsModal(s);else if("text/plain"==s.asset_mimetype)e.openDocsModal(s);else if("application/msword"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==s.asset_mimetype)e.openDocsModal(s);else if("text/csv"==s.asset_mimetype||"application/vnd.ms-excel"==s.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==s.asset_mimetype)e.openDocsModal(s);else{if("application/vnd.openxmlformats-officedocument.presentationml.presentation"!=s.asset_mimetype&&"application/vnd.ms-powerpoint"!=s.asset_mimetype)return void n.warning("No available tools to open","Failed");e.openDocsModal(s)}_.isNull(s.folder_id)?m.trackEvent("Presentation Assets","Click",s.asset_name,s.asset_id):m.trackEvent("Presentation Assets","Click",s.folder_name,s.files)},e.clearSelection=function(){e.selectedFile={},_.each(e.assets.folders,function(e){e.isActive=!1}),_.each(e.assets.assets,function(e){e.isActive=!1})},e.selectAll=function(){0==e.DeSelectAll?(e.showBarDelete=!0,e.showBarRestore=!1,e.showBarShare=!0,e.showBarMore=!0,_.each(e.assets.folders,function(e){e.isActive=!0}),_.each(e.assets.assets,function(e){e.isActive=!0}),e.DeSelectAll=!0,e.selectedText="Deselect All"):(e.showBarDelete=!1,e.showBarRestore=!0,e.showBarShare=!1,e.showBarMore=!1,_.each(e.assets.folders,function(e){e.isActive=!1}),_.each(e.assets.assets,function(e){e.isActive=!1}),e.DeSelectAll=!1,e.selectedText="Select All")},e.searchData=function(){var s=angular.copy(e.foldercopies),t=angular.copy(e.foldershared),i=_.flattenDeep(_.map(e.foldercopies,function(e){return e.files})),o=_.flattenDeep(_.map(e.foldershared,function(e){return e.files})),a=[],n=[];if(_.isEmpty(e.txtSearch))e.foldershared=e.sharedcopy,e.showresult=!1;else if(_.isEmpty(e.foldershared)){e.showresult=!0;var r=d("filter")(i,e.txtSearch);_.each(r,function(e){_.isNull(e.folder_id)||_.each(s,function(s){e.folder_id==s.folder_id&&(n.push(s),a.push(e))})});var l=_.groupBy(a,"folder_id");_.map(l,function(e,s){_.each(n,function(t){t.folder_id==s&&(t.files=e)})}),n=_.uniqBy(n,function(e){return e._id}),e.searchresult=n}else{var r=d("filter")(o,e.txtSearch);_.each(r,function(e){_.isNull(e.folder_id)||_.each(t,function(s){e.folder_id==s.folder_id&&(n.push(s),a.push(e))})});var l=_.groupBy(a,"folder_id");_.map(l,function(e,s){_.each(n,function(t){t.folder_id==s&&(t.files=e)})}),n=_.uniqBy(n,function(e){return e._id}),e.foldershared=angular.copy(n)}},e.activeSelected=function(s){console.log("folder:",s),e.DeSelectAll=!1,e.selectedText="Select All",s&&(s.isActive=!0,e.selectedFile=s,e.foldercopy&&_.each(e.foldercopy,function(e){_.each(e.files,function(e){e._id!==s._id&&(e.isActive=!1)})}),e.toppresentation&&_.each(e.toppresentation.files,function(e){e._id!==s._id&&(e.isActive=!1)}),e.searchresult.length>0&&_.each(e.searchresult,function(e){e._id!==s._id&&(e.isActive=!1)}),_.each(e.assets.folders,function(e){e._id!==s._id&&(e.isActive=!1)}),_.each(e.assets.assets,function(e){e._id!==s._id&&(e.isActive=!1)}),_.each(e.assetcopy,function(e){e._id!==s._id&&(e.isActive=!1)}))}}angular.module("tessaApp").controller("presCtrl",e),e.$inject=["$scope","localStorageService","$uibModal","assetsFctry","$stateParams","$state","toastr","$timeout","Lightbox","ngDialog","$filter","$frontierAnalytics","socket","$location","Carousel","$sce","PDFJS","async","$rootScope"]}();
!function(e){"use strict";function s(s,t,o,i,r,a,n,l,c,d,m,f,p,u,h,v,w,g,y){function F(e,s){if(0==e)return"0 Byte";var t=1024,o=s+1||3,i=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],r=Math.floor(Math.log(e)/Math.log(t));return parseFloat((e/Math.pow(t,r)).toFixed(o))+" "+i[r]}function D(e){_.each(s.assets.assets,function(e){"application/pdf"==e.asset_mimetype&&(e.thumbnail=_.find(s.filesThumbs,{_id:e._id}))})}function S(t){if(200==t.statusCode&&t.response.success){if(s.items=t.response.result,s.assets=angular.copy(t.response.result),s.isLoading=!1,s.showBread=!0,s.disableToolNewFolder=!1,"main.presentation"==a.current.name?(s.activeAllFiles=!0,s.showToolNewFolder=!0,s.showToolNewUpload=!0,s.assets.folders=_.filter(s.assets.folders,function(e){return 0==e.isDeleted}),s.assets.assets=_.filter(s.assets.assets,function(e){return 0==e.isDeleted}),s.assets.assets=_.filter(s.assets.assets,function(e){return null==e.folder_id}),s.assets.folderscopy=angular.copy(s.assets.folders),s.assets.folderscopy1=angular.copy(s.assets.folders),s.assets.assetscopy=angular.copy(s.assets.assets)):"main.presentation_starred"==a.current.name?(s.activeStarredFiles=!0,s.showToolNewFolder=!1,s.showToolNewUpload=!1,s.showBarDelete=!1,s.assets.folders=_.filter(s.assets.folders,function(e){return 0==e.isDeleted&&1==e.isStarred}),s.assets.assets=_.filter(s.assets.assets,function(e){return 0==e.isDeleted&&1==e.isStarred}),s.starred.folderscopy=angular.copy(s.assets.folders),s.starred.assetscopy=angular.copy(s.assets.assets)):"main.presentation_trash"==a.current.name?(s.activeTrashFiles=!0,s.showToolNewFolder=!1,s.showToolNewUpload=!1,s.showBarDelete=!1,s.showBarRestore=!0,s.showBarShare=!1,s.showToolPreview=!1,s.showToolOpen=!1,s.showBarMore=!1,s.assets.folders=_.filter(s.assets.folders,function(e){return 1==e.isDeleted}),s.assets.assets=_.filter(s.assets.assets,function(e){return 1==e.isDeleted}),s.trash.folderscopy=angular.copy(s.assets.folders),s.trash.assetscopy=angular.copy(s.assets.assets)):"main.openfolder"==a.current.name?(s.assets.folders=_.filter(s.assets.folders,function(e){return 0==e.isDeleted}),s.assets.assets=_.filter(s.assets.assets,function(e){return 0==e.isDeleted})):s.showToolBar=!1,s.assets.folders.length>0){var o=_.filter(s.assets.folders,function(e){return"application/pdf"==e.asset_mimetype}).length;_.each(s.assets.folders,function(e){var s=_.sumBy(e.files,function(e){return e.asset_filesize});e.folder_filesize=F(s),e.isActive=!1,e.isFolder=!0,e.files&&e.files.length>0&&_.each(e.files,function(e){if("video/mp4"==e.asset_mimetype||"video/x-flv"==e.asset_mimetype||"video/x-msvideo"==e.asset_mimetype||"video/x-ms-wmv"==e.asset_mimetype||"video/quicktime"==e.asset_mimetype)return e.url="http://www.videogular.com/styles/themes/default/latest/videogular.css"})})}if(s.assets.assets.length>0){var o=_.filter(s.assets.assets,function(e){return"application/pdf"==e.asset_mimetype}).length;g.each(s.assets.assets,function(t,i){t.asset_filesize=F(t.asset_filesize),t.isActive=!1,t.isFolder=!1,"main.presentation"!=a.current.name&&"main.openfolder"!=a.current.name&&"main.opensubfolder"!=a.current.name&&"main.presentation_trash"!=a.current.name&&"main.presentation_starred"!=a.current.name||"application/pdf"==t.asset_mimetype&&w.getDocument(t.asset_url).then(function(r){r.getPage(1).then(function(r){var a=r.getViewport(.5),n=e.createElement("canvas"),c=n.getContext("2d");n.height=a.height,n.width=a.width;var d={canvasContext:c,viewport:a};r.render(d).then(function(){c.globalCompositeOperation="destination-over",c.fillStyle="#fff",c.fillRect(0,0,n.width,n.height);var e=n.toDataURL();l(function(){s.$apply(function(){s.filesThumbs.push({_id:t._id,asset_mimetype:t.asset_mimetype,thumbnail:e}),o==s.filesThumbs.length&&D(s.filesThumbs)})},10),n.remove(),i()})})})})}s.assets.folders&&s.assets.assets&&(s.assets.folders.length>0&&s.assets.assets.length>0?s.showFiles=!0:s.assets.folders.length>0&&s.assets.assets.length<1?s.showFiles=!0:s.assets.folders.length<1&&s.assets.assets.length>0?s.showFiles=!0:s.assets.folders.length<1&&s.assets.assets.length<1&&(s.showFiles=!1)),s.foldercopy=_.filter(s.assets.folders,function(e){return 0==e.isDeleted}),s.foldercopies=[],s.assetcopy=angular.copy(s.assets.assets),s.toppresentation=_.find(s.foldercopy,{folder_name:"Top 10 Presentations"}),s.retail=_.find(s.foldercopy,{folder_name:"Retail"}),s.engagis=_.find(s.foldercopy,{folder_name:"About Engagis"}),s.foldercopies=_.filter(s.foldercopy,function(e){return"Top 10 Presentations"!==e.folder_name}),s.foldercopies.splice(0,0,s.toppresentation),_.isUndefined(s.engagis)||(_.each(s.engagis.files,function(e){133==e.asset_id||136==e.asset_id?e.asset_description="Engagis Deliver Digital In-Store/Venue For Improved Service & Profit Best Practice Delivery With ROI Focused Test n Learn Approach Since 2001 Weve Been The Agile Technology Arm For Leading Retailers":e.asset_description="A recognised leader for Digital Transformation in the Physical Space"}),s.engagis&&(s.aboutengagis=_.filter(s.engagis.files,{isDeleted:!1}))),s.Carousel.add(s.aboutengagis)}}s.Carousel=h,s.swiper={},s.onReadySwiper=function(e){e.on("slideChangeStart",function(e){})},s.items={},s.assets={},s.trash={},s.starred={},s.DeSelectAll=!1,s.selectedText="Select All",s.selectedFile={},s.isList="null"!=t.get("isList")&&0!=t.get("isList"),s.isLoading=!0,s.showBread=!1,s.showFiles=!1,s.disableToolNewFolder=!0,s.showToolNewFolder=!0,s.showToolNewUpload=!0,s.showToolMakeCopy=!1,s.showToolPreview=!1,s.showToolOpen=!1,s.showToolBar=!0,s.showBarDelete=!1,s.showBarRestore=!1,s.showBarShare=!1,s.showBarMore=!1,s.activeAllFiles=!1,s.activeSharedFiles=!1,s.activeStarredFiles=!1,s.activeTrashFiles=!1,s.mirrorFile=!1,s.mirrorDevice={},s.showresult=!1,s.searchresult=[],s.activeDevices=[],s.filesThumbs=[],p.on("pair:init",function(){}),p.on("pair:sendCode",function(e){_.find(s.activeDevices,{deviceUUID:e.deviceUUID})||s.activeDevices.push(e)}),s.swipe=function(e){},s.changeDisplay=function(){s.isList=!s.isList,t.set("isList",s.isList),s.isPreso=!s.isPreso,t.set("isPreso",s.isPreso)},s.refreshAssets=function(){s.assets={},s.items={},"main.presentation"==a.current.name?s.activePage="Assets":"main.presentation_starred"==a.current.name?s.activePage="Favorites":"main.presentation_trash"==a.current.name&&(s.activePage="Trash"),r._id&&_.isUndefined(r.sub_id)?(s.isLoading=!0,i.getFolderAssets(r._id).then(S)):r._id&&r.sub_id?(s.isLoading=!0,s.showToolNewFolder=!1,i.getFolderAssets(r.sub_id).then(S)):i.getAllAssets().then(S)},s.fi=[1,2,3],s.swipe=function(e){},s.refreshAssets(),s.showAllFiles=function(){"main.presentation"==a.current.name?(s.activePage="Assets",s.refreshAssets()):a.go("main.presentation")},s.showAllTrash=function(){"main.presentation_trash"==a.current.name?(s.activePage="Trash",s.refreshAssets()):a.go("main.presentation_trash")},s.showAllStarred=function(){"main.presentation_starred"==a.current.name?(s.activePage="Favorites",s.refreshAssets()):a.go("main.presentation_starred")},s.imgcast=function(){var e=o.open({animation:!0,templateUrl:"./views/folder/cast.html",size:"lg",keyboard:!1,windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return s.activeDevices},asset_file:function(){return s.selectedFile}}});e.result.then(function(e){s.selectedFile&&"mirror"==e.msg&&(s.mirrorFile=!0,s.mirrorDevice=e.device)})},s.castModal=function(){var e=o.open({animation:!0,templateUrl:"./views/folder/cast.html",size:"lg",keyboard:!1,windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return s.activeDevices},asset_file:function(){return s.selectedFile}}});e.result.then(function(e){s.selectedFile&&("mirror"==e.msg&&(s.mirrorFile=!0,s.mirrorDevice=e.device),s.selectedFile.isFolder?s.openFolder(s.selectedFile):s.openFile(s.selectedFile))})},s.newFolder=function(){var e=o.open({animation:!0,templateUrl:"./views/folder/new-item.html",windowClass:"xd-modal",controller:"presentationFolderModalCtrl"});e.result.then(function(e){e&&a.reload()})},s.newUploader=function(){var e=o.open({animation:!0,backdrop:"static",templateUrl:"./views/folder/uploader.html",size:"lg",controller:"assetsUploadModalCtrl"});e.result.then(function(e){e&&s.refreshAssets()})},s.copySelected=function(){var e=o.open({animation:!0,keyboard:!1,windowClass:"xd-modal",templateUrl:"./views/folder/copy.html",controller:"modalpresentation"});e.result.then(function(e){})},s.shareToOthers=function(){var e=o.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/share.html",controller:"assetsShareFileModalCtrl",resolve:{asset_file:function(){return s.selectedFile}}});e.result.then(function(e){"save"==e&&l(function(){a.reload()},200)})},s.shareEmailToOthers=function(){var e=o.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/email-share.html",controller:"assetsShareModalCtrl",resolve:{asset_file:function(){return s.selectedFile}}});e.result.then(function(e){"send"==e&&l(function(){a.reload()},200)})},s.renameSelected=function(){var e=o.open({animation:!0,keyboard:!1,windowClass:"xd-modal",templateUrl:"./views/folder/rename.html",controller:"assetsRenameModalCtrl",resolve:{asset_file:function(){return s.selectedFile}}});e.result.then(function(e){e&&l(function(){a.reload()},200)})},s.deleteSelected=function(){var e=function(e){200==e.statusCode&&e.response.success&&(n.success(e.response.msg,"Success"),l(function(){a.reload()},200))};s.modal={title:"Remove?",message:"Are you sure to remove this?"},d.openConfirm({templateUrl:"./views/folder/customDialog.html",scope:s,className:"ngdialog-theme-default"}).then(function(){_.isEmpty(s.selectedFile)||(s.selectedFile.isFolder?s.selectedFile.isDeleted?i.deleteFolder(s.selectedFile._id).then(e):i.trashFolder(s.selectedFile._id).then(e):s.selectedFile.isDeleted?i.deleteAssetFile(s.selectedFile._id).then(e):i.trashAssetFile(s.selectedFile._id).then(e))})},s.moveSelected=function(){var e=o.open({animation:!0,keyboard:!1,windowClass:"xd-modal",templateUrl:"./views/folder/move.html",controller:"assetsMoveModalCtrl",resolve:{asset_file:function(){return s.selectedFile}}});e.result.then(function(e){e&&a.reload()})},s.previewSelected=function(){s.selectedFile&&(s.selectedFile.isFolder?(s.openFolder(s.selectedFile),f.trackEvent("Presentation Assets","View",s.selectedFile.folder_name,s.selectedFile.folder_id)):(s.openFile(s.selectedFile),f.trackEvent("Presentation Assets","View",s.selectedFile.asset_name,s.selectedFile.asset_id)))},s.imagepreview=function(e,t){var o=m("filter")(s.aboutengagis,t.asset_description);"preview"==e?_.each(o,function(e){"application/pdf"==e.asset_mimetype?s.openDocsModal(e):"text/plain"==e.asset_mimetype?s.openDocsModal(e):"application/msword"==e.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e.asset_mimetype?s.openDocsModal(e):"text/csv"==e.asset_mimetype||"application/vnd.ms-excel"==e.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.asset_mimetype?s.openDocsModal(e):"application/vnd.openxmlformats-officedocument.presentationml.presentation"!=e.asset_mimetype&&"application/vnd.ms-powerpoint"!=e.asset_mimetype||s.openDocsModal(e)}):_.each(o,function(e){"application/pdf"==e.asset_mimetype?s.imageCast(e):"text/plain"==e.asset_mimetype?s.imageCast(e):"application/msword"==e.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e.asset_mimetype?s.imageCast(e):"text/csv"==e.asset_mimetype||"application/vnd.ms-excel"==e.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.asset_mimetype?s.imageCast(e):"application/vnd.openxmlformats-officedocument.presentationml.presentation"!=e.asset_mimetype&&"application/vnd.ms-powerpoint"!=e.asset_mimetype||s.imageCast(e)})},s.imageCast=function(e){var t=o.open({animation:!0,templateUrl:"./views/folder/cast.html",size:"lg",keyboard:!1,windowClass:"xd-modal",controller:"assetsMirrorModalCtrl",resolve:{activeDevices:function(){return s.activeDevices},asset_file:function(){return e}}});t.result.then(function(t){e&&("mirror"==t.msg&&(s.mirrorFile=!0,s.mirrorDevice=t.device),e.isFolder?s.openFolder(e):s.openFile(e))})},s.starredSelected=function(){var e=function(e){200==e.statusCode&&e.response.success&&(1==s.selectedFile.isStarred?n.success("Successfully removed star","Success"):n.success(e.response.msg,"Success"),l(function(){a.reload()},200))};s.selectedFile&&(s.selectedFile.isFolder?i.starredFolder(s.selectedFile._id).then(e):i.starredAssetFile(s.selectedFile._id).then(e))},s.restoreSelected=function(){if(_.isEmpty(s.selectedFile))n.warning("Please select first","Warning");else{var e=function(e){200==e.statusCode&&e.response.success&&(n.success(e.response.msg,"Success"),l(function(){a.reload()},200))};s.selectedFile.isFolder?i.restoreFolder(s.selectedFile._id).then(e):i.restoreAssetFile(s.selectedFile._id).then(e)}},s.openLightboxModal=function(e){s.image_file={url:e.asset_url,caption:e.asset_name,thumbUrl:e.asset_url};var t=o.open({animation:!0,keyboard:!1,backdrop:"static",templateUrl:"./views/folder/lightbox-modal.html",windowClass:"modal-img-fullscreen xd-modal",controller:"assetsLightBoxModalCtrl",size:"lg",resolve:{files:function(){return e},image_file:function(){return s.image_file},type:function(){return"image"},mirrorFile:function(){return s.mirrorFile},mirrorDevice:function(){return s.mirrorDevice}}});console.log("modalInstance: ",t),t.result.then(function(e){s.mirrorFile=!1}),_.isEmpty(s.mirrorDevice)||l(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(EXT_ID,{openplugin:window.location.origin+window.location.pathname,deviceUUID:s.mirrorDevice.deviceUUID},function(e){})},400)},s.openVideoModal=function(e){o.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"./views/folder/media.html",controller:"assetsMediaModalCtrl",windowClass:"xd-modal",size:"lg",resolve:{files:function(){return e},type:function(){return"video"},mirrorFile:function(){return s.mirrorFile},mirrorDevice:function(){return s.mirrorDevice}}}).result.then(function(){s.mirrorFile=!1})},s.openAudioModal=function(e){o.open({animation:!0,backdrop:"static",keyboard:!1,templateUrl:"./views/folder/media.html",controller:"assetsMediaModalCtrl",windowClass:"xd-modal",size:"md",resolve:{files:function(){return e},type:function(){return"audio"},mirrorFile:function(){return s.mirrorFile},mirrorDevice:function(){return s.mirrorDevice}}}).result.then(function(){s.mirrorFile=!1,s.mirrorDevice={}})},s.openDocsModal=function(e){o.open({animation:!0,backdrop:"static",templateUrl:"./views/folder/preview.html",controller:"assetsDocsModalCtrl",size:"lg",windowClass:"modal-fullscreen xd-modal",resolve:{files:function(){return e},mirrorFile:function(){return s.mirrorFile},mirrorDevice:function(){return s.mirrorDevice}}}).result.then(function(){s.mirrorFile=!1,s.mirrorDevice={}})},s.openFolder=function(e){e.isFolder&&("main.presentation_trash"!==a.current.name?r._id?a.go("main.opensubfolder",{_id:r._id,sub_id:e._id}):a.go("main.openfolder",{_id:e._id}):(s.modal={title:"This folder is in your trash",message:"To view this folder, youll need to restore it from your trash. Restore folder?"},d.openConfirm({templateUrl:"./views/folder/customDialog.html",scope:s,className:"ngdialog-theme-default"}).then(function(){i.restoreFolder(e._id).then(function(e){200==e.statusCode&&e.response.success&&(n.success(e.response.msg,"Success"),l(function(){a.reload()},200))})})))},s.openFile=function(e){if("image/jpeg"==e.asset_mimetype||"image/jpg"==e.asset_mimetype||"image/gif"==e.asset_mimetype||"image/x-ms-bmp"==e.asset_mimetype||"image/png"==e.asset_mimetype)s.openLightboxModal(e);else if("audio/mp3"==e.asset_mimetype||"audio/mp4"==e.asset_mimetype)s.openAudioModal(e);else if("video/mp4"==e.asset_mimetype||"video/x-flv"==e.asset_mimetype||"video/x-msvideo"==e.asset_mimetype||"video/x-ms-wmv"==e.asset_mimetype||"video/quicktime"==e.asset_mimetype||"video/3gpp"==e.asset_mimetype)s.openVideoModal(e);else if("application/pdf"==e.asset_mimetype)s.openDocsModal(e);else if("text/plain"==e.asset_mimetype)s.openDocsModal(e);else if("application/msword"==e.asset_mimetype||"application/vnd.openxmlformats-officedocument.wordprocessingml.document"==e.asset_mimetype)s.openDocsModal(e);else if("text/csv"==e.asset_mimetype||"application/vnd.ms-excel"==e.asset_mimetype||"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"==e.asset_mimetype)s.openDocsModal(e);else{if("application/vnd.openxmlformats-officedocument.presentationml.presentation"!=e.asset_mimetype&&"application/vnd.ms-powerpoint"!=e.asset_mimetype)return void n.warning("No available tools to open","Failed");s.openDocsModal(e)}_.isNull(e.folder_id)?f.trackEvent("Presentation Assets","Click",e.asset_name,e.asset_id):f.trackEvent("Presentation Assets","Click",e.folder_name,e.files)},s.deleteFile=function(e){s.modal={title:"Remove File",message:"Are you sure to remove the file?"},d.openConfirm({templateUrl:"./views/folder/customDialog.html",scope:s,className:"ngdialog-theme-default"}).then(function(){i.deleteAssetFile(e._id).then(function(e){200==e.statusCode&&e.response.success&&(n.success(e.response.msg,"Success"),l(function(){a.reload()},200))})})},s.clearSelection=function(){s.selectedFile={},s.showBarDelete=!1,s.showBarRestore=!1,s.showBarShare=!1,s.showBarMore=!1,s.showToolPreview=!1,s.showToolOpen=!1,_.each(s.assets.folders,function(e){e.isActive=!1}),_.each(s.assets.assets,function(e){e.isActive=!1})},s.searchData=function(){if(_.isEmpty(s.txtSearch)||"main.presentation_trash"!=a.current.name)if(_.isEmpty(s.txtSearch)&&"main.presentation_trash"==a.current.name)s.assets.folders=s.trash.folderscopy,s.assets.assets=s.trash.assetscopy;else if(_.isEmpty(s.txtSearch)||"main.presentation_starred"!=a.current.name)if(_.isEmpty(s.txtSearch)&&"main.presentation_starred"==a.current.name)s.assets.folders=s.starred.folderscopy,s.assets.assets=s.starred.assetscopy;else if(_.isEmpty(s.txtSearch)||"main.presentation"!=a.current.name)_.isEmpty(s.txtSearch)&&"main.presentation"==a.current.name?s.refreshAssets():_.isEmpty(s.txtSearch)||"main.opensubfolder"!=a.current.name?_.isEmpty(s.txtSearch)&&"main.opensubfolder"==a.current.name?(s.assets.folders=s.foldercopy,s.assets.assets=s.assetcopy):_.isEmpty(s.txtSearch)||"main.openfolder"!=a.current.name?_.isEmpty(s.txtSearch)&&"main.openfolder"==a.current.name?(s.assets.folders=s.foldercopy,s.assets.assets=s.assetcopy):_.isEmpty(s.txtSearch)||"main.assetGallery"!=a.current.name?_.isEmpty(s.txtSearch)&&"main.assetGallery"==a.current.name&&(s.showresult=!1):(s.showresult=!0,s.searchresult=m("filter")(s.assetcopy,s.txtSearch)):(s.assets.folders=m("filter")(s.foldercopy,s.txtSearch),s.assets.assets=m("filter")(s.assetcopy,s.txtSearch)):(s.assets.folders=m("filter")(s.foldercopy,s.txtSearch),s.assets.assets=m("filter")(s.assetcopy,s.txtSearch));else{var e=[],t=s.assets.folderscopy;s.assets.folderscopy1;e=_.flattenDeep(_.filter(t,function(e){if(e.files.length>0)return e.files})),s.assets.assets=m("filter")(s.assets.assetscopy,s.txtSearch),s.assets.folders=m("filter")(_.each(e,function(e){if(e.files.length>0)return e.files=[]}),s.txtSearch)}else s.assets.folders=m("filter")(s.starred.folderscopy,s.txtSearch),s.assets.assets=m("filter")(s.starred.assetscopy,s.txtSearch);else s.assets.folders=m("filter")(s.trash.folderscopy,s.txtSearch),s.assets.assets=m("filter")(s.trash.assetscopy,s.txtSearch);_.each(s.assets.folders,function(e){var s=_.sumBy(e.files,function(e){return e.asset_filesize});e.folder_filesize=F(s),e.isActive=!1,e.isFolder=!0}),_.each(s.assets.assets,function(e){e.asset_filesize=_.isInteger(e.asset_filesize)?F(e.asset_filesize):e.asset_filesize,e.isActive=!1,e.isFolder=!1}),s.assets.folders&&s.assets.assets&&(s.assets.folders.length>0&&s.assets.assets.length>0?s.showFiles=!0:s.assets.folders.length>0&&s.assets.assets.length<1?s.showFiles=!0:s.assets.folders.length<1&&s.assets.assets.length>0?s.showFiles=!0:s.assets.folders.length<1&&s.assets.assets.length<1&&(s.showFiles=!1))},s.selectAll=function(){0==s.DeSelectAll?(s.showBarDelete=!0,s.showBarRestore=!1,s.showBarShare=!0,s.showBarMore=!0,_.each(s.assets.folders,function(e){e.isActive=!0}),_.each(s.assets.assets,function(e){e.isActive=!0}),s.DeSelectAll=!0,s.selectedText="Deselect All"):(s.showBarDelete=!1,s.showBarRestore=!0,s.showBarShare=!1,s.showBarMore=!1,_.each(s.assets.folders,function(e){e.isActive=!1}),_.each(s.assets.assets,function(e){e.isActive=!1}),s.DeSelectAll=!1,s.selectedText="Select All")},s.activeSelected=function(e){s.DeSelectAll=!1,s.selectedText="Select All",e&&(e.isActive=!0,"main.presentation_trash"==a.current.name?(s.showBarDelete=!0,s.showBarRestore=!0,s.showBarShare=!1,s.showBarMore=!1,s.showToolPreview=!1,s.showToolOpen=!1,s.showToolMakeCopy=!1):"main.presentation_starred"==a.current.name?(s.showBarDelete=!1,s.showBarRestore=!1,s.showBarShare=!0,s.showBarMore=!0,e.isFolder?(s.showToolPreview=!1,s.showToolOpen=!0,s.showToolMakeCopy=!1):(s.showToolPreview=!0,s.showToolOpen=!1,s.showToolMakeCopy=!0)):(s.showBarDelete=!0,s.showBarRestore=!1,s.showBarShare=!0,s.showBarMore=!0,e.isFolder?(s.showToolPreview=!1,s.showToolOpen=!0,s.showToolMakeCopy=!1):(s.showToolPreview=!0,s.showToolOpen=!1,s.showToolMakeCopy=!0)),s.selectedFile=e,s.foldercopy&&_.each(s.foldercopy,function(s){_.each(s.files,function(s){s._id!==e._id&&(s.isActive=!1)})}),s.toppresentation&&_.each(s.toppresentation.files,function(s){s._id!==e._id&&(s.isActive=!1)}),s.searchresult.length>0&&_.each(s.searchresult,function(s){s._id!==e._id&&(s.isActive=!1)}),_.each(s.assets.folders,function(s){s._id!==e._id&&(s.isActive=!1)}),_.each(s.assets.assets,function(s){s._id!==e._id&&(s.isActive=!1)}))}}angular.module("tessaApp").controller("presentationCtrl",s),s.$inject=["$scope","localStorageService","$uibModal","assetsFctry","$stateParams","$state","toastr","$timeout","Lightbox","ngDialog","$filter","$frontierAnalytics","socket","$location","Carousel","$sce","PDFJS","async","$rootScope"]}(document);
!function(){"use strict";function s(s,e,n,r,t,o){s.folder={},s.create=function(){r._id&&(s.folder.parent_id=r._id),o.createFolder(s.folder).then(function(s){200==s.statusCode&&s.response.success?(t.success(s.response.msg,"Success"),n(function(){e.close("save")},100)):400===s.statusCode&&!s.response.success&&_.isArray(s.response.result)?_.each(s.response.result,function(s){t.warning(s.msg,"Warning")}):t.error(s.response.msg,"Error")})},s.cancel=function(){e.dismiss("cancel")}}angular.module("tessaApp").controller("presentationFolderModalCtrl",s),s.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry"]}();
!function(){"use strict";function e(e,t,n,i,o,s,c,l,r,a,u,d,m){function v(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),e.isFullScreen=!0}function f(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,t=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled;t?v(document.documentElement):e&&v(document.documentElement)}function p(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),e.isFullScreen=!1}function w(){t.reload()}function g(e){var t=$window.open(encodeURI("https://chrome.google.com/webstore/detail/"+d),"_blank");t.focus()}console.log("DIRI DAW?"),e.audio="audio"==s,e.mirrorFile=a,e.mirrorDevice=u,e.data=null,e.isFullScreen=!1,e.onReady=function(t){e.data=t,t.autoPlay=!0},e.config={autoPlay:!0,sources:[{src:o.trustAsResourceUrl(i.asset_url),type:i.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}},e.device={},e.asset_file=i,e.displayInstallPlugin=!1,e.displayInCompatiblePlugin=!1,e.activeDevices=[],c.on("pair:sendCode",function(t){_.find(e.activeDevices,{deviceUUID:t.deviceUUID})||e.activeDevices.push(t)}),c.on("pair:closePresent",function(){console.log("pair:closePresentation")}),$(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(t){var n=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;n?e.isFullScreen=!0:e.isFullScreen=!1}),DetectRTC.screen.getChromeExtensionStatus(function(t){"not-supported"===t?(DetectRTC.screen.chromeMediaSource="desktop",r(function(){e.$apply(function(){e.displayInCompatiblePlugin=!0})},10)):"installed-enabled"!=t&&(DetectRTC.screen.chromeMediaSource="desktop",r(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),_.isEmpty(e.mirrorDevice)||r(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(d,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(e){})},1e3),e.enterFullScreen=function(){e.data.toggleFullScreen(),e.isFullScreen=!0},e.exitFullScreen=function(){e.data.toggleFullScreen(),e.isFullScreen=!1,p()},e.pingSelectedDevice=function(e){e&&c.emit("pair:sendMessage",{msg:"Ping DEVICE: "+e.deviceUUID,deviceUUID:e.deviceUUID})},e.moveSelected=function(){var e=m.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/move.html",controller:"assetsMoveModalCtrl",resolve:{asset_file:function(){return i}}});e.result.then(function(e){e&&t.reload()})},e.renameSelected=function(){var n=m.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/rename.html",controller:"assetsRenameModalCtrl",resolve:{asset_file:function(){return i}}});n.result.then(function(n){n&&(e.cancel(),t.reload())})},console.log("DEVICE:",e.device),e.selectDevice=function(t){e.device=t,e.device&&(console.log("DEVICE:",e.device),e.device.connected=!0,"audio/mp3"==e.asset_file.asset_mimetype||"audio/mp4"==e.asset_file.asset_mimetype?e.asset_file.asset_type="audio":"video/mp4"==e.asset_file.asset_mimetype||"video/x-flv"==e.asset_file.asset_mimetype||"video/x-msvideo"==e.asset_file.asset_mimetype||"video/x-ms-wmv"==e.asset_file.asset_mimetype||"video/quicktime"==e.asset_file.asset_mimetype||"video/3gpp"==e.asset_file.asset_mimetype?e.asset_file.asset_type="video":e.asset_file.asset_type="none",e.asset_file.deviceUUID=e.device.deviceUUID,e.asset_file.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=e.asset_file,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(d,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(t){c.emit("pair:getCode",e.device)}))},e.castScreen=function(){e.mirrorDevice&&!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(d,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(t){f(),c.emit("pair:getCode",e.mirrorDevice)})},e.starredSelected=function(){function t(t){200==t.statusCode&&t.response.success&&(toastr.success(t.response.msg,"Success"),e.asset_file.isStarred=1)}e.asset_file&&(e.asset_file.isFolder?l.starredFolder(e.asset_file._id).then(t):l.starredAssetFile(e.asset_file._id).then(t))},e.cancel=function(){e.device?c.emit("pair:closePresent",{deviceUUID:e.device.deviceUUID}):c.emit("pair:closePresent",{deviceUUID:e.mirrorDevice.deviceUUID}),p(),!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(d,{action:"close",deviceUUID:e.device.deviceUUID},function(e){}),n.close("cancel")},e.installPlugin=function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.webstore.install("https://chrome.google.com/webstore/detail/tessa-presentation/"+d,w(),g())}}angular.module("tessaApp").controller("assetsMediaModalCtrl",e),e.$inject=["$scope","$state","$uibModalInstance","files","$sce","type","socket","assetsFctry","$timeout","mirrorFile","mirrorDevice","EXT_ID","$uibModal"]}();
!function(){"use strict";function e(e,s,i,o,t,l,n){e.files={},e.treedata=[],e.asset_file=n,e.isLoading=!0,e.treedata.push({label:"Main Files",_id:null,folder_id:null}),l.getAllAssets().then(function(s){200==s.statusCode&&s.response.success&&(e.files=s.response.result,_.each(e.files.folders,function(s){var i={label:s.folder_name,_id:s._id,folder_id:s.folder_id,children:[]};_.each(s.sub_folders,function(e){i.children.push({label:e.folder_name,_id:s._id,folder_id:s.folder_id})}),e.treedata.push(i)}),e.isLoading=!1)}),e.Move=function(){function o(e){200==e.statusCode&&e.response.success&&(t.success(e.response.msg,"Success"),i(function(){s.close("save")},100))}if(!e.abc||!angular.isObject(e.abc.currentNode))return void t.warning("Please select directory where the files/folder to move","WARNING");var n=e.abc.currentNode;if(e.asset_file.isFolder){if(e.asset_file._id==n._id)return void t.warning("Unable to move folder on same folder source","WARNING");if(e.asset_file.parent_id==n._id)return void t.warning("Unable to move folder on root folder source","WARNING");l.moveFolder(e.asset_file._id,n._id).then(o)}else l.moveAssetFile(e.asset_file._id,n._id).then(o)},e.cancel=function(){s.dismiss("cancel")}}angular.module("tessaApp").controller("assetsMoveModalCtrl",e),e.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","asset_file"]}();
!function(){"use strict";function e(e,s,n,i,l,t,a){e.file={},e.file=a,e.file.isFolder?e.file.foldername=e.file.folder_name:e.file.filename=e.file.asset_name,e.Rename=function(){function i(e){200==e.statusCode&&e.response.success?(l.success(e.response.msg,"Success"),n(function(){s.close("save")},100)):400===e.statusCode&&!e.response.success&&_.isArray(e.response.result)?_.each(e.response.result,function(e){l.warning(e.msg,"Warning")}):l.error(e.response.msg,"Error")}e.file.isFolder?t.updateFolder(e.file._id,{folder_name:e.file.foldername}).then(i):t.updateAssetFile(e.file._id,{file_name:e.file.filename}).then(i)},e.cancel=function(){s.dismiss("cancel")}}angular.module("tessaApp").controller("assetsRenameModalCtrl",e),e.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","asset_file"]}();
!function(){"use strict";function e(e,s,r,t,a,n,o,i,c,u,l,p,d){e.copyAlert=!0,e.sharer={},e.persons=[],e.company=[],e.items=[],e.asset={},e.asset=l,e.owner={},e.sharer.isPublic=0!=e.asset.isPublic;var m=d.decodeToken(u.getUserToken());e.sharer.owner=m.displayName.toUpperCase(),e.sharer.file=l.asset_name||"",e.owner={displayName:m.displayName},async.waterfall([function(e){i.getAllUserAccounts(function(s,r){if(200==r.statusCode&&r.response.success){var t=r.response.result;e(null,t)}else e(null,[])})},function(s,r){if(e.users=angular.copy(s),u.getCurrentUser()){var t=JSON.parse(u.getCurrentUser());_.remove(e.users,function(e){return e.uc_id==t.uc_id})}_.each(e.users,function(s){var r=s.profile;e.items.push({displayName:r.displayName,email:r.email||"",_id:r._id,id:s.uc_id,type:"user"})})}]),o.getSharedAssetFile(e.asset.asset_id).then(function(s){if(200!=s.statusCode||!s.response.success)return void n.error(s.response.msg,"Error");var r=s.response.result;e.sharer.email=_.map(r,function(e){if(e.info){var s=e.info;return{displayName:s.displayName,email:s.email||"",_id:s._id,id:s.uc_id,type:"user"}}}),e.sharer.publiclink=window.location.origin+window.location.pathname+"#/file/"+e.asset._id+"/view"}),e.copyclipAlert=function(){e.copyAlert=!1,t(function(){e.copyAlert=!0},3e3)},e.tagTransform=function(e){return{email:e}},e.clearInput=function(e){e.search=""},e.deleteEmail=function(e){},e.sendMail=function(){var s=_.map(e.sharer.email,function(e){return{id:e.id,type:e.type,email:e.email}});e.sharer.isPublic?o.publicSharedAssetFile(e.asset._id,"public").then(function(e){return 200==e.statusCode&&e.response.success?(n.success(e.response.msg,"Success"),void r.close("save")):void n.error(e.response.msg,"Error")}):s&&s.length>0?o.removeSharedAssetFile(e.asset.asset_id).then(function(t){if(200!=t.statusCode||!t.response.success)return void n.error(t.response.msg,"Error");var a=1;async.eachSeries(s,function(t,i){o.shareAssetFile(e.asset.asset_id,{shared_to:t.id,share_type:t.type}).then(function(s){return 200==s.statusCode&&s.response.success?(e.sharer.from="support@tessa.cc",e.sharer.subject="ENGAGIS-TESSA Preso Shared",e.sharer.message=$("#printasset").html(),e.sharer.email=t.email,c.sendMail(e.sharer,function(e,s){200==s.statusCode&&s.response.success&&console.log("MSG: ",s.response.msg)}),n.success(s.response.msg,"Success"),a++,i(),void 0):400===s.statusCode&&!s.response.success&&_.isArray(s.response.result)?void _.each(s.response.result,function(e){n.warning(e.msg,"Warning")}):void n.error(s.response.msg,"Error")}),a==s.length&&r.close("save")})}):o.removeSharedAssetFile(e.asset.asset_id).then(function(e){return 200==e.statusCode&&e.response.success?(n.success(e.response.msg,"Success"),void r.close("save")):void n.error(e.response.msg,"Error")})},e.cancel=function(){r.dismiss("cancel")}}angular.module("tessaApp").controller("assetsShareFileModalCtrl",e),e.$inject=["$scope","$rootScope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","APIFactory","sharerFactory","AuthFactory","asset_file","$state","jwtHelper"]}();
!function(){"use strict";function s(s,e,n,r,a,t,o,c,i,u){s.sharer={},s.persons=[],s.company=[],s.items=[],async.waterfall([function(s){o.getCompany(function(e,n){if(200==n.statusCode&&n.response.success){var r=n.response.result;s(null,r)}else s(null,[])})},function(s,e){o.getAllPerson(function(n,r){if(200==r.statusCode&&r.response.success){var a=r.response.result;e(null,s,a)}else e(null,[])})},function(e,n,r){s.persons=angular.copy(n),s.company=angular.copy(e),s.persons=_.filter(s.persons,function(s){if("Customer"==s.person_type&&0==s.isSubscriber)return s}),_.each(s.persons,function(e){s.items.push({displayName:e.displayName,email:e.email||"",_id:e._id})}),_.each(s.company,function(e){s.items.push({displayName:e.name,email:e.email_address||"",_id:e._id})})}]),s.tagTransform=function(s){return{email:s}},s.clearInput=function(s){s.search=""},s.deleteEmail=function(s){},s.sendMail=function(){s.sharer.from="support@tessa.cc",s.sharer.subject="ENGAGIS-TESSA Presentation",s.sharer.message=$("#printasset").html(),s.sharer.attachment=i.asset_url||"",s.sharer.email=_.map(s.sharer.email,function(s){return s.email}),c.sendMail(s.sharer,function(s,n){return 200==n.statusCode&&n.response.success?(a.success(n.response.msg,"Success"),e.close("send"),u.go(u.current,null,{reload:!0}),void 0):400===n.statusCode&&!n.response.success&&_.isArray(n.response.result)?void _.each(n.response.result,function(s){a.warning(s.msg,"Warning")}):void a.error(n.response.msg,"Error")})},s.cancel=function(){e.dismiss("cancel")}}angular.module("tessaApp").controller("assetsShareModalCtrl",s),s.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","APIFactory","sharerFactory","asset_file","$state"]}();
!function(){"use strict";function e(e,s,i,t,o,n,l,a,c,u,r,d){e.item={},e.isUploadAll=!0,e.isClose=!1,e.privacy=!0;var p=(JSON.parse(r.get("user")),e.uploader=new t({url:o+n+"assets",method:"POST",headers:{Authorization:"Bearer "+c.getUserToken(),accesskey:l}}));p.filters.push({name:"customFilter",fn:function(e,s){return this.queue.length<10}}),p.onBeforeUploadItem=function(s){s.alias="files",u._id&&_.isUndefined(u.sub_id)?s.formData=[{parent_id:u._id,isPublic:e.privacy}]:u._id&&u.sub_id&&(s.formData=[{parent_id:u.sub_id,isPublic:e.privacy}])},p.onSuccessItem=function(e,s,i,t){d.success(s.response.msg,"Success")},p.onWhenAddingFileFailed=function(e,s,i){},p.onAfterAddingFile=function(e){},p.onCompleteAll=function(e){d.success("Media / File upload complete","Success"),a(function(){i.close("success")},1300)},e.uploadAll=function(){p.uploadAll(),e.isUploadAll=!1,e.isClose=!0},e.cancel=function(){i.dismiss("cancel")}}angular.module("tessaApp").controller("assetsUploadModalCtrl",e),e.$inject=["$scope","$state","$uibModalInstance","FileUploader","API_URL","API_VERSION","ACCESSKEY","$timeout","AuthFactory","$stateParams","localStorageService","toastr"]}();
!function(){"use strict";function e(e,i,t,c,s,n,o,a,d,l,v,r,m){function p(){m.reload()}function u(e){var i=v.open(encodeURI("https://chrome.google.com/webstore/detail/"+r),"_blank");i.focus()}e.device={},e.activeDevices=[],e.activeDevices=angular.copy(a),e.enableCasting=!0,e.displayInstallPlugin=!1,e.displayInCompatiblePlugin=!1,DetectRTC.screen.getChromeExtensionStatus(function(i){"not-supported"===i?(DetectRTC.screen.chromeMediaSource="desktop",t(function(){e.$apply(function(){e.displayInCompatiblePlugin=!0})},10)):"installed-enabled"!=i&&(DetectRTC.screen.chromeMediaSource="desktop",t(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),e.installPlugin=function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.webstore.install("https://chrome.google.com/webstore/detail/"+r,p,u)},e.pingSelectedDevice=function(e){e&&o.emit("pair:sendMessage",{msg:"Ping DEVICE: "+e.deviceUUID,deviceUUID:e.deviceUUID})},e.selectDevice=function(i){i.selected=!0,e.device=i,_.each(e.activeDevices,function(e){i.deviceUUID!==e.deviceUUID&&(e.selected=!1)})},e.connectDevice=function(){return e.device?(e.device.connected=!0,"audio/mp3"==d.asset_mimetype||"audio/mp4"==d.asset_mimetype?d.asset_type="audio":"video/mp4"==d.asset_mimetype||"video/x-flv"==d.asset_mimetype||"video/x-msvideo"==d.asset_mimetype||"video/x-ms-wmv"==d.asset_mimetype||"video/quicktime"==d.asset_mimetype||"video/3gpp"==d.asset_mimetype?d.asset_type="video":d.asset_type="none",d.deviceUUID=e.device.deviceUUID,d.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=d,o.emit("pair:getCode",e.device),i.close({device:e.device,msg:"mirror"}),void 0):void s.warning("WARNING","Please select device to cast!!!")},e.cancel=function(){i.dismiss("cancel")},o.on("pair:sendCode",function(i){_.find(e.activeDevices,{deviceUUID:i.deviceUUID})||e.activeDevices.push(i)}),o.on("disconnect",function(e){})}angular.module("tessaApp").controller("assetsMirrorModalCtrl",e),e.$inject=["$scope","$uibModalInstance","$timeout","$stateParams","toastr","assetsFctry","socket","activeDevices","asset_file","API_URL","$window","EXT_ID","$state"]}();
!function(){"use strict";function e(e,i,t,o,n,c,s,l,r,a,d,m,u,v){function p(i){i.requestFullscreen?i.requestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullScreen?i.webkitRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen(),e.isFullScreen=!0}function w(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,i=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled;i?p(document.documentElement):e&&p(document.documentElement)}function U(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),e.isFullScreen=!1}function f(){i.reload()}function h(e){var i=l.open(encodeURI("https://chrome.google.com/webstore/detail/"+u),"_blank");i.focus()}e.pdfName=n.media_name,e.file_type=n.asset_mimetype,e.device={},e.activeDevices=[],e.onMouseMoveResult="",e.displayInstallPlugin=!1,e.displayInCompatiblePlugin=!1,e.mirrorFile=d,e.mirrorDevice=m,e.isFullScreen=!1;var g,D=e.asset_file=n;if(DetectRTC.screen.getChromeExtensionStatus(function(i){"not-supported"===i?(DetectRTC.screen.chromeMediaSource="desktop",a(function(){e.$apply(function(){e.displayInCompatiblePlugin=!0})},10)):"installed-enabled"!=i&&(DetectRTC.screen.chromeMediaSource="desktop",a(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),$(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(i){var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;t?e.isFullScreen=!0:e.isFullScreen=!1}),"application/pdf"==n.asset_mimetype)e.pdfUrl=o.trustAsResourceUrl(n.asset_url);else if("text/plain"==n.asset_mimetype)e.pdfUrl=o.trustAsResourceUrl("https://docs.google.com/gview?url="+n.asset_url+"&embedded=true");else{var y=encodeURI(n.asset_url);e.pdfUrl=o.trustAsResourceUrl("https://view.officeapps.live.com/op/view.aspx?src="+y)}_.isEmpty(e.mirrorDevice)||a(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(e){})},1e3),e.enterFullScreen=function(){w()},e.exitFullScreen=function(){U()},e.stop=function(){r.cancel(g)},e.pingSelectedDevice=function(e){e&&s.emit("pair:sendMessage",{msg:"Ping DEVICE: "+e.deviceUUID,deviceUUID:e.deviceUUID})},e.selectDevice=function(i){e.device=i,e.device?(e.device.connected=!0,"audio/mp3"==D.asset_mimetype||"audio/mp4"==D.asset_mimetype?D.asset_type="audio":"video/mp4"==D.asset_mimetype||"video/x-flv"==D.asset_mimetype||"video/x-msvideo"==D.asset_mimetype||"video/x-ms-wmv"==D.asset_mimetype||"video/quicktime"==D.asset_mimetype||"video/3gpp"==D.asset_mimetype?D.asset_type="video":D.asset_type="none",D.deviceUUID=e.device.deviceUUID,D.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=D,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(i){s.emit("pair:getCode",e.device)})):w()},e.castScreen=function(){"audio/mp3"==D.asset_mimetype||"audio/mp4"==D.asset_mimetype?D.asset_type="audio":"video/mp4"==D.asset_mimetype||"video/x-flv"==D.asset_mimetype||"video/x-msvideo"==D.asset_mimetype||"video/x-ms-wmv"==D.asset_mimetype||"video/quicktime"==D.asset_mimetype||"video/3gpp"==D.asset_mimetype?D.asset_type="video":D.asset_type="none",D.deviceUUID=e.device.deviceUUID,D.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=D,s.emit("pair:getCode",e.device),a(function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.mirrorDevice.deviceUUID},function(e){})},1e3)},e.renameSelected=function(){var t=v.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/rename.html",controller:"assetsRenameModalCtrl",resolve:{asset_file:function(){return n}}});t.result.then(function(t){t&&(e.cancel(),i.reload())})},e.castModal=function(){var i=v.open({animation:!0,templateUrl:"./views/folder/cast.html",windowClass:"xd-modal",scope:e});i.result.then(function(i){e.asset_file&&("mirror"==i.msg&&(e.mirrorFile=!0,e.mirrorDevice=i.device),e.asset_file.deviceUUID=e.device.deviceUUID,e.asset_file.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=e.asset_file,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(i){s.emit("pair:getCode",e.device)}))})},e.moveSelected=function(){var e=v.open({animation:!0,windowClass:"xd-modal",templateUrl:"./views/folder/move.html",controller:"assetsMoveModalCtrl",resolve:{asset_file:function(){return n}}});e.result.then(function(e){e&&i.reload()})},e.cancel=function(){_.isEmpty(e.device)?_.isEmpty(e.mirrorDevice)||s.emit("pair:closePresent",{deviceUUID:e.mirrorDevice.deviceUUID}):s.emit("pair:closePresent",{deviceUUID:e.device.deviceUUID}),e.stop(),U(),!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(u,{action:"close",deviceUUID:e.device.deviceUUID},function(e){}),t.close("cancel")},e.installPlugin=function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.webstore.install("https://chrome.google.com/webstore/detail/"+u,f,h)},s.on("pair:sendCode",function(i){_.find(e.activeDevices,{deviceUUID:i.deviceUUID})||e.activeDevices.push(i)}),e.selecteDevices=function(i){i.selected=!0,e.device=i,_.each(e.activeDevices,function(e){i.deviceUUID!==e.deviceUUID&&(e.selected=!1)})},e.connectDevice=function(){return e.device?(e.device.connected=!0,"audio/mp3"==D.asset_mimetype||"audio/mp4"==D.asset_mimetype?D.asset_type="audio":"video/mp4"==D.asset_mimetype||"video/x-flv"==D.asset_mimetype||"video/x-msvideo"==D.asset_mimetype||"video/x-ms-wmv"==D.asset_mimetype||"video/quicktime"==D.asset_mimetype||"video/3gpp"==D.asset_mimetype?D.asset_type="video":D.asset_type="none",D.deviceUUID=e.device.deviceUUID,D.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=D,s.emit("pair:getCode",e.device),t.close({device:e.device,msg:"mirror"}),void 0):void toastr.warning("WARNING","Please select device to cast!!!")}}angular.module("tessaApp").controller("assetsDocsModalCtrl",e),e.$inject=["$scope","$state","$uibModalInstance","$sce","files","localStorageService","socket","$window","$interval","$timeout","mirrorFile","mirrorDevice","EXT_ID","$uibModal"]}();
!function(){"use strict";function e(e,i,o,t,c,s,n,a,r,d,l,m){console.log("assetsLightBoxModalCtrl: "),e.activeDevices=[],e.device={},e.mirrorFile=d,e.mirrorDevice=l,e.selectedFile=t,e.image_file=m,console.log("image_file: ",m),e.displayInstallPlugin=!1,e.displayInCompatiblePlugin=!1,c.on("pair:init",function(){}),c.on("pair:sendCode",function(i){_.find(e.activeDevices,{deviceUUID:i.deviceUUID})||e.activeDevices.push(i)}),DetectRTC.screen.getChromeExtensionStatus(function(i){"not-supported"===i?(DetectRTC.screen.chromeMediaSource="desktop",$timeout(function(){e.$apply(function(){e.displayInCompatiblePlugin=!0})},10)):"installed-enabled"!=i&&(DetectRTC.screen.chromeMediaSource="desktop",$timeout(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),e.cancelLightBox=function(){_.isEmpty(e.mirrorDevice)?c.emit("pair:closePresent",{deviceUUID:e.device.deviceUUID}):c.emit("pair:closePresent",{deviceUUID:e.mirrorDevice.deviceUUID}),_.isEmpty(e.mirrorDevice)?!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(a,{action:"close",deviceUUID:e.device.deviceUUID},function(e){}):!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(a,{action:"close",deviceUUID:e.mirrorDevice.deviceUUID},function(e){}),i.dismiss("cancel")},e.selectLightBoxDevice=function(i){e.device=i,console.log("$scope.device: ",e.device),e.device&&(e.device.connected=!0,"audio/mp3"==t.asset_mimetype||"audio/mp4"==t.asset_mimetype?t.asset_type="audio":"video/mp4"==t.asset_mimetype||"video/x-flv"==t.asset_mimetype||"video/x-msvideo"==t.asset_mimetype||"video/x-ms-wmv"==t.asset_mimetype||"video/quicktime"==t.asset_mimetype||"video/3gpp"==t.asset_mimetype?t.asset_type="video":t.asset_type="none",t.deviceUUID=e.device.deviceUUID,t.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=t,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(a,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(i){console.log("response: ",i),c.emit("pair:getCode",e.device)}))}}angular.module("tessaApp").controller("assetsLightBoxModalCtrl",e),e.$inject=["$scope","$uibModalInstance","$sce","files","socket","$window","type","EXT_ID","$uibModal","mirrorFile","mirrorDevice","image_file"]}();
!function(){"use strict";function e(e,t,r,a,s,i,o,c,n,u,p){e.hardwaresolutions=[],e.softwaresolutions=[],e.softwareshardattrib=[],e.softwaresscreenattrib=[],e.softwaresmediaattrib=[],e.compare={},e.comparelists=[],e.comparehardwarelists=[],e.compareattribute=[];p.getItem("ProductsCompare").then(function(a){console.log("data:",a),!r.isNull(a)||a.length>0?s.compareproducts=a:s.compareproducts=[],r.each(s.compareproducts,function(t,a){if(0==a&&(e.compare=t),e.compare.p_id){var s={};s.title=t.item_name,s.attributes=r.sortBy(t.attributes,"attribute"),s.image=t.img_default,s.price=t.sell_price,s.id=t.p_id,s.type=t.type,s._id=t._id,e.comparehardwarelists.push(s),e.hardwaresolutions.push(t.solution)}else if(t.hardware&&r.each(t.hardware,function(t){e.compareattribute.push(t)}),t.support&&t.support.length>0){var o=[],c=i("filter")(t.support,"Essential");r.each(c,function(e){o.push(e.product_detail.item_name)});var n=i("filter")(o,"Essential"),u=i("filter")(t.support,"Enterprise");r.each(t.support,function(e){r.each(n,function(r){r==e.product_detail.item_name&&(t.essential="Essential")}),r.each(u,function(r){e.product_detail.item_name==r.product_detail.item_name&&(t.enterprise="Enterprise")})})}t.tags&&t.tags.length>0}),e.softwaresolutions&&(e.softwaresolutions=r.flattenDeep(e.softwaresolutions)),e.compare.pb_id?async.waterfall([function(a){async.each(e.compareattribute,function(e,a){t.getProductAttribute(e.product_id,function(t,s){var i=[];200==s.statusCode&&s.response.success&&200==s.statusCode&&s.response.success&&(e.atrribute=r.sortBy(s.response.result.attribute_values,"attribute"),i=r.filter(s.response.result.attribute_values,{is_comparable:1}),i.length>0?e.comparable=1:e.comparable=0,a())})},function(t,i){r.each(s.compareproducts,function(t){e.indi={},e.indi.titles=[];var a=[];t.hardware&&r.each(t.hardware,function(e){1==e.comparable&&a.push(e)});var s=r.groupBy(a,"category_label"),i=r.groupBy(t.software,"category_label");e.indi.hardwaregroup=s,e.indi.softwaregroup=i,e.indi.titles.title=t.bundle_name,e.indi.titles.image=encodeURI(t.product_images[0].image_path),e.indi.price=t.upfront,e.indi.id=t.pb_id,e.indi.weekly=t.weekly,e.indi.enterprise=t.enterprise,e.indi.essential=t.essential,e.indi._id=t._id,e.comparelists.push(e.indi)}),a(null,e.comparelists)})},function(t,r){e.comparelist=compare.getListGroupBy(t,e.groupBy,"-")}]):e.comparehardware=compare.getListGroupBy(e.comparehardwarelists,e.groupBy,"-")}),e.removeItem=function(e){var t=r.findIndex(s.compareproducts,function(t){return t._id==e._id});s.compareproducts.splice(t,1),u.success("Successfully removed an item.","Success"),a.go(a.current,{},{reload:!0}),p.setItem("ProductsCompare",s.compareproducts)},e.toggle=!1,e.vewDetail=function(e){e.p_id?a.go("main.productDetailsHardware",{selected_id:e.p_id},{reload:!0}):e.pb_id&&a.go("main.productDetailsSolution",{selected_id:e.pb_id},{reload:!0})},e.comparisonShare=function(){var t,r=[];if(e.compare.pb_id)t="bundle",r=e.comparelist,console.log("$scope.comparelists:",e.comparelists);else if(e.compare.p_id){t="product";var a=e.compare.type;r=e.comparehardwarelists}var s=o.open({animation:!0,templateUrl:"./views/share.modal.html",size:"md",windowClass:"share-modal",controller:"ShareModalInstanceCtrl",resolve:{article:function(){return{compare_type:t,comparelist:r,type:a,comparelists:e.comparelists}},param:function(){return"compare"}}});s.result.then(function(){},function(){console.info("Modal dismissed at: "+new Date)})},e.addToCart=function(e){if(s.cartItems.length>=0)if(e.quantity=1,e.pb_id){if(0==e.upfront)u.error("Cannot add product when the values are 0","Error");else if(s.cartItems.length>=0){var t=r.filter(s.cartItems,{pb_id:e.pb_id});t.length>0?(t[0].quantity++,r.each(s.cartItems,function(e){e.pb_id==t[0].pb_id&&(e.quantity=t[0].quantity)}),u.success("Quantity Added","Success"),p.setItem("Cart",s.cartItems)):(u.success("Successfully Added","Success"),s.cartItems.push(e),p.setItem("Cart",s.cartItems))}}else{e.upfront=e.sell_price;var t=r.filter(s.cartItems,{p_id:e.p_id});t.length>0?(t[0].quantity++,r.each(s.cartItems,function(e){e.p_id==t[0].p_id&&(e.quantity=t[0].quantity)}),u.success("Quantity Added","Success"),p.setItem("Cart",s.cartItems)):(u.success("Successfully Added","Success"),s.cartItems.push(e),p.setItem("Cart",s.cartItems))}}}angular.module("tessaApp").controller("compareCtrl",e),e.$inject=["$scope","APIFactory","_","$state","$rootScope","$filter","$uibModal","localStorageService","$timeout","toastr","$localForage"]}();
!function(){"use strict";function e(e,s,o,n,r,t,a,i,c,u,l,d,p){var f=o.getCurrentUser(),m=JSON.parse(f);e.pw1="password",e.user=m,e.details={},e.social={},e.showFacebook=!0,e.showGoogle=!0,e.showTwitter=!0,e.showLinkedin=!0,e.showUpload=!1,e.timezone=[],e.newImage=!1,e.tab=1,e.setTab=function(s){e.tab=s},e.isSet=function(s){return e.tab===s},m.person_id&&async.waterfall([function(s){t.getTimeZone(function(o,n){200==n.statusCode&&n.response.success&&(e.timezone=n.response.result,s())})},function(s){t.personDetail(m.person_id,function(o,n){200==n.statusCode&n.response.success&&(e.details=n.response.result,s(null,e.details))})},function(s,o){t.getUserSocial(function(s,n){200==n.statusCode&n.response.success&&(e.social=n.response.result,e.showFacebook=!_.isEmpty(e.social.inappFacebook),e.showGoogle=!_.isEmpty(e.social.inappGoogle),e.showTwitter=!_.isEmpty(e.social.inappTwitter),e.showLinkedin=!_.isEmpty(e.social.inappLinkedIn),o(null,e.social))})}]),e.upload=function(s){s&&i.upload({url:c+u+"persons/"+e.details.person_id+"/upload-image",data:{person_img:e.details.image},method:"PUT"}).then(function(e){if(200===e.data.statusCode&&e.data.response.success)a.success("Image successfully uploaded","Success"),n.reload();else{if(400!==e.data.statusCode||e.data.response.success||!_.isArray(e.data.response.result))return void a.error(e.data.response.msg,"Error");_.each(e.data.response.result,function(e){a.warning(e.msg,"Warning")})}},function(e){},function(e){parseInt(100*e.loaded/e.total)})},e.removethumb=function(){e.showUpload=!1,e.details.image=null,e.newImage=!1},e.changeImage=function(e){},e.savePersonDetail=function(){async.waterfall([function(s){m.person_id?t.updatePersonel(m.person_id,e.details,function(e,o){if(200==o.statusCode&&o.response.success)a.success(o.response.msg,"Success"),s(null,m.person_id),n.reload();else{if(400!==o.statusCode||o.response.success||!_.isArray(o.response.result))return void a.error(o.response.msg,"Error");_.each(o.response.result,function(e){a.warning(e.msg,"Warning")})}}):t.savePersonel(e.details,function(e,o){if(200==o.statusCode&&o.response.success)a.success(o.response.msg,"Success"),s(null,o.response.result),n.reload();else{if(400!==o.statusCode||o.response.success||!_.isArray(o.response.result))return void a.error(o.response.msg,"Error");_.each(o.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(s,o){e.newImage&&e.details.image&&i.upload({url:c+u+"persons/"+s+"/upload-image",data:{person_img:e.details.image},method:"PUT"}).then(function(e){if(200===e.data.statusCode&&e.data.response.success)a.success("Image successfully uploaded","Success"),n.reload();else{if(400!==e.data.statusCode||e.data.response.success||!_.isArray(e.data.response.result))return void a.error(e.data.response.msg,"Error");_.each(e.data.response.result,function(e){a.warning(e.msg,"Warning")})}},function(e){console.log("Error status: "+e.status)},function(e){parseInt(100*e.loaded/e.total)})}])},e.saveUsername=function(){l.openConfirm({templateUrl:"./views/confirmDialog.html",scope:s,className:"ngdialog-theme-default"}).then(function(){t.updateUsername(s.profile,function(e,s){if(200==s.statusCode&&s.response.success)a.success("Successfully Update","Success"),n.reload();else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void a.error(resp.data.response.msg,"Error");_.each(s.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(e){console.log("Modal promise close: ")})},e.savePassword=function(){l.openConfirm({templateUrl:"./views/confirmDialog.html",scope:s,className:"ngdialog-theme-default"}).then(function(){t.updatePassword(e.details,function(e,s){if(200==s.statusCode&&s.response.success)a.success("Successfully Update Password","Success"),n.reload();else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void a.error(resp.data.response.msg,"Error");_.each(s.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(e){console.log("Modal promise close: ")})},e.addRecoveryEmail=function(){l.openConfirm({templateUrl:"./views/confirmDialog.html",scope:e,className:"ngdialog-theme-default"}).then(function(){humanFactory.addRecoveryPassword({email_recovery:e.details.recovery_email}).then(function(e){if(200==e.statusCode&&e.response.success)a.success("Successfully Update","Success");else{if(400!==e.statusCode||e.response.success||!_.isArray(e.response.result))return void a.error(resp.data.response.msg,"Error");_.each(e.response.result,function(e){a.warning(e.msg,"Warning")})}})},function(e){console.log("Modal promise close: ")})},e.unlinkAccount=function(e){d.unlink(e,{method:"POST",url:c+u+"auth/unlink"}).then(function(s){a.success("You have successfully unlinked "+e+" to your profile!"),r(function(){n.reload()},400)})["catch"](function(e){error.message?a.error(error.message):error.data?a.error(error.data.message,error.status):a.error(error)})},e.viewProfile=function(e,s){if("facebook"==e){var o=p.open("https://www.facebook.com/app_scoped_user_id/"+s+"/","_blank");o.focus()}else if("google"==e){var o=p.open("https://plus.google.com/"+s,"_blank");o.focus()}else if("linkedin"==e){var o=p.open("http://www.linkedin.com/profile/view?id="+s,"_blank");o.focus()}else if("twitter"==e){var o=p.open("https://twitter.com/intent/user?user_id="+s,"_blank");o.focus()}},e.authenticate=function(e){d.link(e).then(function(e){var s=e.data;a.success(s.msg),r(function(){n.reload()},400)})["catch"](function(e){e.message?console.log(e.message):e.data?console.log(e.data.message,e.status):console.log(e)})}}angular.module("tessaApp").controller("ProfileCtrl",e),e.$inject=["$scope","$rootScope","AuthFactory","$state","$timeout","APIFactory","toastr","Upload","API_URL","API_VERSION","ngDialog","$auth","$window"]}();
!function(){"use strict";function s(s,e,r,o){s.detail={},s.forgotpass=function(){r.forgotPassword({email:s.detail.email}).then(function(s){if(200==s.statusCode&&s.response.success)o.success(s.response.msg,"Success"),e.reload();else{if(400!==s.statusCode||s.response.success||!_.isArray(s.response.result))return void o.error(s.response.msg,"Error");_.each(s.response.result,function(s){o.warning(s.msg,"Warning")})}})}}angular.module("tessaApp").controller("ForgotPasswordCtrl",s),s.$inject=["$scope","$state","AuthFactory","toastr"]}();
!function(){"use strict";function e(e,t,s,i,n,c,o,l,u){function m(){t.reload()}function r(e){var t=$window.open(encodeURI("https://chrome.google.com/webstore/detail/"+EXT_ID),"_blank");t.focus()}function a(t){t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen(),e.isFullScreen=!0}function d(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement,t=document.fullscreenEnabled||document.mozFullScreenEnabled||document.webkitFullscreenEnabled;t?a(document.documentElement):e&&a(document.documentElement)}function p(){document.exitFullscreen?document.exitFullscreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen(),e.isFullScreen=!1}e.device={};var v={};e.config={autoPlay:!0,theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}},e.activeDevices=[],e.isFullScreen=!1,e.displayInstallPlugin=!1,e.displayInCompatiblePlugin=!1;n.getPublicAsset(i._id).then(function(t){if(200!=t.statusCode||!t.response.success)return void u.error(t.response.msg,"Error");var s=t.response.result;if(v=s,e.pdfName=s.media_name,e.file_type=s.asset_mimetype,"application/pdf"==s.asset_mimetype)e.pdfUrl=l.trustAsResourceUrl(s.asset_url);else if("text/plain"==s.asset_mimetype)e.pdfUrl=l.trustAsResourceUrl("https://docs.google.com/gview?url="+s.asset_url+"&embedded=true");else if("image/jpeg"==s.asset_mimetype||"image/jpg"==s.asset_mimetype||"image/gif"==s.asset_mimetype||"image/x-ms-bmp"==s.asset_mimetype||"image/png"==s.asset_mimetype){var i=encodeURI(s.asset_url);e.pdfUrl=i}else if("audio/mp3"==s.asset_mimetype||"audio/mp4"==s.asset_mimetype)e.audio=!0,e.config.sources=[{src:l.trustAsResourceUrl(s.asset_url),type:s.asset_mimetype}];else if("video/mp4"==s.asset_mimetype||"video/x-flv"==s.asset_mimetype||"video/x-msvideo"==s.asset_mimetype||"video/x-ms-wmv"==s.asset_mimetype||"video/quicktime"==s.asset_mimetype||"video/3gpp"==s.asset_mimetype)e.audio=!1,e.config.sources=[{src:l.trustAsResourceUrl(s.asset_url),type:s.asset_mimetype}];else{var i=encodeURI(s.asset_url);e.pdfUrl=l.trustAsResourceUrl("https://view.officeapps.live.com/op/view.aspx?src="+i)}}),e.installPlugin=function(){!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.webstore.install("https://chrome.google.com/webstore/detail/"+EXT_ID,m,r)},o.on("pair:sendCode",function(t){_.find(e.activeDevices,{deviceUUID:t.deviceUUID})||e.activeDevices.push(t)}),e.selecteDevices=function(t){t.selected=!0,e.device=t,_.each(e.activeDevices,function(e){t.deviceUUID!==e.deviceUUID&&(e.selected=!1)})},e.selectDevice=function(t){e.device=t,e.device?(e.device.connected=!0,"audio/mp3"==v.asset_mimetype||"audio/mp4"==v.asset_mimetype?v.asset_type="audio":"video/mp4"==v.asset_mimetype||"video/x-flv"==v.asset_mimetype||"video/x-msvideo"==v.asset_mimetype||"video/x-ms-wmv"==v.asset_mimetype||"video/quicktime"==v.asset_mimetype||"video/3gpp"==v.asset_mimetype?v.asset_type="video":v.asset_type="none",v.deviceUUID=e.device.deviceUUID,v.url=window.location.origin+window.location.pathname+"presentation.html?s="+e.device.deviceUUID,e.device.asset_file=v,!!navigator.webkitGetUserMedia&&!!window.chrome&&!!chrome.webstore&&!!chrome.webstore.install&&chrome.runtime.sendMessage(EXT_ID,{openplugin:window.location.origin+window.location.pathname,deviceUUID:e.device.deviceUUID},function(t){o.emit("pair:getCode",e.device)})):d()},DetectRTC.screen.getChromeExtensionStatus(function(t){"not-supported"===t?(DetectRTC.screen.chromeMediaSource="desktop",s(function(){e.$apply(function(){e.displayInCompatiblePlugin=!0})},10)):"installed-enabled"!=t&&(DetectRTC.screen.chromeMediaSource="desktop",s(function(){e.$apply(function(){e.displayInstallPlugin=!0})},10))}),$(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(t){var s=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;document.exitFullscreen||document.mozCancelFullScreen||document.webkitExitFullscreen;s?e.isFullScreen=!0:e.isFullScreen=!1}),e.enterFullScreen=function(){d()},e.exitFullScreen=function(){p()}}angular.module("tessaApp").controller("publicShareCtrl",e),e.$inject=["$scope","$state","$timeout","$stateParams","assetsFctry","APIFactory","socket","$sce","toastr"]}();
!function(){"use strict";var r=function(r){return function(t,n){return r.uniqBy(t,function(r){return r[n]})}},t=function(){return function(r,t){for(var n="test",e=0;e<r.length;e++);return n}};angular.module("tessaApp").filter("duplicates",["_",r]).filter("count",[t]).filter("ellipsis",function(){return function(r,t,n,e){if(!r)return"";if(n=parseInt(n,10),!n)return r;if(r.length<=n)return r;if(r=r.substr(0,n),t){var u=r.lastIndexOf(" ");u!=-1&&("."!=r.charAt(u-1)&&","!=r.charAt(u-1)||(u-=1),r=r.substr(0,u))}return r+(e||" ")}}).filter("propsFilter",function(){return function(r,t){var n=[];return angular.isArray(r)?r.forEach(function(r){for(var e=!1,u=Object.keys(t),i=0;i<u.length;i++){var f=u[i],o=t[f].toLowerCase();if(r[f].toString().toLowerCase().indexOf(o)!==-1){e=!0;break}}e&&n.push(r)}):n=r,n}})}();
!function(o,n){"undefined"!=typeof module&&module.exports?module.exports=n(require("angular"),o):"function"==typeof define&&define.amd?define(["angular"],function(t){return n(t,o)}):n(o.angular,o)}(this,function(o,n,t){"use strict";function i(o){return o.complete&&("undefined"==typeof o.naturalWidth||0!==o.naturalWidth)}function e(o){return Array.prototype.slice.call(o)}var r={gridWidth:300,gutterSize:10,gridNo:"auto",direction:"ltor",refreshOnImgLoad:!0,cssGrid:!1,performantScroll:!1,pageSize:"auto",scrollContainer:"body",infiniteScrollDelay:3e3,infiniteScrollDistance:100},a=o.element,l=function(o){return o.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},s={visibility:"hidden",opacity:0,top:0,left:0,width:""},d=function(){var o=a(n);return function(n){return o[0]=n,o}}();return a(document.head).append("<style>.ag-no-transition{-webkit-transition: none !important;transition: none !important;} .angular-grid{position : relative;} .angular-grid > *{opacity : 0} .angular-grid > .angular-grid-item{opacity : 1}</style>"),o.module("angularGrid",[]).directive("angularGrid",["$timeout","$window","$q","angularGridInstance",function(c,f,g,u){return{restrict:"A",scope:{model:"=angularGrid",dep_gridWidth:"=gridWidth",dep_gutterSize:"=gutterSize",dep_refreshOnImgLoad:"=refreshOnImgLoad",dep_direction:"=direction",dep_cssGrid:"=cssGrid",dep_options:"=angularGridOptions",dep_gridNo:"=gridNo",dep_agId:"@angularGridId",gridNo:"=agGridNo",gridWidth:"=agGridWidth",gutterSize:"=agGutterSize",refreshOnImgLoad:"=agRefreshOnImgLoad",direction:"=agDirection",cssGrid:"=agCssGrid",options:"=agOptions",agId:"@",pageSize:"=agPageSize",performantScroll:"=agPerformantScroll",scrollContainer:"@agScrollContainer",infiniteScroll:"&agInfiniteScroll",infiniteScrollDistance:"=agInfiniteScrollDistance",infiniteScrollDelay:"=agInfiniteScrollDelay"},link:function(h,p,m){function v(){A={},Object.keys(r).forEach(function(o){h[o]!==t?A[o]=h[o]:h["dep_"+o]!==t&&(A[o]=h["dep_"+o])}),A=o.extend({},r,A,h.options||h.dep_options),A.cssGrid&&(A.gutterSize=0),"auto"==A.pageSize&&(A.pageSize=n.offsetWidth>=768?2:3)}function S(o,n){n=n||document.body;var t=0,i=0;if(o.offsetParent)do t+=o.offsetLeft,i+=o.offsetTop,o=o.offsetParent;while(o&&o!=n);return{left:t,top:i}}function I(){var o=a(document.querySelector(A.scrollContainer)),n=o[0];return{height:n.offsetHeight,scrollHeight:n.scrollHeight,startFrom:S(P,n).top,$elm:"body"==A.scrollContainer?k:o}}function C(o,n,t){B.pageInfo=[{from:0}];var i,e,r,a=A.pageSize,l=B.scrollContInfo.height,s=l*a,d=Math.ceil(n/s),c=0;for(c=0;c<d;c++)for(var f=0,g=o.length;f<g;f++)if(i=o[f],e=c?s*c:0,r=s*(c+1),i.bottom<e||i.top>r){if(i.top>r)break}else B.pageInfo[c]||(B.pageInfo[c]={from:f}),B.pageInfo[c].to=f;B.pageInfo=B.pageInfo.map(function(o,n){var t=Math.max(n-1,0),i=Math.min(n+1,B.pageInfo.length-1);return{from:B.pageInfo[t].from,to:B.pageInfo[i].to}})}function y(o){var n,t,i,e;for(i=0,e=N.length;i<e;i++)t=d(N[i]),n=t.data(),n.$scope&&(t.data("_agOldWatchers",n.$scope.$$watchers),n.$scope.$$watchers=[]);for(i=0,e=o.length;i<e;i++)n=d(o[i]).data(),n.$scope&&(n.$scope.$$watchers=n._agOldWatchers||[],n.$scope.$digest())}function $(o){B.lastScrollPosition=o;var n;if(!B.isBusy){var t=0,i=A.pageSize;if(o>B.scrollContInfo.startFrom+B.scrollContInfo.height*i&&(t=Math.floor((o-B.scrollContInfo.startFrom)/(B.scrollContInfo.height*i))),t!=B.lastPage){B.lastPage=t;var e=B.pageInfo[t];e&&(p.children().detach(),n=Array.prototype.slice.call(N,e.from,e.to+1),y(n),p.append(n))}}}function w(){clearTimeout(B.infiniteScrollTimeout),B.isLoading=!1}function z(o){if(!B.isLoading&&h.model.length){var n=B.scrollContInfo.scrollHeight,t=B.scrollContInfo.height;o>=n-t*(1+A.infiniteScrollDistance/100)&&(B.isLoading=!0,h.infiniteScroll(),B.infiniteScrollTimeout=setTimeout(w,A.infiniteScrollDelay))}}function L(){var o=this.scrollTop||this.scrollY;A.performantScroll&&$(o),h.infiniteScroll&&z(o)}function G(){var o,n=P.offsetWidth;if(A.cssGrid){o=a(N[0]).clone(),o.css(s).addClass("ag-no-transition ag-clone"),p.append(o);var t=o[0].offsetWidth;return o.remove(),{no:t?Math.floor((n+12)/t):0,width:t}}var i="auto"==A.gridNo?A.gridWidth:Math.floor(n/A.gridNo)-A.gutterSize,e="auto"==A.gridNo?Math.floor((n+A.gutterSize)/(i+A.gutterSize)):A.gridNo,r=(n+A.gutterSize)%(i+A.gutterSize);return i+=Math.floor(r/e),{no:e,width:i}}function W(n,t){var r=t.beforeLoad||o.noop,a=t.onLoad||o.noop,l=t.isLoaded||o.noop,s=t.onFullLoad||o.noop,d=t.ignoreCheck||o.noop,c=n.find("img"),f=[];e(c).forEach(function(o){o.src&&(r(o),i(o)||d(o)?l(o):f.push(g(function(n,t){o.onload=function(){a(o),n()},o.onerror=t})))}),f.length?g.all(f).then(s,s):setTimeout(function(){s()},0)}function x(){if(N&&N.length){H++;var n,t=G(),i=t.width,r=t.no;if(r){var l=[];for(n=0;n<r;n++)l.push(0);e(N).forEach(function(o){var n=d(o);e(n.find("img")).forEach(function(o){var t=a(o);if(t.hasClass("img-loaded"))return void t.css("height","");n.addClass("ag-no-transition"),n.css("width",i+"px");var e=t.attr("actual-width")||t.attr("data-actual-width"),r=t.attr("actual-height")||t.attr("data-actual-height");e&&r&&t.css("height",r*o.width/e+"px")}),n.removeClass("ag-no-transition")});var c=N.clone();c.addClass("ag-no-transition ag-clone");var f=o.extend({},s);f.width=i+"px",c.css(f),p.append(c),function(o){W(c,{ignoreCheck:function(o){return!d(o).hasClass("img-loaded")},onFullLoad:function(){if(o<H)return void c.remove();var n,t,e,a=[],s=[];for(t=0,e=c.length;t<e;t++)a.push(c[t].offsetHeight);for(t=0,e=N.length;t<e;t++){n=d(N[t]);var f=a[t],g=Math.min.apply(Math,l),u=l.indexOf(g);l[u]=g+f+A.gutterSize;var m=u*(i+A.gutterSize),v={position:"absolute",top:g+"px"};"rtol"==A.direction?v.right=m+"px":v.left=m+"px",v.width=i+"px",s.push({top:g,bottom:g+f}),n.css(v).addClass("angular-grid-item")}var S=Math.max.apply(Math,l);p.css("height",S+"px"),c.remove(),(A.performantScroll||h.infiniteScroll)&&(B.scrollContInfo=I()),A.performantScroll&&(B.lastPage=null,C(s,S,r),B.isBusy=!1,$(B.lastScrollPosition||0)),w()}})}(H)}}}function _(){var o=!1;e(N).forEach(function(n){var t=a(n),i=t.find("img");i.length&&(t.addClass("img-loading"),W(t,{beforeLoad:function(o){d(o).addClass("img-loading")},isLoaded:function(o){d(o).removeClass("img-loading").addClass("img-loaded")},onLoad:function(n){!o&&A.refreshOnImgLoad&&(o=!0,c(function(){x(),o=!1},100)),d(n).removeClass("img-loading").addClass("img-loaded")},onFullLoad:function(){t.removeClass("img-loading").addClass("img-loaded")}}))})}function b(){return a(e(p.children()).filter(function(o){return!d(o).hasClass("ag-clone")}))}function O(){var o=e(N).filter(function(o){return d(o).hasClass("ng-leave")});return g(function(n){o.length?d(o[0]).one("webkitTransitionEnd transitionend msTransitionEnd oTransitionEnd",function(){c(function(){N=b(),n()})}):n()})}function T(){B.isBusy=!0,c(function(){N=b(),O().then(function(){_(),c(function(){x()})})})}function M(){v(),N&&x()}function E(){B.isBusy=!0;var o=P.offsetWidth;q!=o&&(q=o,D&&c.cancel(D),D=c(function(){A.performantScroll&&(p.children().detach(),p.append(N)),x()},100))}var N,D,P=p[0],k=a(f),F=h.agId||h.dep_agId,H=0;p.addClass("angular-grid");var A;["gridWidth","gutterSize","refreshOnImgLoad","direction","options","cssGrid","gridNo","agId"].forEach(function(o){var n=l(o),i="ag-"+l(o);"options"==o&&(n="angular-grid-options"),"agId"==o&&(n="angular-grid-id",i="ag-id"),h["dep_"+o]!==t&&console&&console.warn&&console.warn(n+" is deprecated. Use "+i+" instead in template.")}),v();var B={};setTimeout(function(){B.scrollContInfo=I(),B.scrollContInfo.$elm.on("scroll",L)},0),h.$watch("model",T,!0),h.$watch("options",M,!0),Object.keys(r).forEach(function(o){h[o]!==t&&h.$watch(o,M)});var q=P.offsetWidth;k.on("resize",E),F&&(u[F]={refresh:function(){T()},handleScroll:function(o){A.performantScroll&&$(o),h.infiniteScroll&&z(o)}}),h.$on("$destroy",function(){F&&delete u[F],k.off("resize",E),clearTimeout(B.infiniteScrollTimeout),B.scrollContInfo&&B.scrollContInfo.$elm.off("scroll",L)})}}}]).factory("angularGridInstance",function(){var o={};return o}).name});
!function(){"use strict";angular.module("tessaApp").directive("errSrc",function(){return{transclude:!0,link:function(n,e,t){n.$watch(function(){return t.ngSrc},function(n){n||e.attr("src",t.errSrc)}),e.bind("error",function(){e.attr("src",t.errSrc)})}}}).directive("ngPrint",function(){function n(n,r,i){r.on("click",function(){var n=document.getElementById(i.printElementId);n&&e(n)}),window.onafterprint=function(){t.innerHTML=""}}function e(n){var e=n.cloneNode(!0);t.innerHTML="",t.appendChild(e),window.print()}var t=document.getElementById("printSection");return t||(t=document.createElement("div"),t.id="printSection",document.body.appendChild(t)),{link:n,restrict:"A"}}).directive("appHeader",function(){return{restrict:"AE",replace:!0,templateUrl:"./views/header.html",controller:"headerCtrl"}}).directive("imageonload",function(){return{restrict:"AE",link:function(n,e,t){e.on("load",function(){e.removeClass("spinner-hide"),e.addClass("spinner-show"),e.parent().find("span").remove()}),n.$watch("ngSrc",function(){e.addClass("spinner-hide")})}}}).directive("lightboxDirective",function(){return{restrict:"E",transclude:!0,template:"<section ng-transclude></section>"}}).directive("ngScrollEvent",["$parse","$window",function(n,e){return function(t,r,i){var c,o,l=n(i.ngScrollEvent),a=r[0],u="scroll",d={x:0,y:0},s=function(){o=function(n){d.x=a.scrollLeft,d.y=a.scrollTop,p(n),f(),v(n,!1)},r.bind(u,o)},p=function(n){c=e.setInterval(function(){d.x==a.scrollLeft&&d.y==a.scrollTop?(e.clearInterval(c),s(),v(n,!0)):(d.x=a.scrollLeft,d.y=a.scrollTop)},INTERVAL_DELAY)},f=function(){r.unbind(u,o)},v=function(n,e){t.$apply(function(){l(t,{$event:n,isEndEvent:e})})};s()}}]).directive("ngBooleanRadio",function(){return{require:"ngModel",link:function(n,e,t,r){r.$formatters.push(function(n){return n===!0?"true":n===!1?"false":void 0}),r.$parsers.push(function(n){return"true"===n||"false"!==n&&void 0})}}}).directive("when-scrolled",function(){return function(n,e,t){var r=e[0];e.bind("scroll",function(){r.scrollTop+r.offsetHeight>=r.scrollHeight&&n.$apply(t.whenScrolled)})}}).directive("ngRepeatEndWatch",function(){return{restrict:"A",scope:{},link:function(n,e,t){if(!t.ngRepeat)throw"ngRepeatEndWatch: `ngRepeat` Directive required to use this Directive";n.$parent.$last&&(""!==t.ngRepeatEndWatch?"function"==typeof n.$parent.$parent[t.ngRepeatEndWatch]?n.$parent.$parent[t.ngRepeatEndWatch]():n.$parent.$parent[t.ngRepeatEndWatch]=!0:n.$parent.$parent.ngRepeatEnd=!0)}}}).directive("whenScrolled",function(){return function(n,e,t){var r=e[0];e.bind("scroll",function(){r.scrollTop+r.offsetHeight>=r.scrollHeight&&n.$apply(t.whenScrolled)})}})}();
!function(r,n){"use strict";var e=function(){var r=function(r,n){for(var e=[],o=0;o<r;o++)e.push(n);return e},n=function(n,e){var o={};for(var t in n){var i=n[t];for(var f in i)if("object"!=typeof i[f])o[f]||(o[f]=r(n.length,e)),o[f][t]=i[f];else{o[f]||(o[f]={});for(var a in i[f])o[f][a]||(o[f][a]=r(n.length,e)),o[f][a][t]=i[f][a]}}return o},e=function(r,e,o){var t=[],i=[];for(var f in r){var a=r[f],u=!1;for(var c in i)if(i[c].groupName===a[e]){i[c].objects.push(a),u=!0;break}if(!u){var v={groupName:a[e],objects:[a]};i.push(v)}}for(var s in i)t.push(n(i[s].objects,o));return t};return{getList:n,getListGroupBy:e}}();r.compare=e,"function"==typeof define&&define.amd&&define("compare",[],function(){return e})}(window);
!function(){"use strict";function n(n,t,u,l,o){var c={};return c.articleItems=[],c.allitems=[],c.getArticles=function(n,t){o.all("articleinfo").customGET("",n).then(function(n){t(null,n)},function(n){t(n,null)})},c.getArticleDetail=function(n,t){o.all("articleinfo").customGET(n).then(function(n){t(null,n)},function(n){t(n,null)})},c.getArticleTags=function(n,t){o.all("article/"+n+"/tags").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getProductBundle=function(n){o.all("product-bundle").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getProductBundleStatus=function(n){return o.all("product-bundle?status="+n).customGET().then(function(n){return n},function(n){return n.data})},c.getProductStatus=function(n){return o.all("product?status="+n).customGET().then(function(n){return n},function(n){return n.data})},c.getAllTags=function(n){o.all("tags").customGET().then(function(t){n(t)})},c.getBundleTag=function(n,t){o.all("product-bundle/"+n+"/tags").customGET().then(function(n){t(n)})},c.getDetailSolution=function(n,t){o.all("product-bundle/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getProductDetail=function(n,t){o.all("product/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getProduct=function(n){o.all("product").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.searchProduct=function(n,u){var l=t.filter(c.allitems,function(t){var u=new RegExp(n,"ig");return t.item_name.match(u)});u(l)},c.getHardware=function(n,u){o.all("product").customGET().then(function(l){u(t.filter(l),{productType_id:n})})},c.getCategory=function(n){o.all("categories").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getProductType=function(n){o.all("producttype").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getAll=function(n){return o.all("filters").customGET("",{filter:"all",value:n}).then(function(n){return n},function(n){return n.data})},c.getAllPerson=function(n){o.all("persons").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.personDetail=function(n,t){o.all("persons/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.savePersonel=function(n,t){return o.all("persons").customPOST(n).then(function(n){t(null,n)},function(n){t(n,null)})},c.updatePersonel=function(n,t,u){return o.all("persons/"+n).customPUT(t).then(function(n){u(null,n)},function(n){u(n,null)})},c.updateUsername=function(n,t){return o.all("user/username").customPUT(n).then(function(n){t(null,n)},function(n){return n})},c.updatePassword=function(n){return o.all("user/password").customPUT(n).then(function(n){callback(null,n)},function(n){callback(n,null)})},c.getProductAttribute=function(n,t){o.all("product/"+n+"/attributes").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.saveCompany=function(n,t){o.all("companyinfo").customPOST(n).then(function(n){t(null,n)},function(n){t(n,null)})},c.getCompany=function(n){o.all("companyinfo").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.companyDetail=function(n,t){o.all("companyinfo/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.saveQuote=function(n,t){o.all("quoteinfo/").customPOST(n).then(function(n){t(null,n)},function(n){t(n,null)})},c.getAllQuotes=function(n){o.all("quoteinfo/").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getQuoteDetail=function(n,t){o.all("quoteinfo/"+n).customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getCountries=function(n){o.all("countries").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getProdCateg=function(n,t){o.all("product/"+n+"/category").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getRelatedProduct=function(n,t){o.all("product/"+n+"/related").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getRelatedSolutions=function(n,t){o.all("product-bundle/"+n+"/related").customGET().then(function(n){t(null,n)},function(n){t(n,null)})},c.getAllUserAccounts=function(n){return o.all("useraccounts").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getUserSocial=function(n){return o.all("auth/me").customGET().then(function(t){n(null,t)},function(n){return n})},c.getTimeZone=function(n){return o.all("timezones").customGET().then(function(t){n(null,t)},function(t){n(t,null)})},c.getProductBundles=function(n){return o.all("product-bundle").customGET("",n).then(function(n){return n},function(n){return n.data})},c.getProducts=function(n){return o.all("product").customGET("",n).then(function(n){return n},function(n){return n.data})},c}function t(){var n=[],t=function(t){n.push(t)},u=function(){return n};return{addExperience:t,getAllExperience:u}}angular.module("tessaApp").factory("APIFactory",n).service("serviceTest",t),n.$inject=["$http","_","API_URL","API_VERSION","Restangular"],t.$inject=[]}();
!function(){"use strict";function e(e,t,r,n,o,u,a,c,i,s){return{authenticateAccount:function(e){return u.all("session").customPOST(e).then(function(e){return e},function(e){return e.data})},setUserToken:function(e){a.set("token",e)},getUserToken:function(){return a.get("token")},setCurrentUser:function(e){a.set("appuser",JSON.stringify(e))},getCurrentUser:function(){return a.get("appuser")},logout:function(){return u.all("session").customDELETE().then(function(e){return a.remove("label"),a.remove("hardtype"),a.remove("Payment"),a.remove("token"),a.remove("appuser"),a.remove("articlefilter"),s.removeItem("ProductsCompare"),s.removeItem("Cart"),s.removeItem("SearchData"),s.removeItem("Articles"),s.removeItem("Bundles"),s.removeItem("Products"),s.removeItem("allData"),t.$broadcast("app:reload"),i.signOut(),e},function(e){return e.data})},forgotPassword:function(e){return u.all("forgot_password").customPOST(e).then(function(e){return e},function(e){return e})},resendVerification:function(e){return u.all("resend_verification").customPOST(e).then(function(e){return e},function(e){return e})},isVerifiedContact:function(e){return u.all("users/"+e+"/verify").customGET().then(function(e){return e},function(e){return e})},verifyContact:function(e){return u.all("users/"+e+"/verify").customPOST().then(function(e){return e},function(e){return e})}}}function t(e,t,r,n,o,u,a){return{request:function(e){if(e.headers=e.headers||{},e.headers.accesskey=o,u.get("token")){var t=u.get("token");JSON.parse(u.get("user"));e.headers.Authorization="Bearer "+t}return e},response:function(e){if(u.get("token")){var t=u.get("token");a.isTokenExpired(t)&&(u.remove("Cart"),u.remove("label"),u.remove("hardtype"),u.remove("Payment"),u.remove("token"),u.remove("appuser"),r.path("/login"))}return e},responseError:function(t){return 401===t.status&&(e.$broadcast("unauthorized"),r.path("/login")),t}}}function r(e,t){var r=0;return{request:function(n){return 1===++r&&t.$broadcast("loading:progress"),n||e.when(n)},response:function(n){return 0===--r&&t.$broadcast("loading:finish"),n||e.when(n)},responseError:function(n){return 0===--r&&t.$broadcast("loading:finish"),e.reject(n)}}}angular.module("tessaApp").factory("authInterceptor",t).factory("AuthFactory",e).factory("httpInterceptor",r),t.$inject=["$rootScope","$q","$location","$injector","ACCESSKEY","localStorageService","jwtHelper"],e.$inject=["$http","$rootScope","_","API_URL","API_VERSION","Restangular","localStorageService","$q","$frontierAnalytics","$localForage"],r.$inject=["$q","$rootScope"]}();
!function(){"use strict";function n(n,t,u,o,c){return{shareExperience:function(n,t){c.all("sharer").customPOST(n).then(function(n){t(null,n)},function(n){t(n.data,null)})},htmltoPDF:function(n,t){c.all("htmltopdf").customPOST(n).then(function(n){t(null,n)},function(n){t(n.data,null)})},sendMail:function(n,t){c.all("sendMail").customPOST(n).then(function(n){t(null,n)},function(n){t(n.data,null)})}}}angular.module("tessaApp").factory("sharerFactory",n).factory("_",["$window",function(n){return n._}]).factory("jQuery",["$window",function(n){return n.jQuery}]).factory("PDFJS",["$window",function(n){return n.PDFJS}]).factory("async",["$window",function(n){return n.async}]),n.$inject=["$http","_","API_URL","API_VERSION","Restangular"]}();
!function(){function t(t,n,e){return{shareAssetFile:function(n,e){return t.all("assets/"+n+"/share").customPOST(e).then(function(t){return t},function(t){return t.data})},getSharedAssetFile:function(n){return t.all("assets/"+n+"/share").customGET().then(function(t){return t},function(t){return t.data})},removeSharedAssetFile:function(n){return t.all("assets/"+n+"/share").customDELETE().then(function(t){return t},function(t){return t.data})},publicSharedAssetFile:function(n,e){return t.all("assets/"+n+"/share?action="+e).customPUT().then(function(t){return t},function(t){return t.data})},getAllAssets:function(n){return t.all("assets").customGET("",n).then(function(t){return t},function(t){return t.data})},deleteAssetFile:function(n){return t.all("assets").customDELETE(n).then(function(t){return t},function(t){return t.data})},getPublicAsset:function(n){return t.all("assets/"+n+"/shared").customGET().then(function(t){return t},function(t){return t.data})},trashAssetFile:function(n){return t.all("assets/"+n+"/trash").customDELETE().then(function(t){return t},function(t){return t.data})},starredAssetFile:function(n){return t.all("assets/"+n+"/starred").customPUT().then(function(t){return t},function(t){return t.data})},restoreAssetFile:function(n){return t.all("assets/"+n+"/restore").customPUT().then(function(t){return t},function(t){return t.data})},moveAssetFile:function(n,e){return t.all("assets/"+n+"/move/"+e).customPUT().then(function(t){return t},function(t){return t.data})},updateAssetFile:function(n,e){return t.all("assets/"+n).customPUT(e).then(function(t){return t},function(t){return t.data})},getFolderAssets:function(n){return t.all("assets_folders").customGET(n).then(function(t){return t},function(t){return t.data})},createFolder:function(n){return t.all("assets_folders").customPOST(n).then(function(t){return t},function(t){return t.data})},deleteFolder:function(n){return t.all("assets_folders").customDELETE(n).then(function(t){return t},function(t){return t.data})},trashFolder:function(n){return t.all("assets_folders/"+n+"/trash").customDELETE().then(function(t){return t},function(t){return t.data})},starredFolder:function(n){return t.all("assets_folders/"+n+"/starred").customPUT().then(function(t){return t},function(t){return t.data})},restoreFolder:function(n){return t.all("assets_folders/"+n+"/restore").customPUT().then(function(t){return t},function(t){return t.data})},moveFolder:function(n,e){return t.all("assets_folders/"+n+"/move/"+e).customPUT().then(function(t){return t},function(t){return t.data})},updateFolder:function(n,e){return t.all("assets_folders/"+n).customPUT(e).then(function(t){return t},function(t){return t.data})}}}angular.module("tessaApp").factory("assetsFctry",t),t.$inject=["Restangular","API_URL","toastr"]}();
!function(){"use strict";angular.module("tessaApp").factory("socket",["socketFactory","API_URL",function(t,o){var c=io.connect(o),e=t({ioSocket:c});return e}])}();
angular.module("ngIOS9UIWebViewPatch",["ng"]).config(["$provide",function(n){"use strict";n.decorator("$browser",["$delegate","$window",function(n,e){function t(n){return/(iPhone|iPad|iPod).* OS 9_\d/.test(n)&&!/Version\/9\./.test(n)}function r(n){function e(){t=null}var t=null,r=n.url;return n.url=function(){return arguments.length?(t=arguments[0],r.apply(n,arguments)):t||r.apply(n,arguments)},window.addEventListener("popstate",e,!1),window.addEventListener("hashchange",e,!1),n}return t(e.navigator.userAgent)?r(n):n}])}]);
var isChrome=!!navigator.webkitGetUserMedia,DetectRTC={};!function(){var e;DetectRTC.screen={chromeMediaSource:"screen",getSourceId:function(o){if(!o)throw'"callback" parameter is mandatory.';e=o,window.postMessage("get-sourceId","*")},isChromeExtensionAvailable:function(e){if(e){if("desktop"==DetectRTC.screen.chromeMediaSource)return e(!0);window.postMessage("are-you-there","*"),setTimeout(function(){e("screen"==DetectRTC.screen.chromeMediaSource?!1:!0)},2e3)}},onMessageCallback:function(o){var t=window.EXT_ID||"abggimbnoanedfgibfmkilplcmehkfln",n="https://chrome.google.com/webstore/detail/tessa-presentation/"+t;if("string"==typeof o||o.sourceId){if("PermissionDeniedError"==o){if(DetectRTC.screen.chromeMediaSource="PermissionDeniedError",e)return e("PermissionDeniedError");throw new Error("PermissionDeniedError")}"rtcmulticonnection-extension-loaded"==o&&(console.log('<strong>Great!</strong> <a href="'+n+'" target="_blank">Google chrome extension</a> is installed.'),DetectRTC.screen.chromeMediaSource="desktop"),o.sourceId&&(DetectRTC.screen.sourceId=o.sourceId,e&&e(DetectRTC.screen.sourceId))}},getChromeExtensionStatus:function(e){if(navigator.mozGetUserMedia)return e("not-chrome");var o=navigator.getUserMedia||navigator.webkitGetUserMedia;if(o){var t=window.EXT_ID||"abggimbnoanedfgibfmkilplcmehkfln",n=document.createElement("img");n.src="chrome-extension://"+t+"/img/desktopCapture48.png",n.onload=function(){DetectRTC.screen.chromeMediaSource="desktop",window.postMessage("are-you-there","*"),setTimeout(function(){DetectRTC.screen.notInstalled||e("installed-enabled")},2e3)},n.onerror=function(){DetectRTC.screen.notInstalled=!0,e("not-installed")}}else DetectRTC.screen.notSupported=!0,e("not-supported")}},window.postMessage&&isChrome&&DetectRTC.screen.isChromeExtensionAvailable()}(),window.addEventListener("message",function(e){e.origin==window.location.origin&&DetectRTC.screen.onMessageCallback(e.data)});
!function(){"use strict";angular.module("tessa-presentation",["angular-uuid","ng.deviceDetector"]).constant("WS_URL","localhost:3000").constant("API_URL","http://localhost:3000").config(["$stateProvider","$urlRouterProvider","localStorageServiceProvider",function(t,e,o){o.setPrefix("tessaP").setStorageType("sessionStorage").setNotify(!0,!0)}])}();
function AngularUUID(){"use strict";function n(n){function r(n,r,e){var u=r&&e||0,a=0;for(r=r||[],n.toLowerCase().replace(/[0-9a-f]{2}/g,function(n){a<16&&(r[u+a++]=g[n])});a<16;)r[u+a++]=0;return r}function e(n,r){var e=r||0,u=v;return u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+"-"+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]+u[n[e++]]}function u(n,r,u){var a=r&&u||0,o=r||[];n=n||{};var t=null!=n.clockseq?n.clockseq:p,f=null!=n.msecs?n.msecs:(new Date).getTime(),l=null!=n.nsecs?n.nsecs:h+1,c=f-U+(l-h)/1e4;if(c<0&&null==n.clockseq&&(t=t+1&16383),(c<0||f>U)&&null==n.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");U=f,h=l,p=t,f+=122192928e5;var i=(1e4*(268435455&f)+l)%4294967296;o[a++]=i>>>24&255,o[a++]=i>>>16&255,o[a++]=i>>>8&255,o[a++]=255&i;var s=f/4294967296*1e4&268435455;o[a++]=s>>>8&255,o[a++]=255&s,o[a++]=s>>>24&15|16,o[a++]=s>>>16&255,o[a++]=t>>>8|128,o[a++]=255&t;for(var d=n.node||y,v=0;v<6;v++)o[a+v]=d[v];return r?r:e(o)}function a(n,r,u){var a=r&&u||0;"string"==typeof n&&(r="binary"===n?new d(16):null,n=null),n=n||{};var t=n.random||(n.rng||o)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,r)for(var f=0;f<16;f++)r[a+f]=t[f];return r||e(t)}var o,t,f,l=n.crypto||n.msCrypto;if(!o&&l&&l.getRandomValues)try{var c=new Uint8Array(16);f=o=function(){return l.getRandomValues(c),c},o()}catch(i){}if(!o){var s=new Array(16);t=o=function(){for(var n,r=0;r<16;r++)0===(3&r)&&(n=4294967296*Math.random()),s[r]=n>>>((3&r)<<3)&255;return s},"undefined"!=typeof console&&console.warn&&console.warn("[SECURITY] node-uuid: crypto not usable, falling back to insecure Math.random()")}for(var d="function"==typeof Buffer?Buffer:Array,v=[],g={},m=0;m<256;m++)v[m]=(m+256).toString(16).substr(1),g[v[m]]=m;var w=o(),y=[1|w[0],w[1],w[2],w[3],w[4],w[5]],p=16383&(w[6]<<8|w[7]),U=0,h=0,A=a;return A.v1=u,A.v4=a,A.parse=r,A.unparse=e,A.BufferClass=d,A._rng=o,A._mathRNG=t,A._whatwgRNG=f,A}angular.module("angular-uuid",[]).factory("uuid",["$window",n])}"undefined"!=typeof module&&module.exports?module.exports=new AngularUUID:"undefined"!=typeof define&&define.amd?define(function(){return new AngularUUID}):AngularUUID();
!function(){"use strict";angular.module("tessa-presentation").controller("GlobalCtrl",["$scope","uuid","localStorageService","socket","deviceDetector","$interval","$sce","$timeout","API_URL","$state",function(e,t,o,s,i,n,r,a,c,l){var u=o.get("uuid");if(!u){var u=t.v4();console.log(u),o.set("uuid",u)}e.hash=u,e.deviceDetector=i,e.isConnected=!1,e.pdfName="",e.file_type="",e.audio=null,e.asset_file={},e.roomId="",e.userId="",e.disablePreview=!1,e.config={};var p,d=document.querySelector("#frames-container");e.init=function(){e.stop(),p=n(function(){s.emit("pair:deviceUUID",{browser:i.browser,browser_version:i.browser_version,device:i.device,os:i.os,os_version:i.os_version,deviceType:"presentation",deviceUUID:u})},1e3)},e.stop=function(){n.cancel(p)},e.init(),e.loadFile=function(t){e.file_type=t.asset_mimetype,"audio"==t.asset_type?(e.audio=!0,a(function(){e.$apply(function(){e.config={autoPlay:!0,sources:[{src:r.trustAsResourceUrl(t.asset_url),type:t.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})},10)):"video"==t.asset_type?(e.audio=!1,a(function(){e.$apply(function(){e.config={autoPlay:!0,sources:[{src:r.trustAsResourceUrl(t.asset_url),type:t.asset_mimetype}],theme:{url:"http://www.videogular.com/styles/themes/default/latest/videogular.css"}}})},10)):(e.audio=null,e.pdfName=t.media_name,"application/pdf"==t.asset_mimetype?a(function(){e.$apply(function(){e.pdfUrl=r.trustAsResourceUrl(t.asset_url)})},10):"text/plain"==t.asset_mimetype?a(function(){e.$apply(function(){e.pdfUrl=r.trustAsResourceUrl("https://docs.google.com/gview?url="+t.asset_url+"&embedded=true")})},10):a(function(){e.$apply(function(){e.pdfUrl=r.trustAsResourceUrl("https://view.officeapps.live.com/op/view.aspx?src="+t.asset_url)})},10))},s.on("pair:init",function(){console.log("pair:init")}),s.on("pair:connected",function(t){console.log("pair:connected: ",t),e.isConnected=!0,e.stop(),e.roomId=c,e.userId=t.asset_file.deviceUUID,e.asset_file=t.asset_file}),s.on("pair:closePresentation",function(){a(function(){e.$apply(function(){e.isConnected=!1,e.config={},e.pdfUrl={},l.reload()})},10)}),s.on("pair:fail",function(){e.isConnected=!1,e.init()}),s.on("pair:screenshotR",function(t){console.log("screenshotR: ",t),e.isConnected=!0,d.innerHTML="";var o=document.createElement("img"),s=(new XMLSerializer).serializeToString(t),i="data:image/svg+xml;base64,"+btoa(s);o.src=i,o.style.top=0,o.style.bottom=0,o.style.right=0,o.style.left=0,o.style.width="100%",o.style.height="100%",d.appendChild(o)})}])}();
!function(e,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var t=r();for(var n in t)("object"==typeof exports?exports:e)[n]=t[n]}}(this,function(){return function(e){function r(n){if(t[n])return t[n].exports;var o=t[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var t={};return r.m=e,r.c=t,r.p="",r(0)}([function(e,r,t){"use strict";var n=t(1),o=t(2);e.exports="dragularModule",angular.module("dragularModule",[]).factory("dragularService",o).directive("dragular",n)},function(e,r){"use strict";var t=function(e){return{restrict:"A",link:function(r,t,n){function o(e){try{return JSON.parse(e)}catch(r){return}}var i,a=r.$eval(n.dragular)||o(n.dragular)||{};a&&a.containersModel&&"string"==typeof a.containersModel&&(a.containersModel=r.$eval(a.containersModel)),a&&a.dynamicModelAttribute?r.$watch(function(){return r.$eval(n.dragularModel)},function(e){e&&(i.containersModel=i.sanitizeContainersModel(r.$eval(e)))}):n.dragularModel&&(a.containersModel=r.$eval(n.dragularModel)),n.dragularNameSpace&&(a.nameSpace=n.dragularNameSpace.split(" ")),n.dragularOnInit&&(a.onInit=r.$eval(n.dragularOnInit)),i=e(t[0],a)}}};t.$inject=["dragularService"],e.exports=t},function(e,r){"use strict";var t={classesCache:{},containersCtx:{},containers:{},mirror:null,source:null,item:null,copy:null,sourceItem:null,sourceModel:null,sourceFilteredModel:null,target:null,targetCtx:null,targetModel:null,lastDropTarget:null,offsetX:null,offsetY:null,moveX:null,moveY:null,offsetXr:null,offsetYb:null,clientX:null,clientY:null,mirrorWidth:null,mirrorHeight:null,initialSibling:null,currentSibling:null,initialIndex:null,currentIndex:null,tempModel:null,dragOverEvents:{},lastElementBehindCursor:null,grabbed:null},n=function(e,r){function n(n,s){function h(e){return"function"==typeof e?e:Array.isArray(e)?Array.isArray(e[0])?e:[e]:[]}function M(){1!==arguments.length||Array.isArray(n)||angular.isElement(n)||n[0]||"string"==typeof n?"string"==typeof n&&(ce=document.querySelectorAll(n)):(ue=n||{},ce=[]),le=ue.copyOptions?angular.copy(ue):ue}function S(){var e=angular.extend({},ge,le);angular.extend(le,e),le.classes&&(e=angular.extend({},de,le.classes),angular.extend(le.classes,e)),le.eventNames&&(e=angular.extend({},me,le.eventNames),angular.extend(le.eventNames,e))}function T(){v(le.boundingBox)||(le.boundingBox=!1),le.containers&&(ce=le.containers),ce=l(ce),le.containersModel=h(le.containersModel),Array.isArray(le.containersFilteredModel)?le.containersFilteredModel=Array.isArray(le.containersFilteredModel[0])?le.containersFilteredModel:[le.containersFilteredModel]:le.containersFilteredModel=[],le.nameSpace||(le.nameSpace=["dragularCommon"]),Array.isArray(le.nameSpace)||(le.nameSpace=[le.nameSpace]),le.nameSpace.forEach(function(e){t.containers[e]||(t.containers[e]=[],t.containersCtx[e]=[]);for(var r=ce.length,n=t.containers[e].length,o=0;o<r;o++)t.containers[e][o+n]=ce[o],t.containersCtx[e][o+n]={o:le,m:F()[o],fm:le.containersFilteredModel[o]}})}function A(e){var r=e?"off":"on";o(O,r,"mouseup",B),ce.forEach(function(e){o(e,"on","mousedown",$)}),e||angular.forEach(["dragularenter","dragularleave","dragularrelease"],function(e){var r=le.eventNames[e];t.dragOverEvents[r]||(Y.createEvent?(t.dragOverEvents[r]=Y.createEvent("HTMLEvents"),t.dragOverEvents[r].initEvent(r,!0,!0)):(t.dragOverEvents[r]=Y.createEventObject(),t.dragOverEvents[r].eventType=r))})}function $(e){if(1===c(e)&&!e.metaKey&&!e.ctrlKey){t.moveX=e.clientX,t.moveY=e.clientY;var r=R(e.target);r&&r.item&&(t.grabbed=r,H(),"mousedown"===e.type&&(C(e.target)?e.target.focus():e.preventDefault()))}}function B(e){if(K(),fe.dragging){e.originalEvent&&(e=e.originalEvent),t.clientX=b("clientX",e),t.clientY=b("clientY",e);var r=ae(t.mirror,t.clientX,t.clientY),n=V(r,t.clientX,t.clientY);n&&(t.copy&&se(le.copySortSource)||!t.copy||n!==t.source)?U(t.item,n):se(le.removeOnSpill)?q():J(),t.target=null,t.lastElementBehindCursor&&I(t.lastElementBehindCursor,t.dragOverEvents.dragularrelease,r),le.scope&&le.scope.$emit(le.eventNames.dragularrelease,t.item,t.source,e)}}function w(e){if(!e)return!1;for(var r=le.nameSpace.length;r--;)if(t.containers[le.nameSpace[r]].indexOf(e)!==-1)return!0;return le.isContainer(e)?(t.tempModel=le.isContainerModel(e),!0):(t.tempModel=null,!1)}function F(){return"function"==typeof le.containersModel?h(le.containersModel(fe,t)):le.containersModel}function D(r){e.$applyAsync(function(){var e=Array.isArray(r)?r:l(r);e.forEach(function(e){angular.forEach(le.nameSpace,function(r){var n;n=t.containers[r].indexOf(e),t.containers[r].splice(n,1),t.containersCtx[r].splice(n,1)})})})}function H(e){var r=e?"off":"on";o(O,r,"mousemove",k)}function j(e){var r=e?"off":"on";o(O,r,"selectstart",u),o(O,r,"click",u),o(O,r,"touchmove",u)}function P(){A(!0),D(ce),B({})}function k(e){if(t.grabbed&&!fe.dragging){if(e.originalEvent&&(e=e.originalEvent),0===c(e))return void B({});if(!e.clientX||e.clientX!==t.moveX||!e.clientY||e.clientY!==t.moveY){if(se(le.ignoreInputTextSelection)){var r=b("clientX",e),n=b("clientY",e),o=Y.elementFromPoint(r,n);if(C(o))return}var i=t.grabbed;if(H("remove"),j(),z(),W(i),!le.direction&&E(t.sourceItem)){var a=t.sourceItem.parentNode,l=a.offsetHeight,u=a.offsetWidth,s=t.sourceItem.clientHeight,m=t.sourceItem.clientWidth;le.direction=l/s<u/m?"horizontal":"vertical"}var g=d(t.sourceItem);t.offsetX=b("pageX",e)-g.left,t.offsetY=b("pageY",e)-g.top,t.clientX=b("clientX",e),t.clientY=b("clientY",e),le.boundingBox&&(t.offsetXr=b("pageX",e)-g.right,t.offsetYb=b("pageY",e)-g.bottom),e.preventDefault(),te(),y(t.item,le.classes.transit),t.mirror.style.left=t.clientX-t.offsetX+"px",t.mirror.style.top=t.clientY-t.offsetY+"px",Z(e)}}}function R(e){if(fe.dragging&&t.mirror)return void console.log("usecase?");for(var r=e;E(e)&&!w(E(e));){if(le.invalid(e,r))return;if(e=E(e),!e)return}var n=E(e);return n&&!le.invalid(e,r)&&le.moves(e,n,r,p(e))?{item:e,source:n}:void 0}function L(e){var r=R(e);r&&W(r)}function W(e){t.sourceItem=t.item=e.item,t.source=e.source,t.initialSibling=t.currentSibling=p(e.item),se(le.copy,[e.item,e.source])?(t.item=e.item.cloneNode(!0),t.copy=!0,le.scope&&le.scope.$emit(le.eventNames.dragularcloned,t.item,e.item)):t.copy=!1;var r=ce.indexOf(e.source);return t.sourceModel=F()[r],t.sourceFilteredModel=le.containersFilteredModel[r],t.initialIndex=N(e.item,e.source),fe.dragging=!0,le.scope&&le.scope.$emit(le.eventNames.dragulardrag,t.sourceItem,t.source),!0}function z(){fe.dragging&&t.item&&U(t.item,E(t.item))}function K(){t.grabbed=!1,H("remove"),j("remove")}function U(n,o){function i(){if(le.compileItemOnDrop){var e=angular.element(o).scope();e.$applyAsync(function(){var i=r(t.copy?a.cloneNode(!0):a)(e);n.parentNode===o&&o.removeChild(n),o.insertBefore(i[0],l)})}le.scope&&(Q(o)?le.scope.$emit(le.eventNames.dragularcancel,n,t.source,t.sourceModel,t.initialIndex):le.scope.$emit(le.eventNames.dragulardrop,n,o,t.source,t.sourceModel,t.initialIndex,t.targetModel,c)),G()}if(!n)return void G();var a=t.sourceItem,l=t.currentSibling,c=N(n,o);t.copy&&se(le.copySortSource)&&o===t.source&&E(n)&&n.parentNode.removeChild(t.sourceItem),t.sourceModel&&!Q(o)?(t.targetCtx.fm&&(c=t.targetCtx.m.indexOf(t.targetCtx.fm[c])),t.sourceFilteredModel&&(t.initialIndex=t.sourceModel.indexOf(t.sourceFilteredModel[t.initialIndex])),e.$applyAsync(function(){t.sourceModel&&(o===t.source?t.sourceModel.splice(c,0,t.sourceModel.splice(t.initialIndex,1)[0]):(t.dropElmModel=t.copy&&!le.dontCopyModel?angular.copy(t.sourceModel[t.initialIndex]):t.sourceModel[t.initialIndex],t.tempModel?t.targetModel=t.tempModel:t.targetModel=t.targetCtx.m,o.removeChild(n),t.copy||t.sourceModel.splice(t.initialIndex,1),t.targetModel.splice(c,0,t.dropElmModel)),E(n)&&n.parentNode.removeChild(n),i())})):i()}function q(){if(fe.dragging){var r=E(t.item);r&&r.removeChild(t.item),t.sourceModel&&e.$applyAsync(function(){t.sourceModel.splice(t.initialIndex,1),G()}),le.scope&&le.scope.$emit(t.copy?le.eventNames.dragularcancel:le.eventNames.dragularremove,t.item,r,t.sourceModel,t.initialIndex),t.sourceModel||G()}}function J(e){if(fe.dragging){var r=arguments.length>0?e:se(le.revertOnSpill),n=E(t.item),o=Q(n);o||t.copy||!r||t.source.insertBefore(t.item,t.initialSibling),!t.sourceModel||t.copy||r?le.scope&&(o||r)&&le.scope.$emit(le.eventNames.dragularcancel,t.item,t.source,t.sourceModel,t.initialIndex):U(t.item,n),(!t.sourceModel||t.copy||r||o)&&G()}}function G(){K(),ne(),t.item&&x(t.item,le.classes.transit),fe.dragging=!1,se(le.removeOnSpill)===!0&&ee(),le.scope&&(t.lastDropTarget&&le.scope.$emit(le.eventNames.dragularout,t.item,t.lastDropTarget,t.source),le.scope.$emit(le.eventNames.dragulardragend,t.item)),t.source=t.item=t.sourceItem=t.initialSibling=t.currentSibling=t.sourceModel=null,t.initialIndex=t.currentIndex=t.lastDropTarget=t.tempModel=t.targetModel=null,t.dropElmModel=t.targetCtx=t.copy=t.moveX=t.moveY=null}function Q(e,r){var n=r||(t.mirror?t.currentSibling:p(t.item));return e===t.source&&n===t.initialSibling}function V(e,r,n){function o(){var o=!1;if(w(i)){for(var a=oe(i,e),l=ie(i,a,r,n),c=Q(i,l),u=le.nameSpace.length;u--;){if(t.containers[le.nameSpace[u]].indexOf(i)!==-1){t.targetCtx=t.containersCtx[le.nameSpace[u]][t.containers[le.nameSpace[u]].indexOf(i)];break}t.targetCtx||(t.targetCtx=t.containersCtx.dragularCommon[t.containers.dragularCommon.indexOf(i)])}o=c||t.targetCtx.o.accepts(t.item,i,t.source,l,t.sourceModel,t.initialIndex)&&le.canBeAccepted(t.item,i,t.source,l,t.sourceModel,t.initialIndex),t.target!==i&&(t.target=i)}return o}for(var i=e;i&&!o();)i=E(i);return i}function Z(e){function r(r){le.scope&&le.scope.$emit(le.eventNames["dragular"+r],t.item,t.lastDropTarget,t.source,e),se(le.removeOnSpill)===!0&&("over"===r?_():ee())}if(t.mirror){e.originalEvent&&(e=e.originalEvent),t.clientX=b("clientX",e),t.clientY=b("clientY",e);var n,o,i,a=t.clientX-t.offsetX,l=t.clientY-t.offsetY;le.boundingBox&&(n=b("pageX",e),o=b("pageY",e),i=d(le.boundingBox)),le.lockY||(!le.boundingBox||n>i.left+t.offsetX&&n<i.right+t.offsetXr?t.mirror.style.left=a+"px":le.boundingBox&&(n<i.left+t.offsetX?t.mirror.style.left=t.clientX-(n-i.left)+"px":t.mirror.style.left=t.clientX-t.mirrorWidth-(n-i.right)+"px")),le.lockX||(!le.boundingBox||o>i.top+t.offsetY&&o<i.bottom+t.offsetYb?t.mirror.style.top=l+"px":le.boundingBox&&(o<i.top+t.offsetY?t.mirror.style.top=t.clientY-(o-i.top)+"px":t.mirror.style.top=t.clientY-t.mirrorHeight-(o-i.bottom)+"px"));var c=ae(t.mirror,t.clientX,t.clientY),u=V(c,t.clientX,t.clientY),s=u!==t.lastDropTarget;if(c!==t.lastElementBehindCursor&&(I(c,t.dragOverEvents.dragularenter,!!u),t.lastElementBehindCursor&&I(t.lastElementBehindCursor,t.dragOverEvents.dragularleave,c),t.lastElementBehindCursor=c),s&&(t.lastDropTarget&&r("out"),t.lastDropTarget=u,r("over")),u===t.source&&t.copy&&!se(le.copySortSource))return void(E(t.item)&&t.item.parentNode.removeChild(t.item));var m,g=oe(u,c);if(null!==g)m=ie(u,g,t.clientX,t.clientY);else{if(se(le.revertOnSpill)!==!0||t.copy)return void(t.copy&&E(t.item)&&t.item.parentNode.removeChild(t.item));m=t.initialSibling,u=t.source}(null===m||m!==t.item&&m!==p(t.item)&&m!==t.currentSibling)&&(t.currentSibling=m,u.insertBefore(t.item,m),le.scope&&le.scope.$emit(le.eventNames.dragularshadow,t.item,u,e))}}function _(){x(t.item,le.classes.hide)}function ee(){fe.dragging&&y(t.item,le.classes.hide)}function re(e){if(t.target){e.originalEvent&&(e=e.originalEvent);var r=t.target.scrollTop;t.target.scrollTop+=e.deltaY,r!==t.target.scrollTop&&(e.stopPropagation(),e.preventDefault())}}function te(){if(!t.mirror){var e=t.sourceItem.getBoundingClientRect();t.mirror=t.sourceItem.cloneNode(!0),t.mirrorWidth=e.width,t.mirrorHeight=e.height,t.mirror.style.width=m(e)+"px",t.mirror.style.height=g(e)+"px",y(t.mirror,le.classes.mirror),le.mirrorContainer.appendChild(t.mirror),o(O,"on","mousemove",Z),y(Y.body,le.classes.unselectable),o(t.mirror,"on","wheel",re),le.scope&&le.scope.$emit(le.eventNames.dragularcloned,t.mirror,t.sourceItem)}}function ne(){t.mirror&&(x(Y.body,le.classes.unselectable),o(O,"off","mousemove",Z),o(t.mirror,"off","wheel",re),E(t.mirror)&&t.mirror.parentNode.removeChild(t.mirror),t.mirror=null)}function oe(e,r){for(var t=r;t!==e&&E(t)!==e;)t=E(t);return t===O?null:t}function ie(e,r,t,n){function o(){var r,o,i,a=e.children.length;for(r=0;r<a;r++){if(o=e.children[r],i=o.getBoundingClientRect(),l&&i.left>t)return o;if(!l&&i.top>n)return o}return null}function i(){var e=r.getBoundingClientRect();return a(l?t>e.left+m(e)/2:n>e.top+g(e)/2)}function a(e){return e?p(r):r}var l="horizontal"===le.direction;return r!==e?i():o()}function ae(e,r,t){var n,o=e||{},i=o.className;return o.className+=" "+le.classes.hide,n=Y.elementFromPoint(r,t),o.className=i,n}var le,ce=n||[],ue=s||{},se=X,de={mirror:"gu-mirror",hide:"gu-hide",unselectable:"gu-unselectable",transit:"gu-transit"},me={dragularenter:"dragularenter",dragularleave:"dragularleave",dragularrelease:"dragularrelease",dragularcloned:"dragularcloned",dragulardrag:"dragulardrag",dragularcancel:"dragularcancel",dragulardrop:"dragulardrop",dragularremove:"dragularremove",dragulardragend:"dragulardragend",dragularshadow:"dragularshadow",dragularover:"dragularover",dragularout:"dragularout"},ge={copyOptions:!1,classes:de,eventNames:me,containers:!1,containersModel:!1,containersFilteredModel:!1,isContainer:i,isContainerModel:f,moves:a,accepts:a,canBeAccepted:a,copy:!1,copySortSource:!1,dontCopyModel:!1,invalid:i,revertOnSpill:!1,removeOnSpill:!1,lockX:!1,lockY:!1,boundingBox:!1,mirrorContainer:Y.body,ignoreInputTextSelection:!0,compileItemOnDrop:!1,onInit:!1},fe={containers:t.containers,containersCtx:t.containersCtx,sanitizeContainersModel:h,isContainer:w,start:L,end:z,cancel:J,remove:q,destroy:P,dragging:!1};return M(),S(),T(),A(),le.onInit&&le.onInit(fe),fe}function o(e,r,t,n){var o={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},a={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"},l=angular.element(e);"undefined"!=typeof navigator&&navigator.pointerEnabled&&i[t]?l[r](i[t],n):"undefined"!=typeof navigator&&navigator.msPointerEnabled&&a[t]?l[r](a[t],n):o[t]&&l[r](o[t],n),l[r](t,n)}function i(){return!1}function a(){return!0}function l(e,r){return Array.isArray(e)?e:e.length?Array.prototype.slice.call(e,r):[e]}function c(e){if(e.touches)return e.touches.length;if(e.originalEvent&&e.originalEvent.touches)return e.originalEvent.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var r=e.button;return void 0!==r?1&r?1:2&r?3:4&r?2:0:void 0}function u(e){e.originalEvent&&(e=e.originalEvent),t.grabbed&&e.preventDefault()}function s(e,r){return"undefined"!=typeof window[r]?window[r]:O.clientHeight?O[e]:Y.body[e]}function d(e){var r=e.getBoundingClientRect(),t=s("scrollTop","pageYOffset"),n=s("scrollLeft","pageXOffset");return{left:r.left+n,right:r.right+n,top:r.top+t,bottom:r.bottom+t}}function m(e){return e.width||e.right-e.left}function g(e){return e.height||e.bottom-e.top}function f(){return{}}function p(e){function r(){var r=e;do r=r.nextSibling;while(r&&1!==r.nodeType);return r}if(e)return e.nextElementSibling||r()}function v(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function h(e){var r=t.classesCache[e];return r?r.lastIndex=0:t.classesCache[e]=r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)","g"),r}function y(e,r){var t=e.className;t.length?h(r).test(t)||(e.className+=" "+r):e.className=r}function x(e,r){e.className=e.className.replace(h(r)," ").trim()}function M(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function b(e,r){var t=M(r),n={pageX:"clientX",pageY:"clientY"};return e in n&&!(e in t)&&n[e]in t&&(e=n[e]),!t.type||t.type.indexOf("touch")<0?t[e]:t.type.indexOf("end")===-1&&t.originalEvent.touches[0][e.replace("client","page")]}function E(e){return e.parentNode===document?null:e.parentNode}function C(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||S(e)}function S(e){return!!e&&("false"!==e.contentEditable&&("true"===e.contentEditable||S(E(e))))}function N(e,r){return Array.prototype.indexOf.call(angular.element(r).children(),e)}function I(e,r,n){e&&(t.extra=n,e.dispatchEvent?e.dispatchEvent(r):e.fireEvent("on"+r.eventType,r))}function X(e,r,n){return angular.isFunction(e)?!!e.apply(n||this,r||t):!!e}var Y=document,O=Y.documentElement;return n.cleanEnviroment=function(){t.classesCache={},t.containersCtx={},t.containers={},t.mirror=void 0},n.shared=t,n};n.$inject=["$rootScope","$compile"],e.exports=n}])});